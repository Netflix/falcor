!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.falcor=t()}}(function(){var t;return function e(t,n,r){function o(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[s]={exports:{}};t[s][0].call(h.exports,function(e){var n=t[s][1][e];return o(n?n:e)},h,h.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){var r=t(2),o=t(176);r.Router=o,e.exports=r},{176:176,2:2}],2:[function(t,e,n){var r=t(35),o=t(137);r.atom=o.atom,r.ref=o.ref,r.error=o.error,r.pathValue=o.pathValue,r.HttpDataSource=t(132),e.exports=r},{132:132,137:137,35:35}],3:[function(t,e,n){function r(t){var e=t||{};this._root=e._root||new o(e,this),this._path=e.path||e._path||[],this._scheduler=e.scheduler||e._scheduler||new l,this._source=e.source||e._source,this._request=e.request||e._request||new s(this,this._scheduler),this._ID=C++,"number"==typeof e.maxSize?this._maxSize=e.maxSize:this._maxSize=e._maxSize||r.prototype._maxSize,"number"==typeof e.collectRatio?this._collectRatio=e.collectRatio:this._collectRatio=e._collectRatio||r.prototype._collectRatio,(e.boxed||e.hasOwnProperty("_boxed"))&&(this._boxed=e.boxed||e._boxed),(e.materialized||e.hasOwnProperty("_materialized"))&&(this._materialized=e.materialized||e._materialized),"boolean"==typeof e.treatErrorsAsValues?this._treatErrorsAsValues=e.treatErrorsAsValues:e.hasOwnProperty("_treatErrorsAsValues")&&(this._treatErrorsAsValues=e._treatErrorsAsValues),this._allowFromWhenceYouCame=e.allowFromWhenceYouCame||e._allowFromWhenceYouCame||!1,e.cache&&this.setCache(e.cache)}var o=t(5),i=t(4),s=t(57),u=t(65),a=t(63),c=t(64),h=t(77),f=t(79),l=t(78),p=t(85),d=t(88),v=t(53),y=t(141),b=t(92),m=t(104),g=t(106),w=t(102),x=t(103),E=t(81),_=t(80),S=t(137),C=0,k=t(119),N=function(){},A=t(18),O=t(23),D=t(71);e.exports=r,r.ref=S.ref,r.atom=S.atom,r.error=S.error,r.pathValue=S.pathValue,r.prototype.constructor=r,r.prototype._materialized=!1,r.prototype._boxed=!1,r.prototype._progressive=!1,r.prototype._treatErrorsAsValues=!1,r.prototype._maxSize=Math.pow(2,53)-1,r.prototype._collectRatio=.75,r.prototype.get=t(70),r.prototype._getWithPaths=t(69),r.prototype.set=t(73),r.prototype.preload=function(){var t=k(arguments,D,"preload");if(t!==!0)return new u(function(e){e.onError(t)});var e=Array.prototype.slice.call(arguments),n=this;return new u(function(t){return n.get.apply(n,e).subscribe(function(){},function(e){t.onError(e)},function(){t.onCompleted()})})},r.prototype.call=function(){var t,e=-1,n=arguments.length;for(t=new Array(n);++e<n;){var r=arguments[e];t[e]=r;var o=typeof r;if(e>1&&!Array.isArray(r)||0===e&&!Array.isArray(r)&&"string"!==o||1===e&&!Array.isArray(r)&&!g(r))return new u(function(t){t.onError(new Error("Invalid argument"))})}return new a(this,t[0],t[1],t[2],t[3])},r.prototype.invalidate=function(){var t,e=-1,n=arguments.length;for(t=[];++e<n;)if(t[e]=y.fromPath(arguments[e]),!Array.isArray(t[e]))throw new Error("Invalid argument");new c(this,t).subscribe(N,function(t){throw t})},r.prototype.deref=t(7),r.prototype._hasValidParentReference=t(6),r.prototype.getValue=t(20),r.prototype.setValue=t(83),r.prototype._getValueSync=t(28),r.prototype._setValueSync=t(84),r.prototype._derefSync=t(8),r.prototype.setCache=function(t){var e=this._root.cache;if(t!==e){var n=this._root,r=this._path;this._path=[],this._root.cache={},"undefined"!=typeof e&&v(n,n.expired,b(e),0),x(t)?_(this,[t]):w(t)?E(this,[t]):m(t)&&E(this,[{json:t}]),this._path=r}else"undefined"==typeof e&&(this._root.cache={});return this},r.prototype.getCache=function(){var t=d(arguments);if(0===t.length)return A(this._root.cache);var e=[{}],n=this._path;return O.getWithPathsAsJSONGraph(this,t,e),this._path=n,e[0].jsonGraph},r.prototype.getVersion=function(t){var e=t&&y.fromPath(t)||[];if(Array.isArray(e)===!1)throw new Error("Model#getVersion must be called with an Array path.");return this._path.length&&(e=this._path.concat(e)),this._getVersion(this,e)},r.prototype._syncCheck=function(t){if(Boolean(this._source)&&this._root.syncRefCount<=0&&this._root.unsafeMode===!1)throw new Error("Model#"+t+" may only be called within the context of a request selector.");return!0},r.prototype._clone=function(t){var e=new r(this);for(var n in t){var o=t[n];"delete"===o?delete e[n]:e[n]=o}return e.setCache=void 0,e},r.prototype.batch=function(t){var e=t;"number"==typeof e?e=new f(Math.round(Math.abs(e))):e&&e.schedule||(e=new h);var n=this._clone();return n._request=new s(n,e),n},r.prototype.unbatch=function(){var t=this._clone();return t._request=new s(t,new l),t},r.prototype.treatErrorsAsValues=function(){return this._clone({_treatErrorsAsValues:!0})},r.prototype.asDataSource=function(){return new i(this)},r.prototype._materialize=function(){return this._clone({_materialized:!0})},r.prototype._dematerialize=function(){return this._clone({_materialized:"delete"})},r.prototype.boxValues=function(){return this._clone({_boxed:!0})},r.prototype.unboxValues=function(){return this._clone({_boxed:"delete"})},r.prototype.withoutDataSource=function(){return this._clone({_source:"delete"})},r.prototype.toJSON=function(){return{$type:"ref",value:this._path}},r.prototype.getPath=function(){return p(this._path)},r.prototype._fromWhenceYouCame=function(t){return this._clone({_allowFromWhenceYouCame:void 0===t?!0:t})},r.prototype._getBoundValue=t(17),r.prototype._getVersion=t(22),r.prototype._getValueSync=t(21),r.prototype._getPathValuesAsPathMap=O.getWithPathsAsPathMap,r.prototype._getPathValuesAsJSONG=O.getWithPathsAsJSONGraph,r.prototype._setPathValues=t(82),r.prototype._setPathMaps=t(81),r.prototype._setJSONGs=t(80),r.prototype._setCache=t(81),r.prototype._invalidatePathValues=t(52),r.prototype._invalidatePathMaps=t(51)},{102:102,103:103,104:104,106:106,119:119,137:137,141:141,17:17,18:18,20:20,21:21,22:22,23:23,28:28,4:4,5:5,51:51,52:52,53:53,57:57,6:6,63:63,64:64,65:65,69:69,7:7,70:70,71:71,73:73,77:77,78:78,79:79,8:8,80:80,81:81,82:82,83:83,84:84,85:85,88:88,92:92}],4:[function(t,e,n){function r(t){this._model=t._materialize().boxValues().treatErrorsAsValues()}r.prototype.get=function(t){return this._model.get.apply(this._model,t)._toJSONG()},r.prototype.set=function(t){return this._model.set(t)._toJSONG()},r.prototype.call=function(t,e,n,r){var o=[t,e,n].concat(r);return this._model.call.apply(this._model,o)._toJSONG()},e.exports=r},{}],5:[function(t,e,n){function r(t,e){var n=t||{};this.syncRefCount=0,this.expired=n.expired||[],this.unsafeMode=n.unsafeMode||!1,this.collectionScheduler=n.collectionScheduler||new s,this.cache={},this.topLevelModel=e,o(n.comparator)&&(this.comparator=n.comparator),o(n.errorSelector)&&(this.errorSelector=n.errorSelector),o(n.onChange)&&(this.onChange=n.onChange),o(n.onChangesCompleted)&&(this.onChangesCompleted=n.onChangesCompleted)}var o=t(100),i=t(95),s=t(78);r.prototype.errorSelector=function(t,e){return e},r.prototype.comparator=function(t,e){return i(t,"value")&&i(e,"value")?t.value===e.value&&t.$type===e.$type&&t.$expires===e.$expires:t===e},e.exports=r},{100:100,78:78,95:95}],6:[function(t,e,n){var r=t(43),o=t(39);e.exports=function(){var t=this._referenceContainer;return this._allowFromWhenceYouCame?t===!0?!0:t===!1?!1:t&&void 0===t[r]?!1:t&&t[o]?!1:!0:!0}},{39:39,43:43}],7:[function(t,e,n){var r=t(10),o=t(19),i="e",s=t(123);e.exports=function(t){var e,n=t&&t.$__path,u=t&&t.$__refPath,a=t&&t.$__toReference;if(n){var c=i;if(a&&(c=!1,e=o(this,a),u&&e&&e.$type===s)){var h=e.value,f=0,l=u.length;for(c=!0;c&&l>f;++f)h[f]!==u[f]&&(c=!1)}return c?c===i&&(e=!0):e=!1,this._clone({_path:n,_referenceContainer:e})}throw new r}},{10:10,123:123,19:19}],8:[function(t,e,n){var r=t(141),o=t(17),i=t(11);e.exports=function(t){var e=r.fromPath(t);if(!Array.isArray(e))throw new Error("Model#derefSync must be called with an Array path.");var n=o(this,this._path.concat(e),!1),s=n.path,u=n.value,a=n.found;if(!a)return void 0;if(u.$type)throw new i;return this._clone({_path:s})}},{11:11,141:141,17:17}],9:[function(t,e,n){function r(){this.message=r.message,this.stack=(new Error).stack}r.prototype=new Error,r.prototype.name="BoundJSONGraphModelError",r.message="It is not legal to use the JSON Graph format from a bound Model. JSON Graph format can only be used from a root model.",e.exports=r},{}],10:[function(t,e,n){function r(){this.message=i,this.stack=(new Error).stack}var o="InvalidDerefInputError",i="Deref can only be used with a non-primitive object from get, set, or call.";r.prototype=new Error,r.prototype.name=o,r.name=o,r.message=i,e.exports=r},{}],11:[function(t,e,n){function r(t,e){this.message=i,this.stack=(new Error).stack,this.boundPath=t,this.shortedPath=e}var o="InvalidModelError",i="The boundPath of the model is not valid since a value or error was found before the path end.";r.prototype=new Error,r.prototype.name=o,r.message=i,e.exports=r},{}],12:[function(t,e,n){function r(t){this.message="An exception was thrown when making a request.",this.stack=(new Error).stack,this.innerError=t}var o="InvalidSourceError";r.prototype=new Error,r.prototype.name=o,r.is=function(t){return t&&t.name===o},e.exports=r},{}],13:[function(t,e,n){function r(){this.message="The allowed number of retries have been exceeded.",this.stack=(new Error).stack}var o="MaxRetryExceededError";r.prototype=new Error,r.prototype.name=o,r.is=function(t){return t&&t.name===o},e.exports=r},{}],14:[function(t,e,n){function r(){this.message=i,this.stack=(new Error).stack}var o="NullInPathError",i="`null` is not allowed in branch key positions.";r.prototype=new Error,r.prototype.name=o,r.message=i,e.exports=r},{}],15:[function(t,e,n){function r(t,e,n,r,o,f,l){for(var p,d,v=n,y=o,b=r,m=0;;){if(0===m&&b[c]?(m=y.length,d=b[c]):(p=y[m++],d=v[p]),d){var g=d.$type,w=g&&d.value||d;if(m<y.length){if(g){v=d;break}v=d;continue}if(v=d,g&&u(d))break;if(b[c]||i(b,d),g===a){l?s(t,d,f,null,null,null,null,y,y.length,l):h(t._root,d),m=0,y=w,b=d,v=e;continue}break}v=void 0;break}if(m<y.length&&void 0!==v){for(var x=[],E=0;m>E;E++)x[E]=y[E];y=x}return[v,y,b]}var o=t(30),i=o.create,s=t(26),u=t(31),a=t(123),c=t(37),h=t(54);e.exports=r},{123:123,26:26,30:30,31:31,37:37,54:54}],16:[function(t,e,n){var r=t(19),o=t(11),i=t(9);e.exports=function(t,e){return function(n,s,u){var a,c,h,f,l=u[0],p={values:u,optimizedPaths:[]},d=n._root.cache,v=n._path,y=d,b=v.length,m=[],g=[];if(b){if(e)return{criticalError:new i};if(y=r(n,v),y.$type)return{criticalError:new o(v,v)};for(a=[],c=0;b>c;++c)a[c]=v[c];f=n._referenceContainer}else a=[],b=0;for(c=0,h=s.length;h>c;c++)t(n,d,y,s[c],0,l,p,g,m,a,b,e,!1,f);return p}}},{11:11,19:19,9:9}],17:[function(t,e,n){var r=t(21),o=t(11);e.exports=function(t,e,n){var i,s,u,a,c,h=e,f=e;for(i=t._boxed,n=t._materialized,s=t._treatErrorsAsValues,t._boxed=!0,t._materialized=void 0===n||n,t._treatErrorsAsValues=!0,u=r(t,h.concat(null),!0),t._boxed=i,t._materialized=n,t._treatErrorsAsValues=s,h=u.optimizedPath,a=u.shorted,c=u.found,u=u.value;h.length&&null===h[h.length-1];)h.pop();if(c&&a)throw new o(f,h);return{path:h,value:u,shorted:a,found:c}}},{11:11,21:21}],18:[function(t,e,n){function r(t,e,n){Object.keys(t).filter(function(e){return!s(e)&&t[e]}).forEach(function(n){var s=t[n],u=e[n];if(u||(u=e[n]={}),s.$type){var a,c=s.value&&"object"==typeof s.value,h=!t[o];return a=c||h?i(s):s.value,void(e[n]=a)}r(s,u,n)})}var o=t(41),i=t(29),s=t(101);e.exports=function(t){var e={};return r(t,e),e}},{101:101,29:29,41:41}],19:[function(t,e,n){e.exports=function(t,e){for(var n=t._root.cache,r=-1,o=e.length;++r<o&&n&&!n.$type;)n=n[e[r]];return n}},{}],20:[function(t,e,n){var r=t(65),o=t(141);e.exports=function(t){for(var e=o.fromPath(t),n=0,i=e.length;++n<i;)if("object"==typeof e[n])return new r(function(t){t.onError(new Error("Paths must be simple paths"))});var s=this;return new r(function(t){return s.get(e).subscribe(function(n){for(var r=n.json,o=-1,i=e.length;r&&++o<i;)r=r[e[o]];t.onNext(r)},function(e){t.onError(e)},function(){t.onCompleted()})})}},{141:141,65:65}],21:[function(t,e,n){var r=t(15),o=t(29),i=t(31),s=t(54),u=t(123),a=t(121),c=t(122);e.exports=function(t,e,n){for(var h,f,l,p,d,v=t._root.cache,y=e.length,b=[],m=!1,g=!1,w=0,x=v,E=v,_=v,S=!0;x&&y>w;){if(h=e[w++],null!==h&&(x=E[h],b[b.length]=h),!x){_=void 0,m=!0,S=!1;break}if(l=x.$type,y>w){if(l===u&&!i(x)){if(p=r(t,v,v,x,x.value),d=p[0],!d){_=void 0,x=void 0,S=!1;break}l=d.$type,x=d,b=p[1].slice(0)}if(l)break}else _=x;E=x}if(y>w){for(f=w;y>f;++f)if(null!==e[w]){g=!0;break}for(g?(m=!0,_=void 0):_=x,f=w;y>f;++f)null!==e[f]&&(b[b.length]=e[f])}if(_&&l&&(i(_)?_=void 0:s(t._root,_)),_&&l===c&&!t._treatErrorsAsValues)throw{path:w===y?e:e.slice(0,w),value:_.value};return _&&t._boxed?_=Boolean(l)&&!n?o(_):_:!_&&t._materialized?_={$type:a}:_&&(_=_.value),{value:_,shorted:m,optimizedPath:b,found:S}}},{121:121,122:122,123:123,15:15,29:29,31:31,54:54}],22:[function(t,e,n){var r=t(50);e.exports=function(t,e){var n=t._getValueSync({_boxed:!0,_root:t._root,_treatErrorsAsValues:t._treatErrorsAsValues},e,!0).value,o=n&&n[r];return null==o?-1:o}},{50:50}],23:[function(t,e,n){var r=t(16),o=t(34),i=r(o,!1),s=r(o,!0);e.exports={getValueSync:t(21),getBoundValue:t(17),getWithPathsAsPathMap:i,getWithPathsAsJSONGraph:s}},{16:16,17:17,21:21,34:34}],24:[function(t,e,n){var r=t(54),o=t(29);e.exports=function(t,e,n,i,s){var u=e.value;s.errors||(s.errors=[]),t._boxed&&(u=o(e)),s.errors.push({path:i.slice(0,n+1),value:u}),r(t._root,e)}},{29:29,54:54}],25:[function(t,e,n){function r(t,e,n,r,o,i,s){s.requestedMissingPaths.push(r.slice(0,n).concat(e)),s.optimizedMissingPaths.push(o.slice(0,i).concat(e))}var o=t(33),i=o.fastCopy;e.exports=function(t,e,n,o,s,u,a){var c;o.requestedMissingPaths||(o.requestedMissingPaths=[],o.optimizedMissingPaths=[]),c=n<e.length?i(e,n):[],r(t,c,n,s,u,a,o)}},{33:33}],26:[function(t,e,n){var r=t(54),o=t(29),i=t(123),s=t(121),u=t(122),a=t(41);e.exports=function(t,e,n,c,h,f,l,p,d,v){if(n){var y,b,m,g,w,x,E,_=null,S=!1;if(e&&r(t._root,e),e&&void 0!==e.value||(S=t._materialized),S)E={$type:s};else if(t._boxed)E=o(e);else if(e.$type===i||e.$type===u)E=v?o(e):e.value;else if(v){var C=e.value&&"object"==typeof e.value,k=!e[a];E=C||k?o(e):e.value}else E=e.value;if(h&&(h.hasValue=!0),v){for(w=n.jsonGraph,w||(w=n.jsonGraph={},n.paths=[]),y=0,b=d-1;b>y;y++)g=p[y],w[g]||(w[g]={}),w=w[g];g=p[y],w[g]=S?{$type:s}:E,l&&n.paths.push(l.slice(0,c))}else if(0===c)n.json=E;else{for(w=n.json,w||(w=n.json={}),y=0;c-1>y;y++)m=l[y],w[m]||(w[m]=f[y]),_=w,x=m,w=w[m];m=l[y],null!==m?w[m]=E:_[x]=E}}}},{121:121,122:122,123:123,29:29,41:41,54:54}],27:[function(t,e,n){var r=t(31),o=t(122),i=t(24),s=t(26),u=t(25),a=t(32),c=t(39),h=t(90);e.exports=function(t,e,n,f,l,p,d,v,y,b,m,g){var w=e&&e.$type,x=e&&void 0===e.value;return e&&w?void(r(e)?(e[c]||h(e,t._root.expired,t._root),u(t,n,f,p,v,y,b)):w===o?(g&&(v[f]=null),m||t._treatErrorsAsValues?s(t,e,l,f,p,d,v,y,b,m):i(t,e,f,v,p)):(g&&(v[f]=null),(!x||x&&t._materialized)&&s(t,e,l,f,p,d,v,y,b,m))):void(a(t)?s(t,e,l,f,p,d,v,y,b,m):u(t,n,f,p,v,y,b))}},{122:122,24:24,25:25,26:26,31:31,32:32,39:39,90:90}],28:[function(t,e,n){var r=t(141);e.exports=function(t){var e=r.fromPath(t);if(Array.isArray(e)===!1)throw new Error("Model#getValueSync must be called with an Array path.");return this._path.length&&(e=this._path.concat(e)),this._syncCheck("getValueSync")&&this._getValueSync(this,e).value}},{141:141}],29:[function(t,e,n){var r=t(44),o=t(36);e.exports=function(t){var e,n,i,s=Object.keys(t);for(e={},n=0,i=s.length;i>n;n++){var u=s[n];u[0]!==r&&u!==o&&(e[u]=t[u])}return e}},{36:36,44:44}],30:[function(t,e,n){function r(t,e){var n=e[u]||0;e[o+n]=t,e[u]=n+1,t[s]=n,t[i]=e}var o=t(47),i=t(37),s=t(46),u=t(48);e.exports={create:r}},{37:37,46:46,47:47,48:48}],31:[function(t,e,n){var r=t(110);e.exports=function(t){var e=void 0===t.$expires&&-1||t.$expires;return-1!==e&&1!==e&&(0===e||e<r())}},{110:110}],32:[function(t,e,n){e.exports=function(t){return t._materialized&&!t._source}},{}],33:[function(t,e,n){function r(t,e){var n,r,o,i=[];for(r=0,o=e||0,n=t.length;n>o;r++,o++)i[r]=t[o];return i}function o(t,e){var n,r,o,i=[];for(n=0,r=t.length;r>n;n++)i[n]=t[n];for(o=0,r=e.length;r>o;o++)i[n++]=e[o];return i}e.exports={fastCat:o,fastCopy:r}},{}],34:[function(t,e,n){var r=t(15),o=t(27),i=t(26),s=t(31),u=t(150).iterateKeySet,a=t(123),c=t(14),h=t(54),f=t(36);e.exports=function l(t,e,n,p,d,v,y,b,m,g,w,x,E,_){var S=E,C=g,k=_;if(!n||n&&n.$type||d===p.length)return void o(t,n,p,d,v,y,b,m,C,w,x,S);var N,A;N=p[d];var O="object"==typeof N,D=d+1,j=!1,P=N,q=t._allowFromWhenceYouCame;if(O&&(j={},P=u(N,j)),void 0!==P||!j.done){var R,T=w+1;do{S=!1;var W;if(null===P){if(d<p.length)throw new c;W=n}else W=n[P],C[w]=P,m[d]=P;var V=C,M=T;if(W){var $=W.$type,L=$&&W.value||W;if(D<p.length&&$&&$===a&&!s(W)){h(t._root,W),x&&i(t,W,v,D,y,null,null,C,M,x);var z=r(t,e,e,W,L,v,x);for(S=!0,W=z[0],R=z[1],k=z[2],V=[],M=R.length,A=0;M>A;++A)V[A]=R[A]}if(W){var I;I=k&&q?{$__path:W[f],$__refPath:k.value,$__toReference:k[f]}:{$__path:W.$absolutePath},b[d]=I}}l(t,e,W,p,D,v,y,b,m,V,M,x,S,k),j&&!j.done&&(P=u(N,j))}while(j&&!j.done)}}},{123:123,14:14,15:15,150:150,26:26,27:27,31:31,36:36,54:54}],35:[function(t,e,n){"use strict";function r(t){return new r.Model(t)}"function"==typeof Promise?r.Promise=Promise:r.Promise=t(226),e.exports=r,r.Model=t(3)},{226:226,3:3}],36:[function(t,e,n){e.exports="$absolutePath"},{}],37:[function(t,e,n){e.exports=t(44)+"context"},{44:44}],38:[function(t,e,n){e.exports=t(44)+"head"},{44:44}],39:[function(t,e,n){e.exports=t(44)+"invalidated"},{44:44}],40:[function(t,e,n){e.exports=t(44)+"key"},{44:44}],41:[function(t,e,n){e.exports="$modelCreated"},{}],42:[function(t,e,n){e.exports=t(44)+"next"},{44:44}],43:[function(t,e,n){e.exports=t(44)+"parent"},{44:44}],44:[function(t,e,n){e.exports=String.fromCharCode(30)},{}],45:[function(t,e,n){e.exports=t(44)+"prev"},{44:44}],46:[function(t,e,n){e.exports=t(44)+"ref-index"},{44:44}],47:[function(t,e,n){e.exports=t(44)+"ref"},{44:44}],48:[function(t,e,n){e.exports=t(44)+"refs-length"},{44:44}],49:[function(t,e,n){e.exports=t(44)+"tail"},{44:44}],50:[function(t,e,n){e.exports=t(44)+"version"},{44:44}],51:[function(t,e,n){function r(t,e,n,o,s,u,c,h,f,l){if(!E(t)&&!t.$type)for(var p in t)if(p[0]!==a&&"$"!==p[0]&&m(t,p)){var d=t[p],v=g(d)&&!d.$type,y=i(n,o,s,p,d,v,!1,u,c,h,f,l),w=y[0],x=y[1];w&&(v?r(d,e+1,n,x,w,u,c,h,f,l):k(w,x,p,h)&&C(x,b(w),h,u))}}function o(t,e,n,r,o,s,a,f){if(w(n))return _(n,o,s),[void 0,e];y(s,n);var d=n,v=n.value,b=e;if(n=n[h],null!=n)b=n[c]||e;else{var m=0,g=v.length-1;b=n=e;do{var x=v[m],S=g>m,C=i(e,b,n,x,t,S,!0,r,o,s,a,f);if(n=C[0],E(n))return C;b=C[1]}while(m++<g);if(d[h]!==n){var k=n[p]||0;n[p]=k+1,n[u+k]=d,d[h]=n,d[l]=k}}return[n,b]}function i(t,e,n,r,i,u,a,c,h,f,l,p){for(var v=n.$type;v===d;){var y=o(i,t,n,c,h,f,l,p);if(n=y[0],E(n))return y;e=y[1],v=n&&n.$type}if(void 0!==v)return[n,e];if(null==r){if(u)throw new Error("`null` is not allowed in branch key positions.");n&&(r=n[s])}else e=n,n=e[r];return[n,e]}var s=t(40),u=t(47),a=t(44),c=t(43),h=t(37),f=t(50),l=t(46),p=t(48),d=t(123),v=t(17),y=t(54),b=t(92),m=t(95),g=t(104),w=t(99),x=t(100),E=t(106),_=t(90),S=t(96),C=t(118),k=t(112);e.exports=function(t,e){for(var n=t._root,o=n,i=n.expired,s=S(),u=n._comparator,a=n._errorSelector,h=t._path,l=n.cache,p=h.length?v(t,h).value:l,d=p[c]||l,y=l[f],b=-1,m=e.length;++b<m;){var g=e[b];r(g.json,0,l,d,p,s,i,o,u,a)}var w=l[f],E=n.onChange;x(E)&&y!==w&&E.call(n.topLevelModel)}},{100:100,104:104,106:106,112:112,118:118,123:123,17:17,37:37,40:40,43:43,44:44,46:46,47:47,48:48,50:50,54:54,90:90,92:92,95:95,96:96,99:99}],52:[function(t,e,n){function r(t,e,n,o,s,u,a,c){var h={},f=e<t.length-1,l=t[e],p=x(l,h);do{var d=i(n,o,s,p,f,!1,u,a,c),v=d[0],b=d[1];v&&(f?r(t,e+1,n,b,v,u,a,c):S(v,b,p,c)&&_(b,y(v),c,u)),p=x(l,h)}while(!h.done)}function o(t,e,n,r,o){if(b(e))return w(e,r,o),[void 0,t];v(o,e);var s=e,h=e.value,p=t;if(e=e[c],null!=e)p=e[a]||t;else{var d=0,y=h.length-1;p=e=t;do{var m=h[d],x=y>d,E=i(t,p,e,m,x,!0,n,r,o);if(e=E[0],g(e))return E;p=E[1]}while(d++<y);if(s[c]!==e){var _=e[l]||0;e[l]=_+1,e[u+_]=s,s[c]=e,s[f]=_}}return[e,p]}function i(t,e,n,r,i,u,a,c,h){for(var f=n.$type;f===p;){var l=o(t,n,a,c,h);if(n=l[0],g(n))return l;e=l[1],f=n.$type}if(void 0!==f)return[n,e];if(null==r){if(i)throw new Error("`null` is not allowed in branch key positions.");n&&(r=n[s])}else e=n,n=e[r];return[n,e]}var s=t(40),u=t(47),a=t(43),c=t(37),h=t(50),f=t(46),l=t(48),p=t(123),d=t(17),v=t(54),y=t(92),b=t(99),m=t(100),g=t(106),w=t(90),x=t(150).iterateKeySet,E=t(96),_=t(118),S=t(112);e.exports=function(t,e){for(var n=t._root,o=n,i=n.expired,s=E(),u=t._path,c=n.cache,f=u.length?d(t,u).value:c,l=f[a]||c,p=c[h],v=-1,y=e.length;++v<y;){var b=e[v];r(b,0,c,l,f,s,i,o)}var g=c[h],w=n.onChange;m(w)&&p!==g&&w.call(n.topLevelModel)}},{100:100,106:106,112:112,118:118,123:123,150:150,17:17,37:37,40:40,43:43,46:46,47:47,48:48,50:50,54:54,90:90,92:92,96:96,99:99}],53:[function(t,e,n){var r=t(40),o=t(43),i=t(38),s=t(49),u=t(42),a=t(45),c=t(111),h=t(118);e.exports=function(t,e,n,f,l,p){var d=n,v=l;"number"!=typeof v&&(v=.75);var y,b,m,g="number"==typeof p,w=f*v;for(b=e.pop();b;)m=b.$size||0,d-=m,g===!0?h(b,m,t,p):(y=b[o])&&c(b,y,b[r],t),b=e.pop();if(d>=f){var x=t[s];for(b=x;d>=w&&b;)x=x[a],m=b.$size||0,d-=m,g===!0&&h(b,m,t,p),b=x;t[s]=t[a]=b,null==b?t[i]=t[u]=void 0:b[u]=void 0}}},{111:111,118:118,38:38,40:40,42:42,43:43,45:45,49:49}],54:[function(t,e,n){var r=t(38),o=t(49),i=t(42),s=t(45),u=t(124);e.exports=function(t,e){if(e.$expires!==u){var n=t[r];if(!n)return void(t[r]=t[o]=e);if(n!==e){var a=e[s],c=e[i];c&&(c[s]=a),a&&(a[i]=c),e[s]=void 0,t[r]=e,e[i]=n,n[s]=e,e===t[o]&&(t[o]=a)}}}},{124:124,38:38,42:42,45:45,49:49}],55:[function(t,e,n){var r=t(38),o=t(49),i=t(42),s=t(45);e.exports=function(t,e){var n=e[s],u=e[i];u&&(u[s]=n),n&&(n[i]=u),e[s]=e[i]=void 0,e===t[r]&&(t[r]=u),e===t[o]&&(t[o]=n)}},{38:38,42:42,45:45,49:49}],56:[function(t,e,n){function r(t,e){var n=!1;return function(){if(!n&&!t._disposed){n=!0,t._callbacks[e]=null,t._optimizedPaths[e]=[],t._requestedPaths[e]=[];var r=--t._count;0!==r||t.sent||(t._disposable.dispose(),t.requestQueue.removeRequest(t))}}}function o(t){for(var e=[],n=-1,r=0,o=t.length;o>r;++r)for(var i=t[r],s=0,u=i.length;u>s;++s)e[++n]=i[s];return e}var i=t(59),s=t(60),u=0,a=t(58).GetRequest,c=t(80),h=t(82),f=t(122),l=[],p=t(12),d=function(t,e){this.sent=!1,this.scheduled=!1,this.requestQueue=e,this.id=++u,this.type=a,this._scheduler=t,this._pathMap={},this._optimizedPaths=[],this._requestedPaths=[],this._callbacks=[],this._count=0,this._disposable=null,this._collapsed=null,this._disposed=!1};d.prototype={batch:function(t,e,n){var o=this,i=o._optimizedPaths,u=o._requestedPaths,a=o._callbacks,c=i.length;return i[c]=e,u[c]=t,a[c]=n,++o._count,o.scheduled||(o.scheduled=!0,o._disposable=o._scheduler.schedule(function(){s(o,i,function(t,e){var n,r,i;if(o.requestQueue.removeRequest(o),o._disposed=!0,t instanceof p)for(n=0,i=a.length;i>n;++n)r=a[n],r&&r(t);else if(o._count)for(o._merge(u,t,e),n=0,i=a.length;i>n;++n)r=a[n],r&&r(t,e)})})),r(o,c)},add:function(t,e,n){var o,s,u=this,a=i(t,e,u._pathMap);a?(s=a[2],o=a[1]):(s=t,o=e);var c=!1,h=!1;if(o.length<e.length){c=!0;var f=u._callbacks.length;u._callbacks[f]=n,u._requestedPaths[f]=a[0],u._optimizedPaths[f]=[],++u._count,h=r(u,f)}return[c,s,o,h]},_merge:function(t,e,n){var r=this,i=r.requestQueue.model,s=i._root,u=s.errorSelector,a=s.comparator,p=i._path;i._path=l;var d=o(t);if(e){var v=e;v instanceof Error&&(v={message:v.message}),v.$type||(v={$type:f,value:v});var y=d.map(function(t){return{path:t,value:v}});h(i,y,null,u,a)}else c(i,[{paths:d,jsonGraph:n.jsonGraph}],null,u,a);i._path=p}},e.exports=d},{12:12,122:122,58:58,59:59,60:60,80:80,82:82}],57:[function(t,e,n){function r(t,e){this.model=t,this.scheduler=e,this.requests=this._requests=[]}var o=t(58),i=t(61),s=t(56),u=t(150);r.prototype={setScheduler:function(t){this.scheduler=t},set:function(t,e){return t.paths=u.collapse(t.paths),i(t,this.model,e)},get:function(t,e,n){function r(t){v||(--f,0===f&&n(t))}var i,u,a,c=this,h=[],f=0,l=c._requests,p=e,d=t,v=!1;for(i=0,u=l.length;u>i;++i)if(a=l[i],a.type===o.GetRequest){if(a.sent){var y=a.add(d,p,r);y[0]&&(d=y[1],p=y[2],h[h.length]=y[3],++f)}else a.batch(d,p,r),p=[],d=[],++f;if(!p.length)break}if(p.length){a=new s(c.scheduler,c),l[l.length]=a,++f;var b=a.batch(d,p,r);h[h.length]=b}return function(){if(!v&&0!==f){v=!0;for(var t=h.length,e=0;t>e;++e)h[e]()}}},removeRequest:function(t){for(var e=this._requests,n=e.length;--n>=0;)if(e[n].id===t.id){e.splice(n,1);break}}},e.exports=r},{150:150,56:56,58:58,61:61}],58:[function(t,e,n){e.exports={GetRequest:"GET"}},{}],59:[function(t,e,n){var r=t(150).hasIntersection,o=t(88);e.exports=function(t,e,n){for(var i=[],s=[],u=[],a=-1,c=-1,h=!1,f=0,l=e.length;l>f;++f){var p=e[f],d=n[p.length];d&&r(d,p,0)?(!h&&f>0&&(s=o(t,0,f),i=o(e,0,f)),u[++a]=t[f],h=!0):h&&(i[++c]=p,s[c]=t[f])}return h?[u,i,s]:null}},{150:150,88:88}],60:[function(t,e,n){var r=t(150),o=r.toTree,i=r.toPaths,s=t(12);e.exports=function(t,e,n){if(0===t._count)return void t.requestQueue.removeRequest(t);t.sent=!0,t.scheduled=!1;for(var r=t._pathMap,u=Object.keys(e),a=0,c=u.length;c>a;++a)for(var h=e[a],f=0,l=h.length;l>f;++f){var p=h[f],d=p.length;if(r[d]){var v=r[d];v[v.length]=p}else r[d]=[p]}for(var y=Object.keys(r),b=0,m=y.length;m>b;++b){var g=y[b];r[g]=o(r[g])}var w,x,E=t._collasped=i(r);try{x=t.requestQueue.model._source.get(E)}catch(_){return void n(new s)}x.subscribe(function(t){w=t},function(t){n(t,w)},function(){n(null,w)})}},{12:12,150:150}],61:[function(t,e,n){var r=t(87),o=t(80),i=t(82),s=t(12),u=[],a={dispose:function(){}},c=function(t,e,n){var c,h,f=t.paths,l=e._root,p=l.errorSelector,d=l.comparator,v=e._path;try{h=e._source.set(t)}catch(y){return n(new s),a}var b=h.subscribe(function(t){if(!b||!b.disposed){e._path=u;var n=o(e,[{paths:f,jsonGraph:t.jsonGraph}],null,p,d);t.paths=n[1],e._path=v,c=t}},function(t){b&&b.disposed||(e._path=u,i(e,r(f,function(e){return{path:e,value:t}}),null,p,d),e._path=v,n(t))},function(){n(null,c)});return b};e.exports=c},{12:12,80:80,82:82,87:87}],62:[function(t,e,n){var r=function(t){this.disposed=!1,this.currentDisposable=t};r.prototype={dispose:function(){if(!this.disposed&&this.currentDisposable){this.disposed=!0;var t=this.currentDisposable;t.dispose?t.dispose():t()}}},e.exports=r},{}],63:[function(t,e,n){function r(t,e,n,r,o){this.callPath=u.fromPath(e),this.args=n,o&&(this.paths=o.map(u.fromPath)),r&&(this.suffix=r.map(u.fromPath)),this.model=t;var i=t._root.cache[a];"number"==typeof i?this.initialCacheVersion=i:this.initialCacheVersion=t._root.cache[a]=c()}var o=t(65),i=t(12),s=t(72),u=t(141),a=t(50),c=t(96);r.prototype=Object.create(o.prototype),r.prototype._subscribe=function(t){var e=this.callPath,n=this.args,r=this.suffix,o=this.paths,u=this.model,a=u._clone({_path:[]}),c=u._path,h=c.concat(e),f=this.initialCacheVersion;if(!u._source)return void t.onError(new Error("function does not exist"));var l,p;try{p=u._source.call(h,n,r,o)}catch(d){return void t.onError(new i(d))}return p.subscribe(function(t){l=t},function(e){t.onError(e)},function(){var e=l.invalidated;return e&&e.length&&(++u._root.syncRefCount,a.invalidate.apply(a,e),--u._root.syncRefCount),new s(a.withoutDataSource(),[l],!1,!1,f).subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})})},e.exports=r},{12:12,141:141,50:50,65:65,72:72,96:96}],64:[function(t,e,n){function r(t,e,n){this._model=t;var r,i,a=[],h=-1,l=e.length,p=t._root.cache[c];for("number"==typeof n?this.initialCacheVersion=n:"number"==typeof p?this.initialCacheVersion=p:this.initialCacheVersion=t._root.cache[c]=f();++h<l;){var d,v=e[h];if(o(v))d="PathValues";else if(s(v))d="PathValues";else{if(!u(v))throw new Error("Invalid Input");d="PathMaps"}i!==d&&(i=d,r={inputType:d,arguments:[]},a.push(r)),r.arguments.push(v)}this._groups=a}var o=Array.isArray,i=t(65),s=t(105),u=t(102),a={dispose:function(){}},c=t(50),h=t(100),f=t(96);r.prototype=Object.create(i.prototype),r.prototype.progressively=function(){return this},r.prototype._toJSONG=function(){return this},r.prototype._subscribe=function(t){var e=this._model;this._groups.forEach(function(t){var n=t.inputType,r=t.arguments,o="_invalidate"+n,i=e[o];i(e,r)}),t.onCompleted();var n=e._root,r=n.cache,o=r[c],i=this.initialCacheVersion,s=n.onChangesCompleted;return i!==o&&n.syncRefCount<=0&&h(s)&&s.call(n.topLevelModel),a},e.exports=r},{100:100,102:102,105:105,50:50,65:65,96:96}],65:[function(t,e,n){function r(t){this._subscribe=t}var o=t(35),i=t(109);r.prototype._toJSONG=function(){return this},r.prototype.progressively=function(){return this},r.prototype.subscribe=r.prototype.forEach=function(t,e,n){var r=t;r&&"object"==typeof r||(r={onNext:t||i,onError:e||i,onCompleted:n||i});var o=this._subscribe(r);switch(typeof o){case"function":return{dispose:o};case"object":return o||{dispose:i};default:return{dispose:i}}},r.prototype.then=function(t,e){var n=this;return new o.Promise(function(t,e){var r=!1,o=[];n.subscribe(function(t){o[o.length]=t},function(t){r=!0,e(t)},function(){var e=o;o.length<=1&&(e=o[0]),r===!1&&t(e)})}).then(t,e)},e.exports=r},{109:109,35:35}],66:[function(t,e,n){var r=t(65),o=t(67),i=t(68),s={dispose:function(){}},u=t(50),a=t(53),c=t(92),h=t(100),f=t(96),l=e.exports=function(t,e,n,r,o,i){this.model=t,this.currentRemainingPaths=e,this.isJSONGraph=n||!1,this.isProgressive=r||!1,this.forceCollect=o||!1;var s=t._root.cache[u];"number"==typeof i?this.initialCacheVersion=i:"number"==typeof s?this.initialCacheVersion=s:this.initialCacheVersion=t._root.cache[u]=f()};l.prototype=Object.create(r.prototype),l.prototype._toJSONG=function(){return new l(this.model,this.currentRemainingPaths,!0,this.isProgressive,this.forceCollect,this.initialCacheVersion)},l.prototype.progressively=function(){return new l(this.model,this.currentRemainingPaths,this.isJSONGraph,!0,this.forceCollect,this.initialCacheVersion)},l.prototype._subscribe=function(t){var e=[{}],n=[],r=this.model,f=t.isJSONG=this.isJSONGraph,l=this.isProgressive,p=o(r,this.currentRemainingPaths,t,l,f,e,n);if(!p){var d=r._root,v=d.cache,y=v[u];this.forceCollect&&a(d,d.expired,c(v),r._maxSize,r._collectRatio,y);var b=this.initialCacheVersion,m=d.onChangesCompleted;return b!==y&&d.syncRefCount<=0&&h(m)&&m.call(d.topLevelModel),s}return i(this,r,p,t,e,n,1,this.initialCacheVersion)}},{100:100,50:50,53:53,65:65,67:67,68:68,92:92,96:96}],67:[function(t,e,n){var r=t(23),o=r.getWithPathsAsJSONGraph,i=r.getWithPathsAsPathMap;e.exports=function(t,e,n,r,s,u,a){var c;if(c=s?o(t,e,u):i(t,e,u),c.criticalError)return n.onError(c.criticalError),null;var h=c.hasValue,f=!c.requestedMissingPaths||!t._source;if(c.errors)for(var l=c.errors,p=a.length,d=0,v=l.length;v>d;++d,++p)a[p]=l[d];if(h&&(r||f))try{++t._root.syncRefCount,n.onNext(u[0])}catch(y){throw y}finally{--t._root.syncRefCount}return f?(a.length?n.onError(a):n.onCompleted(),null):c}},{23:23}],68:[function(t,e,n){var r=t(67),o=t(13),i=t(33).fastCat,s=t(53),u=t(92),a=t(62),c=t(50),h=t(12),f=t(100);e.exports=function l(t,e,n,p,d,v,y,b){if(10===y)throw new o;var m=e._request,g=n.requestedMissingPaths,w=n.optimizedMissingPaths,x=new a,E=[],_=e._path;if(_.length)for(var S=0,C=g.length;C>S;++S)E[S]=i(_,g[S]);else E=g;var k=m.get(E,w,function(n){if(n instanceof h)return void p.onError(n);var o=r(e,g,p,t.isProgressive,t.isJSONGraph,d,v);if(o)x.currentDisposable=l(t,e,o,p,d,v,y+1,b);else{var i=e._root,a=i.cache,m=a[c];s(i,i.expired,u(a),e._maxSize,e._collectRatio,m);var w=i.onChangesCompleted;b!==m&&i.syncRefCount<=0&&f(w)&&w.call(i.topLevelModel)}});return x.currentDisposable=k,
x}},{100:100,12:12,13:13,33:33,50:50,53:53,62:62,67:67,92:92}],69:[function(t,e,n){var r=t(66);e.exports=function(t){return new r(this,t)}},{66:66}],70:[function(t,e,n){var r=t(141),o=t(65),i=t(71),s=t(119),u=t(66);e.exports=function(){var t=s(arguments,i,"get");if(t!==!0)return new o(function(e){e.onError(t)});var e=r.fromPathsOrPathValues(arguments);return new u(this,e)}},{119:119,141:141,65:65,66:66,71:71}],71:[function(t,e,n){e.exports={path:!0,pathSyntax:!0}},{}],72:[function(t,e,n){var r=t(65),o=t(141),i=Array.isArray,s=t(105),u=t(103),a=t(102),c=t(75),h=t(50),f=t(96),l=e.exports=function(t,e,n,r,c){this._model=t,this._isJSONGraph=n||!1,this._isProgressive=r||!1,this._initialArgs=e,this._value=[{}];var l=t._root.cache[h];"number"==typeof c?this.initialCacheVersion=c:"number"==typeof l?this.initialCacheVersion=l:this.initialCacheVersion=t._root.cache[h]=f();for(var p,d,v=[],y=-1,b=e.length;++y<b;){var m,g=e[y];i(g)||"string"==typeof g?(g=o.fromPath(g),m="PathValues"):s(g)?(g.path=o.fromPath(g.path),m="PathValues"):u(g)?m="JSONGs":a(g)&&(m="PathMaps"),d!==m&&(d=m,p={inputType:m,arguments:[]},v.push(p)),p.arguments.push(g)}this._groups=v};l.prototype=Object.create(r.prototype),l.prototype._subscribe=function(t){var e=this._groups,n=this._model,r=this._isJSONGraph,o=this._isProgressive;return c(n,t,e,r,o,0,this.initialCacheVersion)},l.prototype._toJSONG=function(){return new l(this._model,this._initialArgs,!0,this._isProgressive,this.initialCacheVersion)},l.prototype.progressively=function(){return new l(this._model,this._initialArgs,this._isJSONGraph,!0,this.initialCacheVersion)}},{102:102,103:103,105:105,141:141,50:50,65:65,75:75,96:96}],73:[function(t,e,n){var r=t(76),o=t(119),i=t(72),s=t(65);e.exports=function(){var t=o(arguments,r,"set");if(t!==!0)return new s(function(e){e.onError(t)});for(var e=-1,n=arguments.length,u=[];++e<n;)u[e]=arguments[e];return new i(this,u)}},{119:119,65:65,72:72,76:76}],74:[function(t,e,n){function r(t){return t.path}function o(t){return t.paths}var i=t(86);e.exports=function(t,e){for(var n=t._root,s=n.errorSelector,u=-1,a=e.length,c=[],h=[],f={requestedPaths:c,optimizedPaths:h};++u<a;){var l=e[u],p=l.inputType,d=l.arguments;if(d.length>0){var v="_set"+p,y=t[v],b=y(t,d,null,s);h.push.apply(h,b[1]),"PathValues"===p?c.push.apply(c,d.map(r)):"JSONGs"===p?c.push.apply(c,i(d,o)):c.push.apply(c,b[0])}}return f}},{86:86}],75:[function(t,e,n){function r(t,e){var n=t._path,r={};return t._path=i,t._getPathValuesAsJSONG(t._materialize().withoutDataSource(),e,[r]),t._path=n,r}function o(t,e,n,r,o,i){var s=new u(t,n,r,o,!0,i);return s.subscribe(e)}var i=[],s=t(62),u=t(66),a=t(74),c=t(23).getWithPathsAsPathMap,h=t(12),f=t(13);e.exports=function l(t,e,n,i,u,p,d){if(10===p)throw new f;var v=a(t,n),y=v.optimizedPaths,b=v.requestedPaths,m=void 0===t._source;if(m)return o(t,e,b,i,u,d);if(u){var g={};c(t,b,[g]),e.onNext(g)}var w=r(t,y),x=new s,E=t._request.set(w,function(r,s){if(typeof r===h)return e.onError(r);var a=!1;(r||y.length===s.paths.length)&&(a=!0),a?x.currentDisposable=o(t,e,b,i,u,d):l(t,e,n,i,u,p+1,d)});return x.currentDisposable=E,x}},{12:12,13:13,23:23,62:62,66:66,74:74}],76:[function(t,e,n){e.exports={pathValue:!0,pathSyntax:!0,json:!0,jsonGraph:!0}},{}],77:[function(t,e,n){function r(){}var o=t(126),i={dispose:function(){}};r.prototype.schedule=function(t){return o(t),i},r.prototype.scheduleWithState=function(t,e){var n=this;return o(function(){e(n,t)}),i},e.exports=r},{126:126}],78:[function(t,e,n){function r(){}var o={dispose:function(){}};r.prototype.schedule=function(t){return t(),o},r.prototype.scheduleWithState=function(t,e){return e(this,t),o},e.exports=r},{}],79:[function(t,e,n){function r(t){this.delay=t}var o=function(t){this.id=t,this.disposed=!1};r.prototype.schedule=function(t){var e=setTimeout(t,this.delay);return new o(e)},r.prototype.scheduleWithState=function(t,e){var n=this,r=setTimeout(function(){e(n,t)},this.delay);return new o(r)},o.prototype.dispose=function(){this.disposed||(clearTimeout(this.id),this.disposed=!0)},e.exports=r},{}],80:[function(t,e,n){function r(t,e,n,o,s,u,a,c,h,f,l,d,v,y,b,g,w){for(var x={},E=e<t.length-1,_=t[e],S=m(_,x),C=d.index;;){var k=i(n,o,s,u,a,c,S,E,!1,l,d,v,y,b,g,w);l[e]=S,l.index=e,d[d.index++]=S;var N=k[0],A=k[1];if(N&&(E?r(t,e+1,n,A,N,u,k[3],k[2],h,f,l,d,v,y,b,g,w):(p(b,N),h.push(l.slice(0,l.index+1)),f.push(d.slice(0,d.index)))),S=m(_,x),x.done)break;d.index=C}}function o(t,e,n,r,o,s,c,l,v,m,g){var w=e.value;if(s.splice(0,s.length),s.push.apply(s,w),d(e))return s.index=w.length,b(e,l,v),[void 0,t,r,n];p(v,e);var x=0,E=e,_=w.length-1,S=e=t,C=r=n;do{var k=w[x],N=_>x;s.index=x;var A=i(t,S,e,n,C,r,k,N,!0,o,s,c,l,v,m,g);if(e=A[0],y(e))return s.index=x,A;S=A[1],r=A[2],C=A[3]}while(x++<_);if(s.index=x,E[a]!==e){var O=e[f]||0;e[f]=O+1,e[u+O]=E,E[a]=e,E[h]=O}return[e,S,r,C]}function i(t,e,n,r,i,u,a,c,h,f,p,d,v,b,m,g){for(var E=n.$type;E===l;){var _=o(t,n,r,u,f,p,d,v,b,m,g);if(n=_[0],y(n))return _;e=_[1],u=_[2],i=_[3],E=n.$type}if(void 0!==E)return[n,e,u,i];if(null==a){if(c)throw new x;n&&(a=n[s])}else e=n,i=u,n=e[a],u=i&&i[a];return n=w(e,n,u,a,f,p,d,v,b,m,g),[n,e,u,i]}var s=t(40),u=t(47),a=t(37),c=t(50),h=t(46),f=t(48),l=t(123),p=t(54),d=t(98),v=t(100),y=t(106),b=t(90),m=t(150).iterateKeySet,g=t(96),w=t(107),x=t(14);e.exports=function(t,e,n,o,i){for(var s=t._root,u=s,a=s.expired,h=g(),f=s.cache,l=f[c],p=[],d=[],y=[],b=[],m=-1,w=e.length;++m<w;)for(var x=e[m],E=x.paths,_=x.jsonGraph,S=-1,C=E.length;++S<C;){var k=E[S];d.index=0,r(k,0,f,f,f,_,_,_,y,b,p,d,h,a,u,i,o)}var N=f[c],A=s.onChange;return v(A)&&l!==N&&A.call(s.topLevelModel),[y,b]}},{100:100,106:106,107:107,123:123,14:14,150:150,37:37,40:40,46:46,47:47,48:48,50:50,54:54,90:90,96:96,98:98}],81:[function(t,e,n){function r(t,e,n,o,u,a,c,h,f,l,p,d,v,y){var b=s(t);if(b&&b.length)for(var g=0,x=b.length,E=f.index;;){var _=b[g],S=t[_],C=w(S)&&!S.$type,k=i(n,o,u,_,S,C,!1,h,f,l,p,d,v,y);h[e]=_,h.index=e,f[f.index++]=_;var N=k[0],A=k[1];if(N&&(C?r(S,e+1,n,A,N,a,c,h,f,l,p,d,v,y):(m(d,N),a.push(h.slice(0,h.index+1)),c.push(f.slice(0,f.index)))),++g>=x)break;f.index=E}}function o(t,e,n,r,o,s,u,c,l,v){var y=n.value;if(o.splice(0,o.length),o.push.apply(o,y),x(n))return o.index=y.length,S(n,u,c),[void 0,e];m(c,n);var b=n,g=e;if(n=n[f],null!=n)g=n[h]||e,o.index=y.length;else{var w=0,E=y.length-1;o.index=w,g=n=e;do{var C=y[w],k=E>w,N=i(e,g,n,C,t,k,!0,r,o,s,u,c,l,v);if(n=N[0],_(n))return o.index=w,N;g=N[1]}while(w++<E);if(o.index=w,b[f]!==n){var A=n[d]||0;n[d]=A+1,n[a+A]=b,b[f]=n,b[p]=A}}return[n,g]}function i(t,e,n,r,i,s,a,c,h,f,l,p,d,y){for(var b=n.$type;b===v;){var m=o(i,t,n,c,h,f,l,p,d,y);if(n=m[0],_(n))return m;e=m[1],b=n&&n.$type}if(void 0!==b)return[n,e];if(null==r){if(s)throw new N;n&&(r=n[u])}else e=n,n=e[r];return n=k(e,n,r,i,s,a,c,h,f,l,p,d,y),[n,e]}function s(t){if(w(t)&&!t.$type){var e=[],n=0;b(t)&&(e[n++]="length");for(var r in t)r[0]!==c&&"$"!==r[0]&&g(t,r)&&(e[n++]=r);return e}return void 0}var u=t(40),a=t(47),c=t(44),h=t(43),f=t(37),l=t(50),p=t(46),d=t(48),v=t(123),y=t(17),b=Array.isArray,m=t(54),g=t(95),w=t(104),x=t(99),E=t(100),_=t(106),S=t(90),C=t(96),k=t(108),N=t(14);e.exports=function(t,e,n,o,i){for(var s=t._root,u=s,a=s.expired,c=C(),f=t._path,p=s.cache,d=f.length?y(t,f).value:p,v=d[h]||p,b=p[l],m=[],g=[],w=[],x=f.length,_=-1,S=e.length;++_<S;){var k=e[_],N=f.slice(0);N.index=x,r(k.json,0,p,v,d,g,w,m,N,c,a,u,i,o)}var A=p[l],O=s.onChange;return E(O)&&b!==A&&O.call(s.topLevelModel),[g,w]}},{100:100,104:104,106:106,108:108,123:123,14:14,17:17,37:37,40:40,43:43,44:44,46:46,47:47,48:48,50:50,54:54,90:90,95:95,96:96,99:99}],82:[function(t,e,n){function r(t,e,n,o,s,u,a,c,h,f,l,p,d,y,b){for(var m={},g=n<e.length-1,x=e[n],E=w(x,m),_=f.index;;){var S=i(o,s,u,E,t,g,!1,h,f,l,p,d,y,b);h[n]=E,h.index=n,f[f.index++]=E;var C=S[0],k=S[1];if(C&&(g?r(t,e,n+1,o,k,C,a,c,h,f,l,p,d,y,b):(v(d,C),a.push(h.slice(0,h.index+1)),c.push(f.slice(0,f.index)))),E=w(x,m),m.done)break;f.index=_}}function o(t,e,n,r,o,s,h,p,d,b){var w=n.value;if(o.splice(0,o.length),o.push.apply(o,w),y(n))return o.index=w.length,g(n,h,p),[void 0,e];v(p,n);var x=n,E=e;if(n=n[c],null!=n)E=n[a]||e,o.index=w.length;else{var _=0,S=w.length-1;E=n=e;do{var C=w[_],k=S>_;o.index=_;var N=i(e,E,n,C,t,k,!0,r,o,s,h,p,d,b);if(n=N[0],m(n))return o.index=_,N;E=N[1]}while(_++<S);if(o.index=_,x[c]!==n){var A=n[l]||0;n[l]=A+1,n[u+A]=x,x[c]=n,x[f]=A}}return[n,E]}function i(t,e,n,r,i,u,a,c,h,f,l,d,v,y){for(var b=n.$type;b===p;){var g=o(i,t,n,c,h,f,l,d,v,y);if(n=g[0],m(n))return g;e=g[1],b=n.$type}if(void 0!==b)return[n,e];if(null==r){if(u)throw new _;n&&(r=n[s])}else e=n,n=e[r];return n=E(e,n,r,i,u,a,c,h,f,l,d,v,y),[n,e]}var s=t(40),u=t(47),a=t(43),c=t(37),h=t(50),f=t(46),l=t(48),p=t(123),d=t(17),v=t(54),y=t(99),b=t(100),m=t(106),g=t(90),w=t(150).iterateKeySet,x=t(96),E=t(108),_=t(14);e.exports=function(t,e,n,o,i){for(var s=t._root,u=s,c=s.expired,f=x(),l=t._path,p=s.cache,v=l.length?d(t,l).value:p,y=v[a]||p,m=p[h],g=[],w=[],E=[],_=l.length,S=-1,C=e.length;++S<C;){var k=e[S],N=k.path,A=k.value,O=l.slice(0);O.index=_,r(A,N,0,p,y,v,w,E,g,O,f,c,u,i,o)}var D=p[h],j=s.onChange;return b(j)&&m!==D&&j.call(s.topLevelModel),[w,E]}},{100:100,106:106,108:108,123:123,14:14,150:150,17:17,37:37,40:40,43:43,46:46,47:47,48:48,50:50,54:54,90:90,96:96,99:99}],83:[function(t,e,n){var r=t(137),o=t(65),i=t(105);e.exports=function(t,e){for(var n=i(t)?t:r.pathValue(t,e),s=0,u=n.path,a=u.length;++s<a;)if("object"==typeof u[s])return new o(function(t){t.onError(new Error("Paths must be simple paths"))});var c=this;return new o(function(t){return c.set(n).subscribe(function(e){for(var n=e.json,r=-1,o=u.length;n&&++r<o;)n=n[u[r]];t.onNext(n)},function(e){t.onError(e)},function(){t.onCompleted()})})}},{105:105,137:137,65:65}],84:[function(t,e,n){var r=t(141),o=t(105),i=t(82);e.exports=function(t,e,n,s){var u=r.fromPath(t),a=e,c=n,h=s;if(o(u)?(h=c,c=a,a=u):a={path:u,value:a},o(a)===!1)throw new Error("Model#setValueSync must be called with an Array path.");return"function"!=typeof c&&(c=this._root._errorSelector),"function"!=typeof h&&(h=this._root._comparator),this._syncCheck("setValueSync")?(i(this,[a]),this._getValueSync(this,a.path).value):void 0}},{105:105,141:141,82:82}],85:[function(t,e,n){e.exports=function(t){if(!t)return t;for(var e=-1,n=t.length,r=[];++e<n;)r[e]=t[e];return r}},{}],86:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=-1,o=t.length,i=[];++r<o;)for(var s=e(t[r],r,t),u=-1,a=s.length;++u<a;)i[++n]=s[u];return i}},{}],87:[function(t,e,n){e.exports=function(t,e){for(var n=-1,r=t.length,o=new Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},{}],88:[function(t,e,n){e.exports=function(t,e,n){var r=e||0,o=-1,i=t.length-r;0>i&&(i=0),n>0&&i>n&&(i=n);for(var s=new Array(i);++o<i;)s[o]=t[o+r];return s}},{}],89:[function(t,e,n){var r=t(44),o=t(95),i=Array.isArray,s=t(104);e.exports=function(t){var e=t;if(s(e)){e=i(t)?[]:{};var n=t;for(var u in n)u[0]!==r&&o(n,u)&&(e[u]=n[u])}return e}},{104:104,44:44,95:95}],90:[function(t,e,n){var r=t(55),o=t(39);e.exports=function(t,e,n){return t[o]||(t[o]=!0,e.push(t),r(n,t)),t}},{39:39,55:55}],91:[function(t,e,n){var r=t(104);e.exports=function(t){return r(t)&&t.$expires||void 0}},{104:104}],92:[function(t,e,n){var r=t(104);e.exports=function(t){return r(t)&&t.$size||0}},{104:104}],93:[function(t,e,n){var r=t(104);e.exports=function(t){return r(t)&&t.$timestamp||void 0}},{104:104}],94:[function(t,e,n){var r=t(104);e.exports=function(t,e){var n=r(t)&&t.$type||void 0;return e&&n?"branch":n}},{104:104}],95:[function(t,e,n){var r=t(104),o=Object.prototype.hasOwnProperty;e.exports=function(t,e){return r(t)&&o.call(t,e)}},{104:104}],96:[function(t,e,n){var r=1;e.exports=function(){return r++}},{}],97:[function(t,e,n){var r=t(40),o=t(43),i=t(50),s=t(36);e.exports=function(t,e,n,u,a){return t[r]=n,t[o]=e,void 0!==u&&(t[i]=u),t[s]||(t[s]=a.slice(0,a.index).concat(n)),e[n]=t,t}},{36:36,40:40,43:43,50:50}],98:[function(t,e,n){var r=t(110),o=t(125),i=t(124);e.exports=function(t){var e=t.$expires;return null!=e&&e!==i&&e!==o&&e<r()}},{110:110,124:124,125:125}],99:[function(t,e,n){var r=t(110),o=t(125),i=t(124);e.exports=function(t){var e=t.$expires;return null!=e&&e!==i&&(e===o||e<r())}},{110:110,124:124,125:125}],100:[function(t,e,n){var r="function";e.exports=function(t){return Boolean(t)&&typeof t===r}},{}],101:[function(t,e,n){var r=t(43),o=t(40),i=t(50),s=t(45),u=t(42),a=t(36);e.exports=function(t){return t===r||t===o||t===i||t===s||t===u||"$size"===t||t===a}},{36:36,40:40,42:42,43:43,45:45,50:50}],102:[function(t,e,n){var r=t(104);e.exports=function(t){return r(t)&&"json"in t}},{104:104}],103:[function(t,e,n){var r=Array.isArray,o=t(104);e.exports=function(t){return o(t)&&r(t.paths)&&(o(t.jsonGraph)||o(t.jsong)||o(t.json)||o(t.values)||o(t.value))}},{104:104}],104:[function(t,e,n){var r="object";e.exports=function(t){return null!==t&&typeof t===r}},{}],105:[function(t,e,n){var r=Array.isArray,o=t(104);e.exports=function(t){return o(t)&&(r(t.path)||"string"==typeof t.path)}},{104:104}],106:[function(t,e,n){var r="object";e.exports=function(t){return null==t||typeof t!==r}},{}],107:[function(t,e,n){var r=t(43),o=t(123),i=t(122),s=t(92),u=t(93),a=t(104),c=t(99),h=t(100),f=t(54),l=t(120),p=t(97),d=t(90),v=t(113),y=t(118);e.exports=function(t,e,n,b,m,g,w,x,E,_,S){var C,k,N,A,O,D,j;if(e===n){if(null===n)return e=l(n,void 0,n),t=y(t,-e.$size,E,w),e=p(e,t,b,void 0,g),f(E,e),e;if(void 0===n)return n;if(A=a(e),A&&(k=e.$type,null==k))return null==e[r]&&p(e,t,b,w,g),e}else A=a(e),A&&(k=e.$type);if(k!==o){if(O=a(n),O&&(N=n.$type),A&&!k&&(null==n||O&&!N))return e}else{if(null==n)return c(e)?void d(e,x,E):e;if(O=a(n),O&&(N=n.$type,N===o))if(e===n){if(null!=e[r])return e}else if(D=e.$timestamp,j=n.$timestamp,!c(e)&&!c(n)&&D>j)return void 0}if(k&&O&&!N)return p(v(e,n,t,b,E),t,b,void 0,g);if(N||!O){if(N&&e===n)null==e[r]&&(e=l(e,k,e.value),t=y(t,-e.$size,E,w),e=p(e,t,b,w,g));else{var P=!0;(k||!A)&&(P=u(n)<u(e)==!1,(k||N)&&h(_)&&(P=!_(e,n,g.slice(0,g.index)))),P&&(n=l(n,N,N?n.value:n),N===i&&h(S)&&(n=S(m.slice(0,m.index),n)),C=s(e)-s(n),e=v(e,n,t,b,E),t=y(t,C,E,w),e=p(e,t,b,w,g))}c(e)?d(e,x,E):f(E,e)}else null==e&&(e=p(n,t,b,void 0,g));return e}},{100:100,104:104,113:113,118:118,120:120,122:122,123:123,43:43,54:54,90:90,92:92,93:93,97:97,99:99}],108:[function(t,e,n){var r=t(123),o=t(122),i=t(94),s=t(92),u=t(93),a=t(99),c=t(106),h=t(100),f=t(120),l=t(90),p=t(97),d=t(113),v=t(118),y=t(117);e.exports=function(t,e,n,b,m,g,w,x,E,_,S,C,k){var N=i(e,g);if(m||g)N&&a(e)&&(N="expired",l(e,_,S)),(N&&N!==r||c(e))&&(e=d(e,{},t,n,S),e=p(e,t,n,E,x),e=y(e,E));else{var A=b,O=i(A),D=u(A)<u(e)==!1;if((N||O)&&h(C)&&(D=!C(e,A,x.slice(0,x.index))),D){A=f(A,O,O?A.value:A),O===o&&h(k)&&(A=k(w.slice(0,w.index),A));var j=s(e)-s(A);e=d(e,A,t,n,S),t=v(t,j,S,E),e=p(e,t,n,E,x)}}return e}},{100:100,106:106,113:113,117:117,118:118,120:120,122:122,123:123,90:90,92:92,93:93,94:94,97:97,99:99}],109:[function(t,e,n){e.exports=function(){}},{}],110:[function(t,e,n){e.exports=Date.now},{}],111:[function(t,e,n){var r=t(123),o=t(43),i=t(55),s=t(104),u=t(115),a=t(116);e.exports=function(t,e,n,c){if(s(t)){var h=t.$type;return Boolean(h)&&(h===r&&a(t),i(c,t)),u(t),e[n]=t[o]=void 0,!0}return!1}},{104:104,115:115,116:116,123:123,43:43,55:55}],112:[function(t,e,n){var r=t(95),o=t(44),i=t(111);e.exports=function s(t,e,n,u){if(i(t,e,n,u)){if(null==t.$type)for(var a in t)a[0]!==o&&"$"!==a[0]&&r(t,a)&&s(t[a],t,a,u);return!0}return!1}},{111:111,44:44,95:95}],113:[function(t,e,n){var r=t(104),o=t(114),i=t(112);e.exports=function(t,e,n,s,u){return t===e?t:(r(t)&&(o(t,e),i(t,n,s,u)),n[s]=e,e)}},{104:104,112:112,114:114}],114:[function(t,e,n){var r=t(47),o=t(37),i=t(48);e.exports=function(t,e){for(var n=t[i]||0,s=e[i]||0,u=-1;++u<n;){var a=t[r+u];void 0!==a&&(a[o]=e,e[r+(s+u)]=a,t[r+u]=void 0)}return e[i]=n+s,t[i]=void 0,e}},{37:37,47:47,48:48}],115:[function(t,e,n){var r=t(47),o=t(37),i=t(46),s=t(48);e.exports=function(t){for(var e=-1,n=t[s]||0;++e<n;){var u=t[r+e];null!=u&&(u[o]=u[i]=t[r+e]=void 0)}return t[s]=void 0,t}},{37:37,46:46,47:47,48:48}],116:[function(t,e,n){var r=t(47),o=t(37),i=t(46),s=t(48);e.exports=function(t){var e=t[o];if(e){for(var n=(t[i]||0)-1,u=(e[s]||0)-1;++n<=u;)e[r+n]=e[r+(n+1)];e[s]=u,t[i]=t[o]=e=void 0}return t}},{37:37,46:46,47:47,48:48}],117:[function(t,e,n){var r=t(47),o=t(43),i=t(50),s=t(48);e.exports=function(t,e){var n=[t],u=0;do{var a=n[u--];if(a&&a[i]!==e){a[i]=e,n[u++]=a[o];for(var c=-1,h=a[s]||0;++c<h;)n[u++]=a[r+c]}}while(u>-1);return t}},{43:43,47:47,48:48,50:50}],118:[function(t,e,n){var r=t(40),o=t(50),i=t(43),s=t(111),u=t(117);e.exports=function(t,e,n,a){var c=t;do{var h=c[i],f=c.$size=(c.$size||0)-e;0>=f&&null!=h?s(c,h,c[r],n):c[o]!==a&&u(c,a),c=h}while(c);return t}},{111:111,117:117,40:40,43:43,50:50}],119:[function(t,e,n){var r=Array.isArray,o=t(105),i=t(103),s=t(102),u=t(141);e.exports=function(t,e,n){for(var a=0,c=t.length;c>a;++a){var h=t[a],f=!1;if(r(h)&&e.path?f=!0:"string"==typeof h&&e.pathSyntax?f=!0:o(h)&&e.pathValue?(h.path=u.fromPath(h.path),f=!0):i(h)&&e.jsonGraph?f=!0:s(h)&&e.json?f=!0:"function"==typeof h&&a+1===c&&e.selector&&(f=!0),!f)return new Error("Unrecognized argument "+typeof h+" ["+String(h)+"] to Model#"+n)}return!0}},{102:102,103:103,105:105,141:141}],120:[function(t,e,n){var r=t(137),o=r.atom,i=t(110),s=t(125),u=t(41),a=50,c=t(89),h=Array.isArray,f=t(92),l=t(91);e.exports=function(t,e,n){var r=0,p=t,d=e;if(d?(p=c(p),r=f(p),p.$type=d):(p=o(n),d=p.$type,p[u]=!0),null==n)r=a+1;else if(null==r||0>=r)switch(typeof n){case"object":r=h(n)?a+n.length:a+1;break;case"string":r=a+n.length;break;default:r=a+1}var v=l(p);return"number"==typeof v&&s>v&&(p.$expires=i()+-1*v),p.$size=r,p}},{110:110,125:125,137:137,41:41,89:89,91:91,92:92}],121:[function(t,e,n){e.exports="atom"},{}],122:[function(t,e,n){e.exports="error"},{}],123:[function(t,e,n){e.exports="ref"},{}],124:[function(t,e,n){e.exports=1},{}],125:[function(t,e,n){e.exports=0},{}],126:[function(t,e,n){"use strict";function r(){if(a.length)throw a.shift()}function o(t){var e;e=u.length?u.pop():new i,e.task=t,s(e)}function i(){this.task=null}var s=t(127),u=[],a=[],c=s.makeRequestCallFromTimer(r);e.exports=o,i.prototype.call=function(){try{this.task.call()}catch(t){o.onerror?o.onerror(t):(a.push(t),c())}finally{this.task=null,u[u.length]=this}}},{127:127}],127:[function(t,e,n){(function(t){"use strict";function n(t){u.length||(s(),a=!0),u[u.length]=t}function r(){for(;c<u.length;){var t=c;if(c+=1,u[t].call(),c>h){for(var e=0,n=u.length-c;n>e;e++)u[e]=u[e+c];u.length-=c,c=0}}u.length=0,c=0,a=!1}function o(t){var e=1,n=new f(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}function i(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}e.exports=n;var s,u=[],a=!1,c=0,h=1024,f=t.MutationObserver||t.WebKitMutationObserver;s="function"==typeof f?o(r):i(r),n.requestFlush=s,n.makeRequestCallFromTimer=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],128:[function(t,e,n){(function(n){"use strict";function r(t){a.length||(i(),c=!0),a[a.length]=t}function o(){for(;h<a.length;){var t=h;if(h+=1,a[t].call(),h>f){for(var e=0,n=a.length-h;n>e;e++)a[e]=a[e+h];a.length-=h,h=0}}a.length=0,h=0,c=!1}function i(){var e=n.domain;e&&(s||(s=t(129)),s.active=n.domain=null),c&&u?setImmediate(o):n.nextTick(o),e&&(s.active=n.domain=e)}var s,u="function"==typeof setImmediate;e.exports=r;var a=[],c=!1,h=0,f=1024;r.requestFlush=i}).call(this,t(131))},{129:129,131:131}],129:[function(t,e,n){e.exports=function(){var e=t(130),n={};return n.createDomain=n.create=function(){function t(t){n.emit("error",t)}var n=new e.EventEmitter;return n.add=function(e){e.on("error",t)},n.remove=function(e){e.removeListener("error",t)},n.bind=function(e){return function(){var n=Array.prototype.slice.call(arguments);try{e.apply(null,n)}catch(r){t(r)}}},n.intercept=function(e){return function(n){if(n)t(n);else{var r=Array.prototype.slice.call(arguments,1);try{e.apply(null,r)}catch(n){t(n)}}}},n.run=function(e){try{e()}catch(n){t(n)}return this},n.dispose=function(){return this.removeAllListeners(),this},n.enter=n.exit=function(){return this},n},n}.call(this)},{130:130}],130:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function i(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,i,a,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],u(n))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),a=1;r>a;a++)i[a-1]=arguments[a];n.apply(this,i)}else if(s(n)){for(r=arguments.length,i=new Array(r-1),a=1;r>a;a++)i[a-1]=arguments[a];for(c=n.slice(),r=c.length,a=0;r>a;a++)c[a].apply(this,i)}return!0},r.prototype.addListener=function(t,e){var n;if(!o(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var n;n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!o(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,i,u;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],i=n.length,r=-1,n===e||o(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(u=i;u-->0;)if(n[u]===e||n[u].listener&&n[u].listener===e){r=u;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],o(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?o(t._events[e])?1:t._events[e].length:0}},{}],131:[function(t,e,n){function r(){h=!1,u.length?c=u.concat(c):f=-1,c.length&&o()}function o(){if(!h){var t=setTimeout(r);h=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,h=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function s(){}var u,a=e.exports={},c=[],h=!1,f=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new i(t,e)),1!==c.length||h||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=s,a.addListener=s,a.once=s,a.off=s,a.removeListener=s,a.removeAllListeners=s,a.emit=s,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],132:[function(t,e,n){"use strict";function r(t,e){var n;for(n in e)t[n]=e[n];return t}function o(t,e){if(this._jsongUrl=t,"number"==typeof e){var n={timeout:e};e=n}this._config=r({timeout:15e3,headers:{}},e||{})}var i=t(136),s=t(133);Array.isArray;o.prototype={constructor:o,buildQueryObject:s,get:function(t){var e="GET",n=this.buildQueryObject(this._jsongUrl,e,{paths:t,method:"get"}),o=r(n,this._config),s=this;return i(e,o,s)},set:function(t){var e="POST",n=this.buildQueryObject(this._jsongUrl,e,{jsonGraph:t,method:"set"}),o=r(n,this._config);o.headers["Content-Type"]="application/x-www-form-urlencoded";var s=this;return i(e,o,s)},call:function(t,e,n,o){e=e||[],n=n||[],o=o||[];var s="POST",u=[];u.push("method=call"),u.push("callPath="+encodeURIComponent(JSON.stringify(t))),u.push("arguments="+encodeURIComponent(JSON.stringify(e))),u.push("pathSuffixes="+encodeURIComponent(JSON.stringify(n))),u.push("paths="+encodeURIComponent(JSON.stringify(o)));var a=this.buildQueryObject(this._jsongUrl,s,u.join("&")),c=r(a,this._config);c.headers["Content-Type"]="application/x-www-form-urlencoded";var h=this;return i(s,c,h)}},o.XMLHttpSource=o,o["default"]=o,e.exports=o},{133:133,136:136}],133:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,o=[],i={url:t},s=-1!==t.indexOf("?"),u=s?"&":"?";return"string"==typeof n?o.push(n):(r=Object.keys(n),r.forEach(function(t){var e="object"==typeof n[t]?JSON.stringify(n[t]):n[t];o.push(t+"="+e)})),"GET"===e?i.url+=u+o.join("&"):i.data=o.join("&"),i}},{}],134:[function(t,e,n){(function(t){"use strict";e.exports=function(){var e=new t.XMLHttpRequest;if("withCredentials"in e)return e;if(t.XDomainRequest)return new XDomainRequest;throw new Error("CORS is not supported by your browser")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],135:[function(t,e,n){(function(t){"use strict";e.exports=function(){var e,n,r;if(t.XMLHttpRequest)return new t.XMLHttpRequest;try{for(n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;3>r;r++)try{if(e=n[r],new t.ActiveXObject(e))break}catch(o){}return new t.ActiveXObject(e)}catch(o){throw new Error("XMLHttpRequest is not supported by your browser")}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],136:[function(t,e,n){"use strict";function r(){}function o(t,e,n){return r.create(function(r){var o,i,f,l,p,d={method:t||"GET",crossDomain:!1,async:!0,headers:{},responseType:"json"};for(p in e)h.call(e,p)&&(d[p]=e[p]);d.crossDomain||d.headers["X-Requested-With"]||(d.headers["X-Requested-With"]="XMLHttpRequest"),null!=n.onBeforeRequest&&n.onBeforeRequest(d);try{o=d.crossDomain?c():a()}catch(v){r.onError(v)}try{d.user?o.open(d.method,d.url,d.async,d.user,d.password):o.open(d.method,d.url,d.async),o.timeout=d.timeout,o.withCredentials=d.withCredentials!==!1,f=d.headers;for(l in f)h.call(f,l)&&o.setRequestHeader(l,f[l]);if(d.responseType)try{o.responseType=d.responseType}catch(y){if("json"!==d.responseType)throw y}o.onreadystatechange=function(t){4===o.readyState&&(i||(i=!0,s(r,o,t)))},o.ontimeout=function(t){i||(i=!0,u(r,o,"timeout error",t))},o.send(d.data)}catch(y){r.onError(y)}return function(){i||4===o.readyState||(i=!0,o.abort())}})}function i(t,e,n){n||(n=new Error(e)),t.onError(n)}function s(t,e,n){var r,o;if(e&&t){o=e.responseType,r="response"in e?e.response:e.responseText;var s=1223===e.status?204:e.status;if(s>=200&&399>=s){try{"json"!==o&&(r=JSON.parse(r||"")),"string"==typeof r&&(r=JSON.parse(r||""))}catch(n){i(t,"invalid json",n)}return t.onNext(r),void t.onCompleted()}return 401===s||403===s||407===s?i(t,r):410===s?i(t,r):408===s||504===s?i(t,r):i(t,r||"Response code "+s)}}function u(t,e,n,r){i(t,n||e.statusText||"request error",r)}var a=t(135),c=t(134),h=Object.prototype.hasOwnProperty,f=function(){};r.create=function(t){var e=new r;return e.subscribe=function(e,n,r){var o,i;return o="function"==typeof e?{onNext:e,onError:n||f,onCompleted:r||f}:e,i=t(o),"function"==typeof i?{dispose:i}:i},e},e.exports=o},{134:134,135:135}],137:[function(t,e,n){function r(t,e,n){var r=Object.create(null);if(null!=n){for(var o in n)r[o]=n[o];return r.$type=t,r.value=e,r}return{$type:t,value:e}}var o=t(141);e.exports={ref:function(t,e){return r("ref",o.fromPath(t),e)},atom:function(t,e){return r("atom",t,e)},undefined:function(){return r("atom")},error:function(t,e){return r("error",t,e)},pathValue:function(t,e){return{path:o.fromPath(t),value:e}},pathInvalidation:function(t){return{path:o.fromPath(t),invalidated:!0}}}},{141:141}],138:[function(t,e,n){e.exports={integers:"integers",ranges:"ranges",keys:"keys"}},{}],139:[function(t,e,n){var r={token:"token",dotSeparator:".",commaSeparator:",",openingBracket:"[",closingBracket:"]",openingBrace:"{",closingBrace:"}",escape:"\\",space:" ",colon:":",quote:"quote",unknown:"unknown"};e.exports=r},{}],140:[function(t,e,n){e.exports={indexer:{nested:"Indexers cannot be nested.",needQuotes:"unquoted indexers must be numeric.",empty:"cannot have empty indexers.",leadingDot:"Indexers cannot have leading dots.",leadingComma:"Indexers cannot have leading comma.",requiresComma:"Indexers require commas between indexer args.",routedTokens:"Only one token can be used per indexer when specifying routed tokens."},range:{precedingNaN:"ranges must be preceded by numbers.",suceedingNaN:"ranges must be suceeded by numbers."},routed:{invalid:"Invalid routed token.  only integers|ranges|keys are supported."},quote:{empty:"cannot have empty quoted keys.",illegalEscape:"Invalid escape character.  Only quotes are escapable."},unexpectedToken:"Unexpected token.",invalidIdentifier:"Invalid Identifier.",invalidPath:"Please provide a valid path.",throwError:function(t,e,n){if(n)throw t+" -- "+e.parseString+" with next token: "+n;throw t+" -- "+e.parseString}}},{}],141:[function(t,e,n){var r=t(147),o=t(142),i=t(138),s=function(t,e){return o(new r(t,e))};e.exports=s,s.fromPathsOrPathValues=function(t,e){if(!t)return[];for(var n=[],r=0,o=t.length;o>r;r++)"string"==typeof t[r]?n[r]=s(t[r],e):"string"==typeof t[r].path?n[r]={path:s(t[r].path,e),value:t[r].value}:n[r]=t[r];return n},s.fromPath=function(t,e){return t?"string"==typeof t?s(t,e):t:[]},s.RoutedTokens=i},{138:138,142:142,147:147}],142:[function(t,e,n){var r=t(139),o=t(140),i=t(143);e.exports=function(t){for(var e=t.next(),n={},s=[];!e.done;){switch(e.type){case r.token:var u=+e.token[0];isNaN(u)||o.throwError(o.invalidIdentifier,t),s[s.length]=e.token;break;case r.dotSeparator:0===s.length&&o.throwError(o.unexpectedToken,t);break;case r.space:break;case r.openingBracket:i(t,e,n,s);break;default:o.throwError(o.unexpectedToken,t)}e=t.next()}return 0===s.length&&o.throwError(o.invalidPath,t),s}},{139:139,140:140,143:143}],143:[function(t,e,n){var r=t(139),o=t(140),i=o.indexer,s=t(145),u=t(144),a=t(146);e.exports=function(t,e,n,c){var h=t.next(),f=!1,l=1,p=!1;for(n.indexer=[];!h.done;){switch(h.type){case r.token:case r.quote:n.indexer.length===l&&o.throwError(i.requiresComma,t)}switch(h.type){case r.openingBrace:p=!0,a(t,h,n,c);break;case r.token:var d=+h.token;isNaN(d)&&o.throwError(i.needQuotes,t),n.indexer[n.indexer.length]=d;
break;case r.dotSeparator:n.indexer.length||o.throwError(i.leadingDot,t),s(t,h,n,c);break;case r.space:break;case r.closingBracket:f=!0;break;case r.quote:u(t,h,n,c);break;case r.openingBracket:o.throwError(i.nested,t);break;case r.commaSeparator:++l;break;default:o.throwError(o.unexpectedToken,t)}if(f)break;h=t.next()}0===n.indexer.length&&o.throwError(i.empty,t),n.indexer.length>1&&p&&o.throwError(i.routedTokens,t),1===n.indexer.length&&(n.indexer=n.indexer[0]),c[c.length]=n.indexer,n.indexer=void 0}},{139:139,140:140,144:144,145:145,146:146}],144:[function(t,e,n){var r=t(139),o=t(140),i=o.quote;e.exports=function(t,e,n,s){for(var u=t.next(),a="",c=e.token,h=!1,f=!1;!u.done;){switch(u.type){case r.token:case r.space:case r.dotSeparator:case r.commaSeparator:case r.openingBracket:case r.closingBracket:case r.openingBrace:case r.closingBrace:h&&o.throwError(i.illegalEscape,t),a+=u.token;break;case r.quote:h?(a+=u.token,h=!1):u.token!==c?a+=u.token:f=!0;break;case r.escape:h=!0;break;default:o.throwError(o.unexpectedToken,t)}if(f)break;u=t.next()}0===a.length&&o.throwError(i.empty,t),n.indexer[n.indexer.length]=a}},{139:139,140:140}],145:[function(t,e,n){var r=t(147),o=t(139),i=t(140);e.exports=function(t,e,n,s){var u,a=t.peek(),c=1,h=!1,f=!0,l=n.indexer.length-1,p=r.toNumber(n.indexer[l]);for(isNaN(p)&&i.throwError(i.range.precedingNaN,t);!h&&!a.done;){switch(a.type){case o.dotSeparator:3===c&&i.throwError(i.unexpectedToken,t),++c,3===c&&(f=!1);break;case o.token:u=r.toNumber(t.next().token),isNaN(u)&&i.throwError(i.range.suceedingNaN,t),h=!0;break;default:h=!0}if(h)break;t.next(),a=t.peek()}n.indexer[l]={from:p,to:f?u:u-1}}},{139:139,140:140,147:147}],146:[function(t,e,n){var r=t(139),o=t(138),i=t(140),s=i.routed;e.exports=function(t,e,n,u){var a=t.next(),c=!1,h="";switch(a.token){case o.integers:case o.ranges:case o.keys:break;default:i.throwError(s.invalid,t)}var f=t.next();if(f.type===r.colon&&(c=!0,f=t.next(),f.type!==r.token&&i.throwError(s.invalid,t),h=f.token,f=t.next()),f.type===r.closingBrace){var l={type:a.token,named:c,name:h};n.indexer[n.indexer.length]=l}else i.throwError(s.invalid,t)}},{138:138,139:139,140:140}],147:[function(t,e,n){function r(t,e,n){return{token:t,done:n,type:e}}function o(t,e,n){var o,g=!1,w="",x=n?m:b;do{if(o=e+1>=t.length)break;var E=t[e+1];if(void 0===E||-1!==x.indexOf(E)){if(w.length)break;++e;var _;switch(E){case s:_=i.dotSeparator;break;case u:_=i.commaSeparator;break;case a:_=i.openingBracket;break;case c:_=i.closingBracket;break;case h:_=i.openingBrace;break;case f:_=i.closingBrace;break;case y:_=i.space;break;case d:case v:_=i.quote;break;case p:_=i.escape;break;case l:_=i.colon;break;default:_=i.unknown}g=r(E,_,!1);break}w+=E,++e}while(!o);return!g&&w.length&&(g=r(w,i.token,!1)),g||(g={done:!0}),{token:g,idx:e}}var i=t(139),s=".",u=",",a="[",c="]",h="{",f="}",l=":",p="\\",d='"',v="'",y=" ",b="\\'\"[]., ",m="\\{}'\"[]., :",g=e.exports=function(t,e){this._string=t,this._idx=-1,this._extended=e,this.parseString=""};g.prototype={next:function(){var t=this._nextToken?this._nextToken:o(this._string,this._idx,this._extended);return this._idx=t.idx,this._nextToken=!1,this.parseString+=t.token.token,t.token},peek:function(){var t=this._nextToken?this._nextToken:o(this._string,this._idx,this._extended);return this._nextToken=t,t.token}},g.toNumber=function(t){return isNaN(+t)?NaN:+t}},{139:139}],148:[function(t,e,n){var r=t(154),o=t(155);e.exports=function(t){var e=t.reduce(function(t,e){var n=e.length;return t[n]||(t[n]=[]),t[n].push(e),t},{});return Object.keys(e).forEach(function(t){e[t]=o(e[t])}),r(e)}},{154:154,155:155}],149:[function(t,e,n){var r=t(151);e.exports=function o(t,e,n){for(var i=t,s=!0;s&&n<e.length;++n){var u=e[n],a=typeof u;if(u&&"object"===a){var c={},h=r(u,c),f=n+1;do{var l=i[h];s=void 0!==l,s&&(s=o(l,e,f)),h=r(u,c)}while(s&&!c.done);break}i=i[u],s=void 0!==i}return s}},{151:151}],150:[function(t,e,n){e.exports={iterateKeySet:t(151),toTree:t(155),toTreeWithUnion:t(156),pathsComplementFromTree:t(153),pathsComplementFromLengthTree:t(152),hasIntersection:t(149),toPaths:t(154),collapse:t(148)}},{148:148,149:149,151:151,152:152,153:153,154:154,155:155,156:156}],151:[function(t,e,n){function r(t,e){var n=e.from=t.from||0,r=e.to=t.to||"number"==typeof t.length&&e.from+t.length-1||0;e.rangeOffset=e.from,e.loaded=!0,n>r&&(e.empty=!0)}function o(t,e){e.done=!1;var n=e.isObject=!(!t||"object"!=typeof t);e.isArray=n&&i(t),e.arrayOffset=0}var i=Array.isArray;e.exports=function(t,e){if(void 0===e.isArray&&o(t,e),e.isArray){var n;do{e.loaded&&e.rangeOffset>e.to&&(++e.arrayOffset,e.loaded=!1);var i=e.arrayOffset,s=t.length;if(i>=s){e.done=!0;break}var u=t[e.arrayOffset],a=typeof u;if("object"===a){if(e.loaded||r(u,e),e.empty)continue;n=e.rangeOffset++}else++e.arrayOffset,n=u}while(void 0===n);return n}return e.isObject?(e.loaded||r(t,e),e.rangeOffset>e.to?void(e.done=!0):e.rangeOffset++):(e.done=!0,t)}},{}],152:[function(t,e,n){var r=t(149);e.exports=function(t,e){for(var n=[],o=-1,i=0,s=t.length;s>i;++i){var u=t[i];r(e[u.length],u,0)||(n[++o]=u)}return n}},{149:149}],153:[function(t,e,n){var r=t(149);e.exports=function(t,e){for(var n=[],o=-1,i=0,s=t.length;s>i;++i)r(e,t[i],0)||(n[++o]=t[i]);return n}},{149:149}],154:[function(t,e,n){function r(t){return null!==t&&typeof t===l}function o(t,e,n){var r,i,s,u,f,l,p,d,v,y,b,m,g,w,x=c(String(e)),E=Object.create(null),_=[],S=-1,C=0,k=[],N=0;if(u=[],f=-1,n-1>e){for(l=a(t,u);++f<l;)r=u[f],i=o(t[r],e+1,n),s=i.code,E[s]?i=E[s]:(_[C++]=s,i=E[s]={keys:[],sets:i.sets}),x=c(x+r+s),h(r)&&i.keys.push(parseInt(r,10))||i.keys.push(r);for(;++S<C;)if(r=_[S],i=E[r],u=i.keys,l=u.length,l>0)for(p=i.sets,d=-1,v=p.length,g=u[0];++d<v;){for(y=p[d],b=-1,m=y.length,w=new Array(m+1),w[0]=l>1&&u||g;++b<m;)w[b+1]=y[b];k[N++]=w}}else for(l=a(t,u),l>1?k[N++]=[u]:k[N++]=u;++f<l;)x=c(x+u[f]);return{code:x,sets:k}}function i(t){for(var e=-1,n=t.length;++e<n;){var r=t[e];f(r)&&(t[e]=s(r))}return t}function s(t){for(var e=-1,n=t.length-1,r=n>0;++e<=n;){var o=t[e];if(!h(o)){r=!1;break}t[e]=parseInt(o,10)}if(r===!0){t.sort(u);var i=t[0],s=t[n];if(n>=s-i)return{from:i,to:s}}return t}function u(t,e){return t-e}function a(t,e,n){var r=0;for(var o in t)e[r++]=o;return r>1&&e.sort(n),r}function c(t){for(var e=5381,n=-1,r=t.length;++n<r;)e=(e<<5)+e+t.charCodeAt(n);return String(e)}function h(t){return!f(t)&&t-parseFloat(t)+1>=0}var f=Array.isArray,l="object";e.exports=function(t){var e,n=[],s=0;for(var u in t)if(h(u)&&r(e=t[u]))for(var a=o(e,0,parseInt(u,10)).sets,c=-1,f=a.length;++c<f;)n[s++]=i(a[c]);return n}},{}],155:[function(t,e,n){function r(t,e,n){var i,s=e[n],u={},a=n+1;i=o(s,u);do{var c=t[i];c||(a===e.length?t[i]=null:c=t[i]={}),a<e.length&&r(c,e,a),u.done||(i=o(s,u))}while(!u.done)}var o=t(151);Array.isArray;e.exports=function(t){return t.reduce(function(t,e){return r(t,e,0),t},{})}},{151:151}],156:[function(t,e,n){},{}],157:[function(t,e,n){arguments[4][138][0].apply(n,arguments)},{138:138}],158:[function(t,e,n){arguments[4][139][0].apply(n,arguments)},{139:139}],159:[function(t,e,n){arguments[4][140][0].apply(n,arguments)},{140:140}],160:[function(t,e,n){var r=t(166),o=t(161),s=t(157),u=function(t,e){return o(new r(t,e))};e.exports=u,u.fromPathsOrPathValues=function(t,e){if(!t)return[];var n=[];for(i=0,len=t.length;i<len;i++)"string"==typeof t[i]?n[i]=u(t[i],e):"string"==typeof t[i].path?n[i]={path:u(t[i].path,e),value:t[i].value}:n[i]=t[i];return n},u.fromPath=function(t,e){return t?"string"==typeof t?u(t,e):t:[]},u.RoutedTokens=s},{157:157,161:161,166:166}],161:[function(t,e,n){arguments[4][142][0].apply(n,arguments)},{142:142,158:158,159:159,162:162}],162:[function(t,e,n){arguments[4][143][0].apply(n,arguments)},{143:143,158:158,159:159,163:163,164:164,165:165}],163:[function(t,e,n){arguments[4][144][0].apply(n,arguments)},{144:144,158:158,159:159}],164:[function(t,e,n){arguments[4][145][0].apply(n,arguments)},{145:145,158:158,159:159,166:166}],165:[function(t,e,n){arguments[4][146][0].apply(n,arguments)},{146:146,157:157,158:158,159:159}],166:[function(t,e,n){function r(t,e,n){return{token:t,done:n,type:e}}function o(t,e,n){var o=!1,g="",w=n?m:b;do{if(done=e+1>=t.length,done)break;var x=t[e+1];if(void 0===x||-1!==w.indexOf(x)){if(g.length)break;++e;var E;switch(x){case s:E=i.dotSeparator;break;case u:E=i.commaSeparator;break;case a:E=i.openingBracket;break;case c:E=i.closingBracket;break;case h:E=i.openingBrace;break;case f:E=i.closingBrace;break;case y:E=i.space;break;case d:case v:E=i.quote;break;case p:E=i.escape;break;case l:E=i.colon;break;default:E=i.unknown}o=r(x,E,!1);break}g+=x,++e}while(!done);return!o&&g.length&&(o=r(g,i.token,!1)),o||(o={done:!0}),{token:o,idx:e}}var i=t(158),s=".",u=",",a="[",c="]",h="{",f="}",l=":",p="\\",d='"',v="'",y=" ",b="\\'\"[]., ",m="\\{}'\"[]., :",g=e.exports=function(t,e){this._string=t,this._idx=-1,this._extended=e,this.parseString=""};g.prototype={next:function(){var t=this._nextToken?this._nextToken:o(this._string,this._idx,this._extended);return this._idx=t.idx,this._nextToken=!1,this.parseString+=t.token.token,t.token},peek:function(){var t=this._nextToken?this._nextToken:o(this._string,this._idx,this._extended);return this._nextToken=t,t.token}},g.toNumber=function(t){return isNaN(+t)?NaN:+t}},{158:158}],167:[function(t,e,n){arguments[4][148][0].apply(n,arguments)},{148:148,170:170,171:171}],168:[function(t,e,n){e.exports={iterateKeySet:t(169),toTree:t(171),toTreeWithUnion:t(172),toPaths:t(170),collapse:t(167)}},{167:167,169:169,170:170,171:171,172:172}],169:[function(t,e,n){arguments[4][151][0].apply(n,arguments)},{151:151}],170:[function(t,e,n){arguments[4][154][0].apply(n,arguments)},{154:154}],171:[function(t,e,n){arguments[4][155][0].apply(n,arguments)},{155:155,169:169}],172:[function(t,e,n){arguments[4][156][0].apply(n,arguments)},{156:156}],173:[function(t,e,n){var r=e.exports=function(t){this.typeValue=t};r.prototype=new Error},{}],174:[function(t,e,n){var r=t(221),o={ranges:r+"ranges",integers:r+"integers",keys:r+"keys",named:r+"named",name:r+"name",match:r+"match"};e.exports=o},{221:221}],175:[function(t,e,n){var r={specific:4,ranges:2,integers:2,keys:1};e.exports=r},{}],176:[function(t,e,n){function r(t,e,n,r,o,i){return c(t,e,n,r,o,i)}function o(t,e,n,r){var o=n.jsonGraph,i=r||{$type:v};return h(o,e,t.maxRefFollow).forEach(function(t){f(o,{path:t,value:i})}),{jsonGraph:o}}var i=t(174),s=t(202),u=t(186),a=t(193),c=t(210),h=t(180),f=t(181),l=t(206),p=t(211),d=t(203),v=t(225).$atom,y="get",b="set",m="call",g=t(168),w=g.collapse,x=t(173),E=50,_=function(t,e){var n=e||{};this._routes=t,this._rst=s(t),this._matcher=u(this._rst),this._debug=n.debug,this.maxRefFollow=n.maxRefFollow||E};_.createClass=function(t){function e(t){var e=t||{};this._debug=e.debug}return e.prototype=new _(t),e.prototype.constructor=e,e},_.prototype={get:function(t){var e={},n=l(this,e),i=this,s=a(t);return r(this._matcher,n,s,y,this,e).map(function(e){return o(i,t,e)})},set:function(t){var e={},n=p(this,t,e),i=this;return r(this._matcher,n,t.paths,b,this,e).map(function(e){return o(i,t.paths,e)})},call:function(t,e,n,i){var s={},u=d(this,t,e,n,i,s),a=[t],c=this;return r(this._matcher,u,a,m,this,s).map(function(t){var e=t.reportedPaths,n=o(c,e,t);e.length?n.paths=e:(n.paths=[],n.jsonGraph={});var r=t.invalidated;return r&&r.length&&(n.invalidated=r),n.paths=w(n.paths),n})}},_.ranges=i.ranges,_.integers=i.integers,_.keys=i.keys,_.JSONGraphError=x,e.exports=_},{168:168,173:173,174:174,180:180,181:181,186:186,193:193,202:202,203:203,206:206,210:210,211:211,225:225}],177:[function(t,e,n){var r=t(214),o=t(225).$ref,i=t(182);e.exports=function(t,e,n){for(var s,u,a,c=t,h=e,f=-1,l=h.length,p=0;++f<l;){if(s=h[f],u=c[s],a=u&&u.$type,!u||a&&a!==o){c=u;break}if(a&&a===o&&l>f+1){var d=new Error(i.innerReferences);throw d.throwToNext=!0,d}if(f+1===l&&(a===o&&(f=-1,h=u.value,l=h.length,u=t,p++),p>n))throw new Error(i.circularReference);c=u}return[c,r(h)]}},{182:182,214:214,225:225}],178:[function(t,e,n){e.exports=function(t,e){return e.reduce(function(t,e){return t[e]},t)}},{}],179:[function(t,e,n){function r(t,e,n,i,f,l,p){var d=t.cacheRoot,v=t.messageRoot,y=t.requestedPath,b=t.ignoreCount,m=typeof n,g=t.requestIdx,w=i>=b;if(w&&(g=++t.requestIdx),n.$type||"object"!==m)if(l[p]=a(n),n.$type===s){var x=t.references;x.push({path:c(y),value:n.value})}else{var E=t.values;E.push({path:c(y),value:n.type?n.value:n})}else{var _,S=f[i],C={};_=o(S,C);do{var k=e[_],N=n[_],A=f,O=i+1;if(w&&(y[g]=_),k||(k=e[_]={}),N){var D=0;N.$type===s&&i<f.length-1&&(O=0,A=h(N.value,f,i+1),e[_]=a(N),D=N.value.length,N=v,k=d),t.ignoreCount=D,r(t,k,N,O,A,e,_),t.ignoreCount=b}else i<f.length-1?r(t,k,{},O,A,e,_):e[_]={$type:u};w&&(y.length=g),_=o(S,C)}while(!C.done)}}var o=t(168).iterateKeySet,i=t(225),s=i.$ref,u=i.$atom,a=t(213),c=t(214),h=t(212);e.exports=function(t,e){var n=e.paths,o=e.jsonGraph,i=[],s=[];return n.forEach(function(e){r({cacheRoot:t,messageRoot:o,references:i,values:s,requestedPath:[],requestIdx:-1,ignoreCount:0},t,o,0,e)}),{references:i,values:s}}},{168:168,212:212,213:213,214:214,225:225}],180:[function(t,e,n){function r(t,e,n,u,h,f,l){if(void 0===t)return void(h[h.length]=s(f,n,u));if(!(null===t||t.$type&&t.$type!==a||"object"!=typeof t||t.$type===a&&u===n.length)){var p,d,v,y=n[u],b=u+1,m={};p=o(y,m);do{d=t[p];var g=f.length;if(null!==p&&(f[g]=p),d&&d.$type===a&&b<n.length){var w=c(e,d.value,l);d=w[0],v=i(w[1])}else v=f;r(d,e,n,b,h,v,l),f.length=g,m.done||(p=o(y,m))}while(!m.done)}}var o=t(168).iterateKeySet,i=t(214),s=t(212),u=t(225),a=u.$ref,c=t(177);e.exports=function(t,e,n){var o=[];return e.forEach(function(e){r(t,t,e,0,o,[],n)}),o}},{168:168,177:177,212:212,214:214,225:225}],181:[function(t,e,n){function r(t,e){var n,i,s,a,c,h,f,l=e.path,p=t;for(h=0,f=l.length-1;f>h;++h){a=l[h],a&&"object"==typeof a?(c={},i=u(a,c)):(i=a,c=!1);do n=p[i],n||(n=p[i]={}),c?(r(n,{path:l.slice(h+1),value:e.value}),c.done||(i=u(a,c))):p=n;while(c&&!c.done);if(c)return}a=l[h],c={},i=u(a,c);do s=o(e.value),p[i]=s,c.done||(i=u(a,c));while(!c.done)}var o=t(213),i=t(225),s=i.$ref,u=t(168).iterateKeySet;e.exports=function(t,e){var n=[],o=[],i=[];return void 0===e.value?i.push({path:e.path}):null!==e.value&&e.value.$type===s?n.push({path:e.path,value:e.value.value}):o.push(e),0===i.length&&r(t,e),{references:n,values:o,invalidations:i}}},{168:168,213:213,225:225}],182:[function(t,e,n){e.exports={callJSONGraphWithouPaths:"Any JSONG-Graph returned from call must have paths.",innerReferences:"References with inner references are not allowe.",unknown:"Unknown Error",routeWithSamePrecedence:"Two routes cannot have the same precedence or path.",circularReference:"There appears to be a circular reference, maximum reference following exceeded."}},{}],183:[function(t,e,n){var r=Array.isArray;e.exports=function(t,e){return function(n){var o="object"==typeof n,i=[];if(o)if(r(n)){var s=null;n.forEach(function(n){s="object"==typeof n?t(i,n,s):e(i,n,s)})}else t(i,n);else e(i,n);return i}}},{}],184:[function(t,e,n){function r(t,e){var n=t.length-1;u(e).forEach(function(e){t[++n]=e})}function o(t,e){s(e)&&(t[t.length]=e)}var i=t(183),s=t(217),u=t(194);e.exports=i(r,o)},{183:183,194:194,217:217}],185:[function(t,e,n){function r(t,e){t[t.length]=e}function o(t,e){var n=t.length-1;s(e).forEach(function(e){t[++n]=e})}var i=t(183),s=t(194);e.exports=i(o,r)},{183:183,194:194}],186:[function(t,e,n){function r(t,e,n,c,h,f,l,p,m){if(t){f=f||0,l=l||[],p=p||[],m=m||[],c=c||[];var g=e.length===f,w=n===y,x=n===b,E=n;!x&&!w||g||(E=v);var _=t[o.match];_&&w&&!_[y]&&(E=v),_&&_[E]&&(c[c.length]={id:_[E+"Id"],requested:s(l),action:_[E],authorize:_.authorize,virtual:s(p),precedence:+m.join(""),suffix:e.slice(f),isSet:g&&w,isCall:g&&x});var S,C,k,N,A=e[f],O=u(A,t);for(S=0,C=O.length;C>S;++S)k=O[S],p[f]=k,l[f]=k,m[f]=i.specific,r(t[O[S]],e,n,c,h,f+1,l,p,m),p.length=f,l.length=f,m.length=f;var D=a(A),j=A,P=D.length;d.filter(function(e){var n=e.type;return n===o.integers||n===o.ranges?t[n]&&P:t[n]}).forEach(function(i){var s=i.type,u=i.precedence;N=t[s],p[f]={type:s,named:N[o.named],name:N[o.name]},s===o.integers||s===o.ranges?l[f]=D:l[f]=j,m[f]=u,r(N,e,n,c,h,f+1,l,p,m),p.length=f,l.length=f,m.length=f})}}var o=t(174),i=t(175),s=t(214),u=t(190),a=t(189),c=t(168),h=c.collapse,f=t(220),l=[{type:o.ranges,precedence:i.ranges},{type:o.integers,precedence:i.integers}],p=[{type:o.keys,precedence:i.keys}],d=l.concat(p),v="get",y="set",b="call";e.exports=function(t){return function(e,n){var o=[],i=[];if(r(t,n,e,o,i),e===b&&0===o.length){var s=new Error("function does not exist");throw s.throwToNext=!0,s}var u=o.reduce(function(t,e){return t[e.id]||(t[e.id]=[]),t[e.id].push(e),t},{}),a=[];return Object.keys(u).forEach(function(t){var e=u[t];if(1===e.length)return a.push(e[0]);var n=h(e.map(function(t){return t.requested}));n.forEach(function(t,n){var r=e[n].virtual;t.forEach(function(t,e){f(r[e])||(r[e]=t)}),a.push(e[n])})}),{matched:a,missingPaths:i}}}},{168:168,174:174,175:175,189:189,190:190,214:214,220:220}],187:[function(t,e,n){function r(t){return String(Number(t))===String(t)}function o(t,e){return t==e}var i=t(174),s=Array.isArray,u=t(220),a=t(219);e.exports=function c(t,e){var n,h,f=u(e),l=f&&e.type===i.keys,p=!1;if(s(t))for(n=0,h=t.length;h>n&&!p;++n)p=c(t[n],e);else if(o(t,e))p=!0;else if(l)p=!0;else if(f)p=r(t)||a(t);else if(s(e))for(n=0,h=e.length;h>n&&!p;++n)p=c(t,e[n]);return p}},{174:174,219:219,220:220}],188:[function(t,e,n){var r=t(187);e.exports=function(t,e){for(var n=!0,o=0,i=e.length;i>o&&n;++o)n=r(t[o],e[o]);return n}},{187:187}],189:[function(t,e,n){var r=Array.isArray;e.exports=function(t){var e=[];return"object"==typeof t?r(t)?t.forEach(function(t){"object"==typeof t?e[e.length]=t:isNaN(+t)||(e[e.length]=+t)}):e[e.length]=t:isNaN(+t)||(e[e.length]=+t),e}},{}],190:[function(t,e,n){var r=t(168).iterateKeySet;e.exports=function(t,e){var n={},o=[],i=r(t,n);do e[i]&&(o[o.length]=i),n.done||(i=r(t,n));while(!n.done);return o}},{168:168}],191:[function(t,e,n){function r(t,e){t[t.length]=e}function o(t,e,n){return s(e)?(e=+e,n&&(e-1===n.to?n.to=e:e+1===n.from?n.from=e:n=null),n||(n={to:e,from:e},t[t.length]=n),n):n}var i=t(183),s=t(217);e.exports=i(r,o)},{183:183,217:217}],192:[function(t,e,n){e.exports=function(t){var e,n=t.from||0;return e="number"==typeof t.to?t.to:n+t.length-1,{to:e,from:n}}},{}],193:[function(t,e,n){var r=t(192);e.exports=function o(t){return t.forEach(function(e,n){Array.isArray(e)?o(e):"object"==typeof e&&(t[n]=r(t[n]))}),t}},{192:192}],194:[function(t,e,n){e.exports=function(t){for(var e=[],n=t.from,r=t.to,o=e.length;r>=n;++n,++o)e[o]=n;return e}},{}],195:[function(t,e,n){var r=Array.isArray,o=t(196),i=t(197);e.exports=function(t,e){var n,s=[],u=typeof t,a=r(t),c="object"===u;if(t===e||String(t)===String(e))n=[t];else if(c){var h;a?(h=o(e,t),n=h[0],s=h[1]):(h=i(e,t),n=h[0],s=h[1])}else n=[t];return 1===n.length&&(n=n[0]),[n,s]}},{196:196,197:197}],196:[function(t,e,n){var r=t(197),o=t(174),i=Array.isArray;e.exports=function s(t,e){var n,u=[],a=typeof t,c="object"==typeof e[0],h="number"===a,f="string"===a,l=!h&&!f,p=l&&t.type||!1,d=p===o.keys,v=i(t);if(d)n=[],u=e;else if(v){var y=e;t.forEach(function(t){var e=s(t,y);void 0!==e[0]&&(u=u.concat(e[0])),y=e[1]}),n=y}else c||l?c&&!l?n=e.reduce(function(e,n){var o=r(t,n);return void 0!==o[0]&&(u=u.concat(o[0])),e.concat(o[1])},[]):!c&&l?n=e.filter(function(t){var e=typeof t;return"number"===e?(u[u.length]=t,!1):!0}):(n=[],u=e):(u=[t],n=e.filter(function(e){return t!==e}));return[u,n]}},{174:174,197:197}],197:[function(t,e,n){var r=Array.isArray,o=t(194),i=t(217);e.exports=function s(t,e){var n=[],u=[],a=t,c=i(a);if(c&&(a=+a),c||"string"!=typeof a)if(r(a)){var h=[e];a.forEach(function(t){var e=[];h.forEach(function(n){var r=s(t,n);void 0!==r[0]&&(u=u.concat(r[0])),e=e.concat(r[1])}),h=e}),n=h}else c?e.from<a&&a<e.to?(n[0]={from:e.from,to:a-1},n[1]={from:a+1,to:e.to},u=[a]):e.from===a&&e.to===a?(n=[],u=[a]):e.from===a?(n[0]={from:a+1,to:e.to},u=[a]):e.to===a?(n[0]={from:e.from,to:a-1},u=[a]):n=[e]:u=o(e);else n=[e];return[u,n]}},{194:194,217:217}],198:[function(t,e,n){var r=t(195),o=t(212);e.exports=function(t,e){for(var n=[],i=[],s=[],u=0,a=e.length;a>u;++u){var c=t[u],h=e[u],f=r(c,h),l=f[0],p=f[1],d=p.length>0;if(d){var v=1===p.length?p[0]:p;s[u]=v,n[n.length]=o(s,t,u+1)}i[u]=l,s[u]=l}return[i,n]}},{195:195,212:212}],199:[function(t,e,n){function r(t,e){return function(n){var r,a=-1,c=s(arguments,1),h=!u(n);return h?(c=[],r=n):i(n[0])?(r=[],n.forEach(function(e){e.path=o(e.path,t),r[++a]=e})):r=o(n,t),e.apply(this,[r].concat(c))}}var o=t(200),i=t(218),s=t(223),u=Array.isArray;e.exports=r},{200:200,218:218,223:223}],200:[function(t,e,n){var r=t(174),o=t(191),i=t(184),s=t(185),u=Array.isArray;e.exports=function(t,e){for(var n=[],a=0,c=e.length;c>a;++a)if(e[a].type){var h=e[a];switch(h.type){case r.ranges:n[a]=o(t[a]);break;case r.integers:n[a]=i(t[a]);break;case r.keys:n[a]=s(t[a]);break;default:var f=new Error("Unknown route type.");f.throwToNext=!0}h.named&&(n[h.name]=n[n.length-1])}else u(e[a])&&!u(t[a])?n[n.length]=[t[a]]:n[n.length]=t[a];return n}},{174:174,184:184,185:185,191:191}],201:[function(t,e,n){var r=t(174);e.exports=function(t){t.route=t.route.map(function(t){if("object"==typeof t)switch(t.type){case"keys":t.type=r.keys;break;case"integers":t.type=r.integers;break;case"ranges":t.type=r.ranges;break;default:var e=new Error("Unknown route type.");e.throwToNext=!0}return t})}},{174:174}],202:[function(t,e,n){function r(t,e,n){var o=e.route,s=e.get,c=e.set,h=e.call,f=o[n];f=!isNaN(+f)&&+f||f;var l=Array.isArray(f),p=0;do{var d,v=f;if(l&&(v=v[p]),"object"==typeof v){var y=v.type;d=i(t,y,v)}else d=i(t,v),d?o[n]={type:v,named:!1}:(t[v]||(t[v]={}),d=t[v]);if(n+1===o.length){var b=d[u.match]||{};d[u.match]||(d[u.match]=b),s&&(b.get=a(o,s),b.getId=e.getId),c&&(b.set=a(o,c),b.setId=e.setId),h&&(b.call=a(o,h),b.callId=e.callId)}else r(d,e,n+1)}while(l&&++p<f.length)}function o(t,e){var n=e.route,r=e.get,o=e.set,i=e.call;s(n).map(function(t){return t.join(",")}).forEach(function(e){if(r&&t[e+"get"]||o&&t[e+"set"]||i&&t[e+"call"])throw new Error(l.routeWithSamePrecedence+" "+f(n));r&&(t[e+"get"]=!0),o&&(t[e+"set"]=!0),i&&(t[e+"call"]=!0)})}function i(t,e,n){var r=null;switch(e){case u.keys:case u.integers:case u.ranges:r=t[e],r||(r=t[e]={})}return r&&n&&(r[u.named]=n.named,r[u.name]=n.name),r}function s(t,e,n,r){e=e||0,n=n||[],r=r||[];var o,i=t[e],a=Array.isArray(i),c=a&&i.length||0,h=0;"object"!=typeof i||a?a||(o=i):o=i.type;do a&&(o=i[h]),o===u.integers||o===u.ranges?r[e]="__I__":o===u.keys?r[e]="__K__":r[e]=o,e+1!==t.length?s(t,e+1,n,r):n.push(p(r));while(a&&++h<c);return n}var u=t(174),a=t(199),c=t(160),h=t(201),f=t(222),l=t(182),p=t(214),d=-3;e.exports=function(t){var e={},n={};return t.forEach(function(t){"string"==typeof t.route&&(t.route=c(t.route,!0),h(t)),t.get&&(t.getId=++d),t.set&&(t.setId=++d),t.call&&(t.callId=++d),o(n,t),r(e,t,0,[])}),e}},{160:160,174:174,182:182,199:199,201:201,214:214,222:222}],203:[function(t,e,n){function r(t,e,n,r,i,s){return function(u){return o(u,t,e,n,r,i,s)}}function o(t,e,n,r,o,f,l){var p,d=t.match,v=t.path;return d.isCall?p=h.defer(function(){var t;try{t=d.action.call(e,v,r,o,f)}catch(n){throw n.throwToNext=!0,n}return s(t).toArray()}).map(function(t){var e=[],r=[],s=t.reduce(function(t,e){return t.concat(e)},[]),u=-1;s.forEach(function(t){if(i(t)&&!t.paths){var e=new Error(a.callJSONGraphWithouPaths);throw e.throwToNext=!0,e}});var h=c(l,s);h.references.forEach(function(t){e[++u]=t}),r=h.values.map(function(t){return t.path});var p=s.length,d=n.slice(0,n.length-1),y=o&&o.length,b=f&&f.length;if(s[++p]={isMessage:!0,method:"get"},b&&p+1&&f.forEach(function(t){s[++p]={isMessage:!0,additionalPath:d.concat(t)}}),y){var m=v.length-1;e.forEach(function(t){var e=d.concat(t.path.slice(m));o.forEach(function(t){var n=e.concat(t);s[++p]={isMessage:!0,additionalPath:n}})})}if(e.length&&!y||r.length){var g=[];e.length&&!y&&(g=e.map(function(t){return t.path})),g.concat(r).forEach(function(t){s[++p]={isMessage:!0,additionalPath:t}})}return s})["do"](null,function(t){throw t.throwToNext=!0,t}):(p=d.action.call(e,t.path),p=s(p)),p.materialize().filter(function(t){return"C"!==t.kind}).map(u(t))}var i=t(215),s=t(205),u=t(204),a=t(182),c=t(207),h=t(233).Observable;e.exports=r},{182:182,204:204,205:205,207:207,215:215,233:233}],204:[function(t,e,n){function r(t,e){var n,r=e.kind;if(r===s)n=e.value;else{var u={$type:"error",value:{}},a={};if(e.exception&&(a=e.exception),a.throwToNext)throw a;a instanceof i?u=a.typeValue:a instanceof Error&&(u.value.message=a.message),n={path:t.path,value:u}}return o(n)&&!n.paths&&(n={jsonGraph:n.jsonGraph,paths:[t.path]}),[t.match,n]}var o=t(215),i=t(173),s="N";e.exports=function(t){return function(e){return r(t,e)}}},{173:173,215:215}],205:[function(t,e,n){var r=t(233).Observable,o=Array.isArray;e.exports=function(t){var e=t;return e.subscribe||(e=e.then?r.fromPromise(e):o(e)?r.of(e):r.of(e)),e}},{233:233}],206:[function(t,e,n){function r(t,e,n){var r,u=e.match;try{r=u.action.call(t,e.path),r=o(r)}catch(a){r=s["throw"](a)}return r.materialize().filter(function(t){return"C"!==t.kind}).map(i(e))}var o=t(205),i=t(204),s=t(233).Observable;e.exports=function(t,e){return function(n){return r(t,n,e)}}},{204:204,205:205,233:233}],207:[function(t,e,n){function r(t,e){var n=[],r=-1,a=[],c=[],h=[];return e.forEach(function(e){var f=[];u(e)?c[c.length]=e:f=s(e)?o(t,e):i(t,e);var l=f.references,p=f.values,d=f.invalidations;p&&p.length&&(h=h.concat(p)),d&&d.length&&(a=a.concat(d)),l&&l.length&&l.forEach(function(t){n[++r]=t})}),{invalidations:a,references:n,messages:c,values:h}}var o=t(179),i=t(181),s=t(215),u=t(216);e.exports=r},{179:179,181:181,215:215,216:216}],208:[function(t,e,n){var r=t(168),o=r.collapse,i=t(198),s=t(188);e.exports=function(t,e){for(var n=e,r=[],u=0;u<t.length&&n.length>0;++u){var a=n,c=t[u];n=[],u>0&&(a=o(a));for(var h=0;h<a.length;++h){var f=a[h];if(s(f,c.virtual)){var l=i(f,c.virtual);r[r.length]={path:l[0],match:c},n=n.concat(l[1])}}}return r}},{168:168,188:188,198:198}],209:[function(t,e,n){var r=t(233).Observable,o=t(208);e.exports=function(t,e,n){var i=e.sort(function(t,e){return t.precedence>e.precedence?1:t.precedence<e.precedence?-1:0}),s=o(i,[t]);return r.from(s).flatMap(n).map(function(t){return{match:t[0],value:t[1]}})}},{208:208,233:233}],210:[function(t,e,n){function r(t,e,n,r,o,u){var l=[],p=[],d=[],v=r;return i.from(n).expand(function(n){if(!n.length)return i.empty();var r;try{r=t(v,n)}catch(y){return i["throw"](y)}if(!r.matched.length)return i.empty();var b=r.matched;return s(n,b,e).flatMap(function(t){var e=t.value,n=t.match.suffix;f(e)||(e=[e]);var s=h(u,e),y=s.invalidations,b=s.messages,m=[];return n.length>0&&(m=s.references),y.forEach(function(t){p[p.length]=t.path}),m=m.map(function(t){return t.value.concat(n)}),b.forEach(function(t){if(t.method)v=t.method;else if(t.additionalPath){var e=t.additionalPath;m[m.length]=e,d[d.length]=e}else t.invalidations&&t.invalidations.forEach(function(t){p.push(t)})}),m=c(u,m,o.maxRefFollow),m.length&&(m=a(m)),l=l.concat(r.missingPaths),i.from(m)}).defaultIfEmpty([])}).reduce(function(t,e){return t},null).map(function(){return{missing:l,invalidated:p,jsonGraph:u,reportedPaths:d}})}var o=t(233),i=o.Observable,s=t(209),u=t(168),a=u.collapse,c=t(180),h=t(207),f=Array.isArray;e.exports=function(t,e,n,o,i,s){return r(t,e,n,o,i,s)}},{168:168,180:180,207:207,209:209,233:233}],211:[function(t,e,n){function r(t,e,n,r){var p,d=n.match,v=n.path;if(d.isSet){var y=s(e.paths),b=y.map(function(e){return[c(r,[e],t.maxRefFollow)[0],e]}).filter(function(t){return t[0]&&h(t[0],d.virtual)}),m=b.map(function(t){return t[0]}),g=b.map(function(t){return t[1]}),w=g.reduce(function(t,n,r){return f(t,{path:m[r],value:u(e.jsonGraph,n)}),t},{}),x={jsonGraph:w,paths:[d.requested]};v={},a(v,x)}try{p=d.action.call(t,v),p=o(p)}catch(E){p=l["throw"](E)}return p.materialize().filter(function(t){return"C"!==t.kind}).map(i(n))}var o=t(205),i=t(204),s=t(224),u=t(178),a=t(179),c=t(180),h=t(188),f=t(181),l=t(233).Observable;e.exports=function(t,e,n){return function(o){return r(t,e,o,n)}}},{178:178,179:179,180:180,181:181,188:188,204:204,205:205,224:224,233:233}],212:[function(t,e,n){e.exports=function(t,e,n){var r,o,i,s=[];for(r=0,i=t.length;i>r;++r)s[r]=t[r];for(o=n||0,i=e.length;i>o;++o,++r)s[r]=e[o];return s}},{}],213:[function(t,e,n){e.exports=function(t){return"object"!=typeof t||null===t?t:Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},{})}},{}],214:[function(t,e,n){function r(t,e){for(var n=[],r=t.length,o=e||0;r>o;o++)n[o]=t[o];return n}e.exports=r},{}],215:[function(t,e,n){e.exports=function(t){return t.jsonGraph}},{}],216:[function(t,e,n){e.exports=function(t){return t.hasOwnProperty("isMessage")}},{}],217:[function(t,e,n){e.exports=function(t){return String(Number(t))===String(t)&&"object"!=typeof t}},{}],218:[function(t,e,n){e.exports=function(t){return t.hasOwnProperty("path")&&t.hasOwnProperty("value")}},{}],219:[function(t,e,n){e.exports=function(t){return t.hasOwnProperty("to")&&t.hasOwnProperty("from")}},{}],220:[function(t,e,n){e.exports=function(t){return t.hasOwnProperty("type")&&t.hasOwnProperty("named")}},{}],221:[function(t,e,n){e.exports=String.fromCharCode(30)},{}],222:[function(t,e,n){var r=t(174);e.exports=function(t){for(var e=0,n=[],o=0,i=t.length;i>o;++o,++e){var s=t[o];"object"==typeof s&&(s=s.type),s===r.integers?n[e]="integers":s===r.ranges?n[e]="ranges":s===r.keys?n[e]="keys":Array.isArray(s)?n[e]=JSON.stringify(s):n[e]=s}return n}},{174:174}],223:[function(t,e,n){e.exports=function(t,e){for(var n=t.length,r=[],o=0,i=e;n>i;)r[o]=t[i],++i,++o;return r}},{}],224:[function(t,e,n){function r(t,e,n,s){if(s=s||[],e===t.length)return void(n[n.length]=i(s));var u=t[e];if("object"!=typeof u)return s[e]=u,void r(t,e+1,n,s);var a={},c=o(u,a);do s[e]=c,r(t,e+1,n,s),s.length=e,c=o(u,a);while(!a.done)}var o=t(168).iterateKeySet,i=t(214);e.exports=function(t){var e=[];return t.forEach(function(t){r(t,0,e)}),e}},{168:168,214:214}],225:[function(t,e,n){e.exports={$ref:"ref",$atom:"atom",$error:"error"}},{}],226:[function(t,e,n){"use strict";e.exports=t(231)},{231:231}],227:[function(t,e,n){"use strict";function r(){}function o(t){try{return t.then}catch(e){return y=e,b}}function i(t,e){try{return t(e)}catch(n){return y=n,b}}function s(t,e,n){try{t(e,n)}catch(r){return y=r,b}}function u(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],t!==r&&d(t,this)}function a(t,e,n){return new t.constructor(function(o,i){var s=new u(r);s.then(o,i),c(t,new p(e,n,s))})}function c(t,e){for(;3===t._37;)t=t._12;return 0===t._37?void t._59.push(e):void v(function(){var n=1===t._37?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._37?h(e.promise,t._12):f(e.promise,t._12));var r=i(n,t._12);r===b?f(e.promise,y):h(e.promise,r)})}function h(t,e){if(e===t)return f(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=o(e);if(n===b)return f(t,y);if(n===t.then&&e instanceof u)return t._37=3,t._12=e,void l(t);if("function"==typeof n)return void d(n.bind(e),t)}t._37=1,t._12=e,l(t)}function f(t,e){t._37=2,t._12=e,l(t)}function l(t){for(var e=0;e<t._59.length;e++)c(t,t._59[e]);t._59=null}function p(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1,r=s(t,function(t){n||(n=!0,h(e,t))},function(t){n||(n=!0,f(e,t))});n||r!==b||(n=!0,f(e,y))}var v=t(128),y=null,b={};e.exports=u,u._99=r,u.prototype.then=function(t,e){if(this.constructor!==u)return a(this,t,e);var n=new u(r);return c(this,new p(t,e,n)),n}},{128:128}],228:[function(t,e,n){"use strict";var r=t(227);e.exports=r,r.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;
n.then(null,function(t){setTimeout(function(){throw t},0)})}},{227:227}],229:[function(t,e,n){"use strict";function r(t){var e=new o(o._99);return e._37=1,e._12=t,e}var o=t(227);e.exports=o;var i=r(!0),s=r(!1),u=r(null),a=r(void 0),c=r(0),h=r("");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return u;if(void 0===t)return a;if(t===!0)return i;if(t===!1)return s;if(0===t)return c;if(""===t)return h;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new o(e.bind(t))}catch(n){return new o(function(t,e){e(n)})}return r(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){function r(s,u){if(u&&("object"==typeof u||"function"==typeof u)){if(u instanceof o&&u.then===o.prototype.then){for(;3===u._37;)u=u._12;return 1===u._37?r(s,u._12):(2===u._37&&n(u._12),void u.then(function(t){r(s,t)},n))}var a=u.then;if("function"==typeof a){var c=new o(a.bind(u));return void c.then(function(t){r(s,t)},n)}}e[s]=u,0===--i&&t(e)}if(0===e.length)return t([]);for(var i=e.length,s=0;s<e.length;s++)r(s,e[s])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype["catch"]=function(t){return this.then(null,t)}},{227:227}],230:[function(t,e,n){"use strict";var r=t(227);e.exports=r,r.prototype["finally"]=function(t){return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}},{227:227}],231:[function(t,e,n){"use strict";e.exports=t(227),t(228),t(230),t(229),t(232)},{227:227,228:228,229:229,230:230,232:232}],232:[function(t,e,n){"use strict";var r=t(227),o=t(126);e.exports=r,r.denodeify=function(t,e){return e=e||1/0,function(){var n=this,o=Array.prototype.slice.call(arguments,0,e>0?e:0);return new r(function(e,r){o.push(function(t,n){t?r(t):e(n)});var i=t.apply(n,o);!i||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then||e(i)})}},r.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(n,i)}catch(s){if(null===n||"undefined"==typeof n)return new r(function(t,e){e(s)});o(function(){n.call(i,s)})}}},r.prototype.nodeify=function(t,e){return"function"!=typeof t?this:void this.then(function(n){o(function(){t.call(e,null,n)})},function(n){o(function(){t.call(e,n)})})}},{126:126,227:227}],233:[function(e,n,r){(function(e,o){(function(i){function u(t){for(var e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e}function a(t,e){if(Gt&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(Ut)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var o=n.join("\n"+Ut+"\n");t.stack=c(o)}}function c(t){for(var e=t.split("\n"),n=[],r=0,o=e.length;o>r;r++){var i=e[r];h(i)||f(i)||!i||n.push(i)}return n.join("\n")}function h(t){var e=p(t);if(!e)return!1;var n=e[0],r=e[1];return n===Jt&&r>=Ft&&Jr>=r}function f(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function l(){if(Gt)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=p(n);if(!r)return;return Jt=r[0],r[1]}}function p(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function d(t){var e=[];if(!Ae(t))return e;Ne.nonEnumArgs&&t.length&&Oe(t)&&(t=Pe.call(t));var n=Ne.enumPrototypes&&"function"==typeof t,r=Ne.enumErrorProps&&(t===Ee||t instanceof Error);for(var o in t)n&&"prototype"==o||r&&("message"==o||"name"==o)||e.push(o);if(Ne.nonEnumShadows&&t!==_e){var i=t.constructor,s=-1,u=ae;if(t===(i&&i.prototype))var a=t===Se?me:t===Ee?pe:ge.call(t),c=ke[a];for(;++s<u;)o=ue[s],c&&c[o]||!we.call(t,o)||e.push(o)}return e}function v(t,e,n){for(var r=-1,o=n(t),i=o.length;++r<i;){var s=o[r];if(e(t[s],s,t)===!1)break}return t}function y(t,e){return v(t,e,d)}function b(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function m(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;var o=typeof t,i=typeof e;if(t===t&&(null==t||null==e||"function"!=o&&"object"!=o&&"function"!=i&&"object"!=i))return!1;var s=ge.call(t),u=ge.call(e);if(s==ce&&(s=ye),u==ce&&(u=ye),s!=u)return!1;switch(s){case fe:case le:return+t==+e;case ve:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case be:case me:return t==String(e)}var a=s==he;if(!a){if(s!=ye||!Ne.nodeClass&&(b(t)||b(e)))return!1;var c=!Ne.argsObject&&Oe(t)?Object:t.constructor,h=!Ne.argsObject&&Oe(e)?Object:e.constructor;if(!(c==h||we.call(t,"constructor")&&we.call(e,"constructor")||It(c)&&c instanceof c&&It(h)&&h instanceof h||!("constructor"in t&&"constructor"in e)))return!1}n||(n=[]),r||(r=[]);for(var f=n.length;f--;)if(n[f]==t)return r[f]==e;var l=0,p=!0;if(n.push(t),r.push(e),a){if(f=t.length,l=e.length,p=l==f)for(;l--;){var d=e[l];if(!(p=m(t[l],d,n,r)))break}}else y(e,function(e,o,i){return we.call(i,o)?(l++,p=we.call(t,o)&&m(t[o],e,n,r)):void 0}),p&&y(t,function(t,e,n){return we.call(n,e)?p=--l>-1:void 0});return n.pop(),r.pop(),p}function g(t,e){for(var n=new Array(t),r=0;t>r;r++)n[r]=e();return n}function w(){try{return De.apply(this,arguments)}catch(t){return We.e=t,We}}function x(t){if(!It(t))throw new TypeError("fn must be a function");return De=t,w}function E(t){throw t}function _(t,e){this.id=t,this.value=e}function S(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function C(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}function k(t){this._s=s}function N(t){this._s=s,this._l=s.length,this._i=0}function A(t){this._a=t}function O(t){this._a=t,this._l=q(t),this._i=0}function D(t){return"number"==typeof t&&At.isFinite(t)}function j(t){var e,n=t[ee];if(!n&&"string"==typeof t)return e=new k(t),e[ee]();if(!n&&t.length!==i)return e=new A(t),e[ee]();if(!n)throw new TypeError("Object is not iterable");return t[ee]()}function P(t){var e=+t;return 0===e?e:isNaN(e)?e:0>e?-1:1}function q(t){var e=+t.length;return isNaN(e)?0:0!==e&&D(e)?(e=P(e)*Math.floor(Math.abs(e)),0>=e?0:e>$n?$n:e):e}function R(t,e){this.observer=t,this.parent=e}function T(t,e){return Ye(t)||(t=rn),new zn(e,t)}function W(t,e){this.observer=t,this.parent=e}function V(t,e){this.observer=t,this.parent=e}function M(t,e){return new $r(function(n){var r=new Fe,o=new Ue;return o.setDisposable(r),r.setDisposable(t.subscribe(function(t){n.onNext(t)},function(t){try{var r=e(t)}catch(i){return n.onError(i)}Lt(r)&&(r=Pn(r));var s=new Fe;o.setDisposable(s),s.setDisposable(r.subscribe(n))},function(t){n.onCompleted(t)})),o},t)}function $(){return!1}function L(t,e){var n=this;return new $r(function(r){var o=0,i=t.length;return n.subscribe(function(n){if(i>o){var s=t[o++],u=x(e)(n,s);if(u===We)return r.onError(u.e);r.onNext(u)}else r.onCompleted()},function(t){r.onError(t)},function(){r.onCompleted()})},n)}function $(){return!1}function z(){return[]}function $(){return!1}function I(){return[]}function G(t,e){this.observer=t,this.accumulator=e.accumulator,this.hasSeed=e.hasSeed,this.seed=e.seed,this.hasAccumulation=!1,this.accumulation=null,this.hasValue=!1,this.isStopped=!1}function B(t,e,n){var r=se(e,n,3);return t.map(function(e,n){var o=r(e,n,t);return Lt(o)&&(o=Pn(o)),(oe(o)||re(o))&&(o=Ln(o)),o}).concatAll()}function J(t,e,n){for(var r=0,o=t.length;o>r;r++)if(n(t[r],e))return r;return-1}function F(t){this.comparer=t,this.set=[]}function U(t,e,n){var r=se(e,n,3);return t.map(function(e,n){var o=r(e,n,t);return Lt(o)&&(o=Pn(o)),(oe(o)||re(o))&&(o=Ln(o)),o}).mergeAll()}function Q(t,e,n){return new $r(function(r){var o=!1,i=null,s=[];return t.subscribe(function(t){var u,a;try{a=e(t)}catch(c){return void r.onError(c)}if(u=0,o)try{u=n(a,i)}catch(h){return void r.onError(h)}else o=!0,i=a;u>0&&(i=a,s=[]),u>=0&&s.push(t)},function(t){r.onError(t)},function(){r.onNext(s),r.onCompleted()})},t)}function H(t){if(0===t.length)throw new Qt;return t[0]}function X(t,e,n,r){if(0>e)throw new Xt;return new $r(function(o){var i=e;return t.subscribe(function(t){0===i--&&(o.onNext(t),o.onCompleted())},function(t){o.onError(t)},function(){n?(o.onNext(r),o.onCompleted()):o.onError(new Xt)})},t)}function K(t,e,n){return new $r(function(r){var o=n,i=!1;return t.subscribe(function(t){i?r.onError(new Error("Sequence contains more than one element")):(o=t,i=!0)},function(t){r.onError(t)},function(){i||e?(r.onNext(o),r.onCompleted()):r.onError(new Qt)})},t)}function Y(t,e,n){return new $r(function(r){return t.subscribe(function(t){r.onNext(t),r.onCompleted()},function(t){r.onError(t)},function(){e?(r.onNext(n),r.onCompleted()):r.onError(new Qt)})},t)}function Z(t,e,n){return new $r(function(r){var o=n,i=!1;return t.subscribe(function(t){o=t,i=!0},function(t){r.onError(t)},function(){i||e?(r.onNext(o),r.onCompleted()):r.onError(new Qt)})},t)}function tt(t,e,n,r){var o=se(e,n,3);return new $r(function(e){var n=0;return t.subscribe(function(i){var s;try{s=o(i,n,t)}catch(u){return void e.onError(u)}s?(e.onNext(r?n:i),e.onCompleted()):n++},function(t){e.onError(t)},function(){e.onNext(r?-1:i),e.onCompleted()})},t)}function et(t,e){return Array.isArray(t)?nt.call(e,t):st(t)?gr(t.call(e)):ut(t)?gr(t):it(t)?rt(t):Lt(t)?ot(t):typeof t===br?t:Ae(t)||Array.isArray(t)?nt.call(e,t):t}function nt(t){var e=this;return function(n){function r(t,r){if(!o)try{if(t=et(t,e),typeof t!==br)return u[r]=t,--s||n(null,u);t.call(e,function(t,e){if(!o){if(t)return o=!0,n(t);u[r]=e,--s||n(null,u)}})}catch(i){o=!0,n(i)}}var o,i=Object.keys(t),s=i.length,u=new t.constructor;if(!s)return void an.schedule(function(){n(null,u)});for(var a=0,c=i.length;c>a;a++)r(t[i[a]],i[a])}}function rt(t){return function(e){var n,r=!1;t.subscribe(function(t){n=t,r=!0},e,function(){r&&e(null,n)})}}function ot(t){return function(e){t.then(function(t){e(null,t)},e)}}function it(t){return t&&typeof t.subscribe===br}function st(t){return t&&t.constructor&&"GeneratorFunction"===t.constructor.name}function ut(t){return t&&typeof t.next===br&&typeof t[mr]===br}function at(t){t&&an.schedule(function(){throw t})}function ct(t,e,n){if(t.addEventListener)return t.addEventListener(e,n,!1),Ie(function(){t.removeEventListener(e,n,!1)});throw new Error("No listener found")}function ht(t,e,n){var r=new $e,o=Object.prototype.toString;if("[object NodeList]"===o.call(t)||"[object HTMLCollection]"===o.call(t))for(var i=0,s=t.length;s>i;i++)r.add(ht(t.item(i),e,n));else t&&r.add(ct(t,e,n));return r}function ft(t,e,n){return new $r(function(r){function o(t,e){if(c[e]=t,s[e]=!0,u||(u=s.every(Tt))){if(i)return r.onError(i);var o=x(n).apply(null,c);if(o===We)return r.onError(o.e);r.onNext(o)}a&&c[1]&&r.onCompleted()}var i,s=[!1,!1],u=!1,a=!1,c=new Array(2);return new $e(t.subscribe(function(t){o(t,0)},function(t){c[1]?r.onError(t):i=t},function(){a=!0,c[1]&&r.onCompleted()}),e.subscribe(function(t){o(t,1)},function(t){r.onError(t)},function(){a=!0,o(!0,1)}))},t)}function lt(t,e){return t.groupJoin(this,e,Wn,function(t,e){return e})}function pt(t){var e=this;return new $r(function(n){var r=new Ir,o=new $e,i=new Qe(o);return n.onNext(Te(r,i)),o.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),Lt(t)&&(t=Pn(t)),o.add(t.subscribe(function(t){r.onCompleted(),r=new Ir,n.onNext(Te(r,i))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),i},e)}function dt(t){var e=this;return new $r(function(n){function r(){var e;try{e=t()}catch(i){return void n.onError(i)}Lt(e)&&(e=Pn(e));var a=new Fe;o.setDisposable(a),a.setDisposable(e.take(1).subscribe(Rt,function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),u=new Ir,n.onNext(Te(u,s)),r()}))}var o=new Ue,i=new $e(o),s=new Qe(i),u=new Ir;return n.onNext(Te(u,s)),i.add(e.subscribe(function(t){u.onNext(t)},function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),n.onCompleted()})),r(),s},e)}function vt(t,e){return new qr(t,e)}function yt(t){this.patterns=t}function bt(t,e){this.expression=t,this.selector=e}function mt(t,e,n){var r=t.get(e);if(!r){var o=new Vr(e,n);return t.set(e,o),o}return r}function gt(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new Wr;for(var r=0,o=this.joinObserverArray.length;o>r;r++){var i=this.joinObserverArray[r];this.joinObservers.set(i,i)}}function wt(t,e){return new $r(function(n){return e.scheduleWithAbsolute(t,function(){n.onNext(0),n.onCompleted()})})}function xt(t,e,n){return new $r(function(r){var o=t,i=Ke(e);return n.scheduleRecursiveWithAbsoluteAndState(0,o,function(t,e){if(i>0){var s=n.now();o+=i,s>=o&&(o=s+i)}r.onNext(t),e(t+1,o)})})}function Et(t,e){return new $r(function(n){return e.scheduleWithRelative(Ke(t),function(){n.onNext(0),n.onCompleted()})})}function _t(t,e,n){return t===e?new $r(function(t){return n.schedulePeriodicWithState(0,e,function(e){return t.onNext(e),e+1})}):Rn(function(){return xt(n.now()+t,e,n)})}function St(t,e,n){return new $r(function(r){var o,i=!1,s=new Ue,u=null,a=[],c=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,h;"E"===t.value.kind?(a=[],a.push(t),u=t.value.exception,h=!c):(a.push({value:t.value,timestamp:t.timestamp+e}),h=!i,i=!0),h&&(null!==u?r.onError(u):(o=new Fe,s.setDisposable(o),o.setDisposable(n.scheduleRecursiveWithRelative(e,function(t){var e,o,s,h;if(null===u){c=!0;do s=null,a.length>0&&a[0].timestamp-n.now()<=0&&(s=a.shift().value),null!==s&&s.accept(r);while(null!==s);h=!1,o=0,a.length>0?(h=!0,o=Math.max(0,a[0].timestamp-n.now())):i=!1,e=u,c=!1,null!==e?r.onError(e):h&&t(o)}}))))}),new $e(o,s)},t)}function Ct(t,e,n){return Rn(function(){return St(t,e-n.now(),n)})}function kt(t,e){return new $r(function(n){function r(){s&&(s=!1,n.onNext(o)),i&&n.onCompleted()}var o,i=!1,s=!1,u=new Fe;return u.setDisposable(t.subscribe(function(t){s=!0,o=t},function(t){n.onError(t)},function(){i=!0,u.dispose()})),new $e(u,e.subscribe(r,function(t){n.onError(t)},r))},t)}var Nt={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},At=Nt[typeof window]&&window||this,Ot=Nt[typeof r]&&r&&!r.nodeType&&r,Dt=Nt[typeof n]&&n&&!n.nodeType&&n,jt=Dt&&Dt.exports===Ot&&Ot,Pt=Nt[typeof o]&&o;!Pt||Pt.global!==Pt&&Pt.window!==Pt||(At=Pt);var qt={internals:{},config:{Promise:At.Promise},helpers:{}},Rt=qt.helpers.noop=function(){},Tt=(qt.helpers.notDefined=function(t){return"undefined"==typeof t},qt.helpers.identity=function(t){return t}),Wt=(qt.helpers.pluck=function(t){return function(e){return e[t]}},qt.helpers.just=function(t){return function(){return t}},qt.helpers.defaultNow=Date.now),Vt=qt.helpers.defaultComparer=function(t,e){return je(t,e)},Mt=qt.helpers.defaultSubComparer=function(t,e){return t>e?1:e>t?-1:0},$t=(qt.helpers.defaultKeySerializer=function(t){return t.toString()},qt.helpers.defaultError=function(t){throw t}),Lt=qt.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},zt=(qt.helpers.asArray=function(){return Array.prototype.slice.call(arguments)},qt.helpers.not=function(t){return!t}),It=qt.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==ge.call(t)}),t}();qt.config.longStackSupport=!1;var Gt=!1;try{throw new Error}catch(Bt){Gt=!!Bt.stack}var Jt,Ft=l(),Ut="From previous event:",Qt=qt.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};Qt.prototype=Error.prototype;var Ht=qt.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};Ht.prototype=Error.prototype;var Xt=qt.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};Xt.prototype=Error.prototype;var Kt=qt.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};Kt.prototype=Error.prototype;var Yt=qt.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};Yt.prototype=Error.prototype;var Zt=qt.helpers.notImplemented=function(){throw new Yt},te=qt.helpers.notSupported=function(){throw new Kt},ee="function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";At.Set&&"function"==typeof(new At.Set)["@@iterator"]&&(ee="@@iterator");var ne=qt.doneEnumerator={done:!0,value:i},re=qt.helpers.isIterable=function(t){return t[ee]!==i},oe=qt.helpers.isArrayLike=function(t){return t&&t.length!==i};qt.helpers.iterator=ee;var ie,se=qt.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},ue=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ae=ue.length,ce="[object Arguments]",he="[object Array]",fe="[object Boolean]",le="[object Date]",pe="[object Error]",de="[object Function]",ve="[object Number]",ye="[object Object]",be="[object RegExp]",me="[object String]",ge=Object.prototype.toString,we=Object.prototype.hasOwnProperty,xe=ge.call(arguments)==ce,Ee=Error.prototype,_e=Object.prototype,Se=String.prototype,Ce=_e.propertyIsEnumerable;try{ie=!(ge.call(document)==ye&&!({toString:0}+""))}catch(Bt){ie=!0}var ke={};ke[he]=ke[le]=ke[ve]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ke[fe]=ke[me]={constructor:!0,toString:!0,valueOf:!0},ke[pe]=ke[de]=ke[be]={constructor:!0,toString:!0},ke[ye]={constructor:!0};var Ne={};!function(){var t=function(){this.x=1},e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);for(n in arguments);Ne.enumErrorProps=Ce.call(Ee,"message")||Ce.call(Ee,"name"),Ne.enumPrototypes=Ce.call(t,"prototype"),Ne.nonEnumArgs=0!=n,Ne.nonEnumShadows=!/valueOf/.test(e)}(1);var Ae=qt.internals.isObject=function(t){var e=typeof t;return t&&("function"==e||"object"==e)||!1},Oe=function(t){return t&&"object"==typeof t?ge.call(t)==ce:!1};xe||(Oe=function(t){return t&&"object"==typeof t?we.call(t,"callee"):!1});var De,je=qt.internals.isEqual=function(t,e){return m(t,e,[],[])},Pe=({}.hasOwnProperty,Array.prototype.slice),qe=this.inherits=qt.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n},Re=qt.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;r>n;n++)e.push(arguments[n]);for(var o=0,i=e.length;i>o;o++){var s=e[o];for(var u in s)t[u]=s[u]}},Te=qt.internals.addRef=function(t,e){return new $r(function(n){return new $e(e.getDisposable(),t.subscribe(n))})},We={e:{}};_.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var Ve=qt.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},Me=Ve.prototype;Me.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},Me.percolate=function(t){if(!(t>=this.length||0>t)){var e=t-1>>1;if(!(0>e||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},Me.heapify=function(t){if(+t||(t=0),!(t>=this.length||0>t)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var o=this.items[t];this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)}}},Me.peek=function(){return this.items[0].value},Me.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=i,this.heapify()},Me.dequeue=function(){var t=this.peek();return this.removeAt(0),t},Me.enqueue=function(t){var e=this.length++;this.items[e]=new _(Ve.count++,t),this.percolate(e)},Me.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Ve.count=0;var $e=qt.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0],e=n.length;else for(e=arguments.length,n=new Array(e),t=0;e>t;t++)n[t]=arguments[t];for(t=0;e>t;t++)if(!Be(n[t]))throw new TypeError("Not a disposable");this.disposables=n,this.isDisposed=!1,this.length=n.length},Le=$e.prototype;Le.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},Le.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},Le.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;t>n;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;t>n;n++)e[n].dispose()}};var ze=qt.Disposable=function(t){this.isDisposed=!1,this.action=t||Rt};ze.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Ie=ze.create=function(t){return new ze(t)},Ge=ze.empty={dispose:Rt},Be=ze.isDisposable=function(t){return t&&It(t.dispose)},Je=ze.checkDisposed=function(t){if(t.isDisposed)throw new Ht},Fe=qt.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};Fe.prototype.getDisposable=function(){return this.current},Fe.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},Fe.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Ue=qt.SerialDisposable=function(){this.isDisposed=!1,this.current=null};Ue.prototype.getDisposable=function(){return this.current},Ue.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},Ue.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Qe=qt.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?Ge:new t(this)},e}();S.prototype.dispose=function(){this.scheduler.scheduleWithState(this,C)};var He=qt.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||Mt,this.disposable=new Fe};He.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},He.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},He.prototype.isCancelled=function(){return this.disposable.isDisposed},He.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var Xe=qt.Scheduler=function(){function t(t,e,n,r){this.now=t,this._schedule=e,this._scheduleRelative=n,this._scheduleAbsolute=r}function e(t,e){return e(),Ge}t.isScheduler=function(e){return e instanceof t};var n=t.prototype;return n.schedule=function(t){return this._schedule(t,e)},n.scheduleWithState=function(t,e){return this._schedule(t,e)},n.scheduleWithRelative=function(t,n){return this._scheduleRelative(n,t,e)},n.scheduleWithRelativeAndState=function(t,e,n){return this._scheduleRelative(t,e,n)},n.scheduleWithAbsolute=function(t,n){return this._scheduleAbsolute(n,t,e)},n.scheduleWithAbsoluteAndState=function(t,e,n){return this._scheduleAbsolute(t,e,n)},t.now=Wt,t.normalize=function(t){return 0>t&&(t=0),t},t}(),Ke=Xe.normalize,Ye=Xe.isScheduler;!function(t){function e(t,e){function n(e){o(e,function(e){var r=!1,o=!1,s=t.scheduleWithState(e,function(t,e){return r?i.remove(s):o=!0,n(e),Ge});o||(i.add(s),r=!0)})}var r=e[0],o=e[1],i=new $e;return n(r),i}function n(t,e,n){function r(e){i(e,function(e,o){var i=!1,u=!1,a=t[n](e,o,function(t,e){return i?s.remove(a):u=!0,r(e),Ge});u||(s.add(a),i=!0)})}var o=e[0],i=e[1],s=new $e;return r(o),s}function r(t,e){t(function(n){e(t,n)})}t.scheduleRecursive=function(t){return this.scheduleRecursiveWithState(t,r)},t.scheduleRecursiveWithState=function(t,n){return this.scheduleWithState([t,n],e)},t.scheduleRecursiveWithRelative=function(t,e){return this.scheduleRecursiveWithRelativeAndState(e,t,r)},t.scheduleRecursiveWithRelativeAndState=function(t,e,r){return this._scheduleRelative([t,r],e,function(t,e){return n(t,e,"scheduleWithRelativeAndState")})},t.scheduleRecursiveWithAbsolute=function(t,e){return this.scheduleRecursiveWithAbsoluteAndState(e,t,r)},t.scheduleRecursiveWithAbsoluteAndState=function(t,e,r){return this._scheduleAbsolute([t,r],e,function(t,e){return n(t,e,"scheduleWithAbsoluteAndState")})}}(Xe.prototype),function(t){Xe.prototype.schedulePeriodic=function(t,e){return this.schedulePeriodicWithState(null,t,e)},Xe.prototype.schedulePeriodicWithState=function(t,e,n){if("undefined"==typeof At.setInterval)throw new Kt;e=Ke(e);var r=t,o=At.setInterval(function(){r=n(r)},e);return Ie(function(){At.clearInterval(o)})}}(Xe.prototype),function(t){t.catchError=t["catch"]=function(t){return new cn(this,t)}}(Xe.prototype);var Ze,tn,en=qt.internals.SchedulePeriodicRecursive=function(){function t(t,e){e(0,this._period);try{this._state=this._action(this._state)}catch(n){throw this._cancel.dispose(),n}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new Fe;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,t.bind(this))),e},e}(),nn=Xe.immediate=function(){function t(t,e){return e(this,t)}return new Xe(Wt,t,te,te)}(),rn=Xe.currentThread=function(){function t(){for(;n.length>0;){var t=n.dequeue();!t.isCancelled()&&t.invoke()}}function e(e,r){var o=new He(this,e,r,this.now());if(n)n.enqueue(o);else{n=new Ve(4),n.enqueue(o);var i=x(t)();if(n=null,i===We)return E(i.e)}return o.disposable}var n,r=new Xe(Wt,e,te,te);return r.scheduleRequired=function(){return!n},r}(),on=function(){var t,e=Rt;if(At.setTimeout)t=At.setTimeout,e=At.clearTimeout;else{if(!At.WScript)throw new Kt;t=function(t,e){At.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),sn=on.setTimeout,un=on.clearTimeout;!function(){function t(e){if(s)sn(function(){t(e)},0);else{var n=i[e];if(n){s=!0;var r=x(n)();if(tn(e),s=!1,r===We)return E(r.e)}}}function n(){if(!At.postMessage||At.importScripts)return!1;var t=!1,e=At.onmessage;return At.onmessage=function(){t=!0},At.postMessage("","*"),At.onmessage=e,t}function r(e){"string"==typeof e.data&&e.data.substring(0,c.length)===c&&t(e.data.substring(c.length))}var o=1,i={},s=!1;tn=function(t){delete i[t]};var u=RegExp("^"+String(ge).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),a="function"==typeof(a=Pt&&jt&&Pt.setImmediate)&&!u.test(a)&&a;if(It(a))Ze=function(e){var n=o++;return i[n]=e,a(function(){t(n)}),n};else if("undefined"!=typeof e&&"[object process]"==={}.toString.call(e))Ze=function(n){var r=o++;return i[r]=n,e.nextTick(function(){t(r)}),r};else if(n()){var c="ms.rx.schedule"+Math.random();At.addEventListener?At.addEventListener("message",r,!1):At.attachEvent?At.attachEvent("onmessage",r):At.onmessage=r,Ze=function(t){var e=o++;return i[e]=t,At.postMessage(c+currentId,"*"),e}}else if(At.MessageChannel){var h=new At.MessageChannel;h.port1.onmessage=function(e){t(e.data)},Ze=function(t){var e=o++;return i[e]=t,h.port2.postMessage(e),e}}else Ze="document"in At&&"onreadystatechange"in At.document.createElement("script")?function(e){var n=At.document.createElement("script"),r=o++;return i[r]=e,n.onreadystatechange=function(){t(r),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},At.document.documentElement.appendChild(n),r}:function(e){var n=o++;return i[n]=e,sn(function(){t(n)},0),n}}();var an=Xe.timeout=Xe["default"]=function(){function t(t,e){var n=this,r=new Fe,o=Ze(function(){!r.isDisposed&&r.setDisposable(e(n,t))});return new $e(r,Ie(function(){tn(o)}))}function e(t,e,n){var r=this,o=Xe.normalize(e),i=new Fe;if(0===o)return r.scheduleWithState(t,n);var s=sn(function(){!i.isDisposed&&i.setDisposable(n(r,t))},o);return new $e(i,Ie(function(){un(s)}))}function n(t,e,n){return this.scheduleWithRelativeAndState(t,e-this.now(),n)}return new Xe(Wt,t,e,n)}(),cn=function(t){function e(t,e){return this._scheduler.scheduleWithState(t,this._wrap(e))}function n(t,e,n){return this._scheduler.scheduleWithRelativeAndState(t,e,this._wrap(n))}function r(t,e,n){return this._scheduler.scheduleWithAbsoluteAndState(t,e,this._wrap(n))}function o(o,i){this._scheduler=o,this._handler=i,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this,this._scheduler.now.bind(this._scheduler),e,n,r)}return qe(o,t),o.prototype._clone=function(t){return new o(t,this._handler)},o.prototype._wrap=function(t){var e=this;return function(n,r){try{return t(e._getRecursiveWrapper(n),r)}catch(o){if(!e._handler(o))throw o;return Ge}}},o.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},o.prototype.schedulePeriodicWithState=function(t,e,n){var r=this,o=!1,i=new Fe;return i.setDisposable(this._scheduler.schedulePeriodicWithState(t,e,function(t){if(o)return null;try{return n(t)}catch(e){if(o=!0,!r._handler(e))throw e;return i.dispose(),null}})),i},o}(Xe),hn=qt.Notification=function(){function t(t,e,n,r,o,i){this.kind=t,this.value=e,this.exception=n,this._accept=r,this._acceptObservable=o,this.toString=i}return t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObservable(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return Ye(t)||(t=nn),new $r(function(n){return t.scheduleWithState(e,function(t,e){e._acceptObservable(n),"N"===e.kind&&n.onCompleted()})})},t}(),fn=hn.createOnNext=function(){function t(t){return t(this.value)}function e(t){return t.onNext(this.value)}function n(){return"OnNext("+this.value+")"}return function(r){return new hn("N",r,null,t,e,n)}}(),ln=hn.createOnError=function(){function t(t,e){return e(this.exception)}function e(t){return t.onError(this.exception)}function n(){return"OnError("+this.exception+")"}return function(r){return new hn("E",null,r,t,e,n)}}(),pn=hn.createOnCompleted=function(){function t(t,e,n){return n()}function e(t){return t.onCompleted()}function n(){return"OnCompleted()"}return function(){return new hn("C",null,null,t,e,n)}}(),dn=qt.Observer=function(){};dn.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},dn.prototype.asObserver=function(){return new mn(this.onNext.bind(this),this.onError.bind(this),this.onCompleted.bind(this))},dn.prototype.checked=function(){return new gn(this)};var vn=dn.create=function(t,e,n){return t||(t=Rt),e||(e=$t),n||(n=Rt),new mn(t,e,n)};dn.fromNotifier=function(t,e){return new mn(function(n){return t.call(e,fn(n))},function(n){return t.call(e,ln(n))},function(){return t.call(e,pn())})},dn.prototype.notifyOn=function(t){return new xn(t,this)},dn.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var yn,bn=qt.internals.AbstractObserver=function(t){function e(){this.isStopped=!1,t.call(this)}return qe(e,t),e.prototype.next=Zt,e.prototype.error=Zt,e.prototype.completed=Zt,e.prototype.onNext=function(t){this.isStopped||this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,
this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.error(t),!0)},e}(dn),mn=qt.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return qe(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(bn),gn=function(t){function e(e){t.call(this),this._observer=e,this._state=0}qe(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=x(this._observer.onNext).call(this._observer,t);this._state=0,e===We&&E(e.e)},n.onError=function(t){this.checkAccess();var e=x(this._observer.onError).call(this._observer,t);this._state=2,e===We&&E(e.e)},n.onCompleted=function(){this.checkAccess();var t=x(this._observer.onCompleted).call(this._observer);this._state=2,t===We&&E(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(dn),wn=qt.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new Ue}return qe(e,t),e.prototype.next=function(t){var e=this;this.queue.push(function(){e.observer.onNext(t)})},e.prototype.error=function(t){var e=this;this.queue.push(function(){e.observer.onError(t)})},e.prototype.completed=function(){var t=this;this.queue.push(function(){t.observer.onCompleted()})},e.prototype.ensureActive=function(){var t=!1,e=this;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(function(t){var n;if(!(e.queue.length>0))return void(e.isAcquired=!1);n=e.queue.shift();try{n()}catch(r){throw e.queue=[],e.hasFaulted=!0,r}t()}))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(bn),xn=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return qe(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(wn),En=qt.Observable=function(){function t(t){if(qt.config.longStackSupport&&Gt){try{throw new Error}catch(e){this.stack=e.stack.substring(e.stack.indexOf("\n")+1)}var n=this;this._subscribe=function(e){var r=e.onError.bind(e);return e.onError=function(t){a(t,n),r(t)},t.call(n,e)}}else this._subscribe=t}return yn=t.prototype,yn.subscribe=yn.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:vn(t,e,n))},yn.subscribeOnNext=function(t,e){return this._subscribe(vn("undefined"!=typeof e?function(n){t.call(e,n)}:t))},yn.subscribeOnError=function(t,e){return this._subscribe(vn(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},yn.subscribeOnCompleted=function(t,e){return this._subscribe(vn(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},t}(),_n=qt.ObservableBase=function(t){function e(t){return t&&It(t.dispose)?t:It(t)?Ie(t):Ge}function n(t,n){var r=n[0],o=n[1],i=x(o.subscribeCore).call(o,r);return i!==We||r.fail(We.e)?void r.setDisposable(e(i)):E(We.e)}function r(t){var e=new Lr(t),r=[e,this];return rn.scheduleRequired()?rn.scheduleWithState(r,n):n(null,r),e}function o(){t.call(this,r)}return qe(o,t),o.prototype.subscribeCore=Zt,o}(En),Sn=qt.internals.Enumerable=function(){},Cn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e,n){this.o=t,this.s=e,this.e=n,this.isStopped=!1}return qe(e,t),e.prototype.subscribeCore=function(t){var e,r=new Ue,o=nn.scheduleRecursiveWithState(this.sources[ee](),function(o,i){if(!e){var s=x(o.next).call(o);if(s===We)return t.onError(s.e);if(s.done)return t.onCompleted();var u=s.value;Lt(u)&&(u=Pn(u));var a=new Fe;r.setDisposable(a),a.setDisposable(u.subscribe(new n(t,i,o)))}});return new $e(r,o,Ie(function(){e=!0}))},n.prototype.onNext=function(t){this.isStopped||this.o.onNext(t)},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.s(this.e))},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e}(_n);Sn.prototype.concat=function(){return new Cn(this)};var kn=function(t){function e(e){this.sources=e,t.call(this)}return qe(e,t),e.prototype.subscribeCore=function(t){var e,n=this.sources[ee](),r=new Ue,o=nn.scheduleRecursiveWithState(null,function(o,i){if(!e){var s=x(n.next).call(n);if(s===We)return t.onError(s.e);if(s.done)return null!==o?t.onError(o):t.onCompleted();var u=s.value;Lt(u)&&(u=Pn(u));var a=new Fe;r.setDisposable(a),a.setDisposable(u.subscribe(function(e){t.onNext(e)},i,function(){t.onCompleted()}))}});return new $e(r,o,Ie(function(){e=!0}))},e}(_n);Sn.prototype.catchError=function(){return new kn(this)},Sn.prototype.catchErrorWhen=function(t){var e=this;return new $r(function(n){var r,o,i=new Ir,s=new Ir,u=t(i),a=u.subscribe(s),c=e[ee](),h=new Ue,f=nn.scheduleRecursive(function(t){if(!r){var e=x(c.next).call(c);if(e===We)return n.onError(e.e);if(e.done)return void(o?n.onError(o):n.onCompleted());var u=e.value;Lt(u)&&(u=Pn(u));var a=new Fe,f=new Fe;h.setDisposable(new $e(f,a)),a.setDisposable(u.subscribe(function(t){n.onNext(t)},function(e){f.setDisposable(s.subscribe(t,function(t){n.onError(t)},function(){n.onCompleted()})),i.onNext(e)},function(){n.onCompleted()}))}});return new $e(a,h,f,Ie(function(){r=!0}))})};var Nn=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return qe(e,t),e.prototype[ee]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?ne:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Sn),An=Sn.repeat=function(t,e){return new Nn(t,e)},On=function(t){function e(t,e,n){this.s=t,this.fn=e?se(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return qe(e,t),e.prototype[ee]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:ne},e}(Sn),Dn=Sn.of=function(t,e,n){return new On(t,e,n)};yn.observeOn=function(t){var e=this;return new $r(function(n){return e.subscribe(new xn(t,n))},e)},yn.subscribeOn=function(t){var e=this;return new $r(function(n){var r=new Fe,o=new Ue;return o.setDisposable(r),r.setDisposable(t.schedule(function(){o.setDisposable(new S(t,e.subscribe(n)))})),o},e)};var jn=function(t){function e(e){this.p=e,t.call(this)}return qe(e,t),e.prototype.subscribeCore=function(t){return this.p.then(function(e){t.onNext(e),t.onCompleted()},function(e){t.onError(e)}),Ge},e}(_n),Pn=En.fromPromise=function(t){return new jn(t)};yn.toPromise=function(t){if(t||(t=qt.config.Promise),!t)throw new Kt("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r,o=!1;e.subscribe(function(t){r=t,o=!0},n,function(){o&&t(r)})})};var qn=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],this.isStopped=!1}return qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=function(t){this.isStopped||this.a.push(t)},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onNext(this.a),this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e}(_n);yn.toArray=function(){return new qn(this)},En.create=En.createWithDisposable=function(t,e){return new $r(t,e)};var Rn=En.defer=function(t){return new $r(function(e){var n;try{n=t()}catch(r){return Kn(r).subscribe(e)}return Lt(n)&&(n=Pn(n)),n.subscribe(e)})},Tn=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.parent=e}function r(t,e){e.onCompleted()}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this);return e.run()},n.prototype.run=function(){return this.parent.scheduler.scheduleWithState(this.observer,r)},e}(_n),Wn=En.empty=function(t){return Ye(t)||(t=nn),new Tn(t)},Vn=function(t){function e(e,n,r){this.iterable=e,this.mapper=n,this.scheduler=r,t.call(this)}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new Mn(t,this);return e.run()},e}(_n),Mn=function(){function t(t,e){this.observer=t,this.parent=e}return t.prototype.run=function(){function t(t,e){try{var i=n.next()}catch(s){return r.onError(s)}if(i.done)return r.onCompleted();var u=i.value;if(o)try{u=o(u,t)}catch(s){return r.onError(s)}r.onNext(u),e(t+1)}var e=Object(this.parent.iterable),n=j(e),r=this.observer,o=this.parent.mapper;return this.parent.scheduler.scheduleRecursiveWithState(0,t)},t}(),$n=Math.pow(2,53)-1;k.prototype[ee]=function(){return new N(this._s)},N.prototype[ee]=function(){return this},N.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:ne},A.prototype[ee]=function(){return new O(this._a)},O.prototype[ee]=function(){return this},O.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:ne};var Ln=En.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!It(e))throw new Error("mapFn when provided must be a function");if(e)var o=se(e,n,2);return Ye(r)||(r=rn),new Vn(t,o,r)},zn=function(t){function e(e,n){this.args=e,this.scheduler=n,t.call(this)}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new R(t,this);return e.run()},e}(_n);R.prototype.run=function(){function t(t,o){r>t?(e.onNext(n[t]),o(t+1)):e.onCompleted()}var e=this.observer,n=this.parent.args,r=n.length;return this.parent.scheduler.scheduleRecursiveWithState(0,t)};var In=En.fromArray=function(t,e){return Ye(e)||(e=rn),new zn(t,e)};En.generate=function(t,e,n,r,o){return Ye(o)||(o=rn),new $r(function(i){var s=!0;return o.scheduleRecursiveWithState(t,function(t,o){var u,a;try{s?s=!1:t=n(t),u=e(t),u&&(a=r(t))}catch(c){return i.onError(c)}u?(i.onNext(a),o(t)):i.onCompleted()})})},En.of=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return new zn(e,rn)},En.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];return new zn(n,t)},En.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new $r(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},En.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new $r(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var Gn=function(t){function e(){t.call(this)}return qe(e,t),e.prototype.subscribeCore=function(t){return Ge},e}(_n),Bn=En.never=function(){return new Gn},Jn=function(t){function e(e,n){this.obj=e,this.keys=Object.keys(e),this.scheduler=n,t.call(this)}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new W(t,this);return e.run()},e}(_n);W.prototype.run=function(){function t(t,i){if(o>t){var s=r[t];e.onNext([s,n[s]]),i(t+1)}else e.onCompleted()}var e=this.observer,n=this.parent.obj,r=this.parent.keys,o=r.length;return this.parent.scheduler.scheduleRecursiveWithState(0,t)},En.pairs=function(t,e){return e||(e=rn),new Jn(t,e)};var Fn=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new Un(t,this);return e.run()},e}(_n),Un=function(){function t(t,e){this.observer=t,this.parent=e}return t.prototype.run=function(){function t(t,o){n>t?(r.onNext(e+t),o(t+1)):r.onCompleted()}var e=this.parent.start,n=this.parent.rangeCount,r=this.observer;return this.parent.scheduler.scheduleRecursiveWithState(0,t)},t}();En.range=function(t,e,n){return Ye(n)||(n=rn),new Fn(t,e,n)};var Qn=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new V(t,this);return e.run()},e}(_n);V.prototype.run=function(){function t(t,r){return(-1===t||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursiveWithState(this.parent.repeatCount,t)},En.repeat=function(t,e,n){return Ye(n)||(n=rn),new Qn(t,e,n)};var Hn=function(t){function e(e,n){this.value=e,this.scheduler=n,t.call(this)}function n(t,e){this.observer=t,this.parent=e}function r(t,e){var n=e[0],r=e[1];r.onNext(n),r.onCompleted()}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this);return e.run()},n.prototype.run=function(){return this.parent.scheduler.scheduleWithState([this.parent.value,this.observer],r)},e}(_n),Xn=(En["return"]=En.just=En.returnValue=function(t,e){return Ye(e)||(e=nn),new Hn(t,e)},function(t){function e(e,n){this.error=e,this.scheduler=n,t.call(this)}function n(t,e){this.o=t,this.p=e}function r(t,e){var n=e[0],r=e[1];r.onError(n)}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this);return e.run()},n.prototype.run=function(){return this.p.scheduler.scheduleWithState([this.p.error,this.o],r)},e}(_n)),Kn=En["throw"]=En.throwError=En.throwException=function(t,e){return Ye(e)||(e=nn),new Xn(t,e)};En.using=function(t,e){return new $r(function(n){var r,o,i=Ge;try{r=t(),r&&(i=r),o=e(r)}catch(s){return new $e(Kn(s).subscribe(n),i)}return new $e(o.subscribe(n),i)})},yn.amb=function(t){var e=this;return new $r(function(n){function r(){i||(i=s,c.dispose())}function o(){i||(i=u,a.dispose())}var i,s="L",u="R",a=new Fe,c=new Fe;return Lt(t)&&(t=Pn(t)),a.setDisposable(e.subscribe(function(t){r(),i===s&&n.onNext(t)},function(t){r(),i===s&&n.onError(t)},function(){r(),i===s&&n.onCompleted()})),c.setDisposable(t.subscribe(function(t){o(),i===u&&n.onNext(t)},function(t){o(),i===u&&n.onError(t)},function(){o(),i===u&&n.onCompleted()})),new $e(a,c)})},En.amb=function(){function t(t,e){return t.amb(e)}var e=Bn(),n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(var r=0,o=arguments.length;o>r;r++)n.push(arguments[r]);for(var r=0,o=n.length;o>r;r++)e=t(e,n[r]);return e},yn["catch"]=yn.catchError=yn.catchException=function(t){return"function"==typeof t?M(this,t):Yn([this,t])};var Yn=En.catchError=En["catch"]=En.catchException=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else for(var e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return Dn(t).catchError()};yn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Zn.apply(this,e)};var Zn=En.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=e.pop();return Array.isArray(e[0])&&(e=e[0]),new $r(function(t){function n(e){if(u[e]=!0,a||(a=u.every(Tt))){try{var n=r.apply(null,h)}catch(o){return t.onError(o)}t.onNext(n)}else c.filter(function(t,n){return n!==e}).every(Tt)&&t.onCompleted()}function o(e){c[e]=!0,c.every(Tt)&&t.onCompleted()}for(var i=e.length,s=function(){return!1},u=g(i,s),a=!1,c=g(i,s),h=new Array(i),f=new Array(i),l=0;i>l;l++)!function(r){var i=e[r],s=new Fe;Lt(i)&&(i=Pn(i)),s.setDisposable(i.subscribe(function(t){h[r]=t,n(r)},function(e){t.onError(e)},function(){o(r)})),f[r]=s}(l);return new $e(f)},this)};yn.concat=function(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return t.unshift(this),er.apply(null,t)};var tr=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){this.sources=t,this.o=e}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new n(this.sources,t);return e.run()},n.prototype.run=function(){var t,e=new Ue,n=this.sources,r=n.length,o=this.o,i=nn.scheduleRecursiveWithState(0,function(i,s){if(!t){if(i===r)return o.onCompleted();var u=n[i];Lt(u)&&(u=Pn(u));var a=new Fe;e.setDisposable(a),a.setDisposable(u.subscribe(function(t){o.onNext(t)},function(t){o.onError(t)},function(){s(i+1)}))}});return new $e(e,i,Ie(function(){t=!0}))},e}(_n),er=En.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;n>e;e++)t[e]=arguments[e]}return new tr(t)};yn.concatAll=yn.concatObservable=function(){return this.merge(1)};var nr=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new $e;return e.add(this.source.subscribe(new rr(t,this.maxConcurrent,e))),e},e}(_n),rr=function(){function t(t,e,n){this.o=t,this.max=e,this.g=n,this.done=!1,this.q=[],this.activeCount=0,this.isStopped=!1}function e(t,e){this.parent=t,this.sad=e,this.isStopped=!1}return t.prototype.handleSubscribe=function(t){var n=new Fe;this.g.add(n),Lt(t)&&(t=Pn(t)),n.setDisposable(t.subscribe(new e(this,n)))},t.prototype.onNext=function(t){this.isStopped||(this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t))},t.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,0===this.activeCount&&this.o.onCompleted())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e.prototype.onNext=function(t){this.isStopped||this.parent.o.onNext(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.parent.o.onError(t))},e.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var t=this.parent;t.g.remove(this.sad),t.q.length>0?t.handleSubscribe(t.q.shift()):(t.activeCount--,t.done&&0===t.activeCount&&t.o.onCompleted())}},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(t),!0)},t}();yn.merge=function(t){return"number"!=typeof t?or(this,t):new nr(this,t)};var or=En.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(Ye(arguments[0]))for(t=arguments[0],e=1;r>e;e++)n.push(arguments[e]);else for(t=nn,e=0;r>e;e++)n.push(arguments[e]);else for(t=nn,e=1;r>e;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),T(t,n).mergeAll()},ir=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.g=e,this.isStopped=!1,this.done=!1}function r(t,e,n){this.parent=t,this.g=e,this.sad=n,this.isStopped=!1}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new $e,r=new Fe;return e.add(r),r.setDisposable(this.source.subscribe(new n(t,e))),e},n.prototype.onNext=function(t){if(!this.isStopped){var e=new Fe;this.g.add(e),Lt(t)&&(t=Pn(t)),e.setDisposable(t.subscribe(new r(this,this.g,e)))}},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,1===this.g.length&&this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},r.prototype.onNext=function(t){this.isStopped||this.parent.o.onNext(t)},r.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.parent.o.onError(t))},r.prototype.onCompleted=function(){if(!this.isStopped){var t=this.parent;this.isStopped=!0,t.g.remove(this.sad),t.done&&1===t.g.length&&t.o.onCompleted()}},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(t),!0)},e}(_n);yn.mergeAll=yn.mergeObservable=function(){return new ir(this)};var sr=qt.CompositeError=function(t){this.name="NotImplementedError",this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};sr.prototype=Error.prototype,En.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}var r=T(null,t);return new $r(function(t){function e(){0===s.length?t.onCompleted():1===s.length?t.onError(s[0]):t.onError(new sr(s))}var n=new $e,o=new Fe,i=!1,s=[];return n.add(o),o.setDisposable(r.subscribe(function(r){var o=new Fe;n.add(o),Lt(r)&&(r=Pn(r)),o.setDisposable(r.subscribe(function(e){t.onNext(e)},function(t){s.push(t),n.remove(o),i&&1===n.length&&e()},function(){n.remove(o),i&&1===n.length&&e()}))},function(t){s.push(t),i=!0,1===n.length&&e()},function(){i=!0,1===n.length&&e()})),n})},yn.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return ur([this,t])};var ur=En.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else for(var e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return new $r(function(e){var n=0,r=new Ue,o=nn.scheduleRecursive(function(o){var i,s;n<t.length?(i=t[n++],Lt(i)&&(i=Pn(i)),s=new Fe,r.setDisposable(s),s.setDisposable(i.subscribe(e.onNext.bind(e),o,o))):e.onCompleted()});return new $e(r,o)})};yn.skipUntil=function(t){var e=this;return new $r(function(n){var r=!1,o=new $e(e.subscribe(function(t){r&&n.onNext(t)},function(t){n.onError(t)},function(){r&&n.onCompleted()}));Lt(t)&&(t=Pn(t));var i=new Fe;return o.add(i),i.setDisposable(t.subscribe(function(){r=!0,i.dispose()},function(t){n.onError(t)},function(){i.dispose()})),o},e)};var ar=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,this.isStopped=!1}function r(t,e){this.parent=t,this.id=e,this.isStopped=!1}return qe(e,t),e.prototype.subscribeCore=function(t){var e=new Ue,r=this.source.subscribe(new n(t,e));return new $e(r,e)},n.prototype.onNext=function(t){if(!this.isStopped){var e=new Fe,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),Lt(t)&&(t=Pn(t)),e.setDisposable(t.subscribe(new r(this,n)))}},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.stopped=!0,!this.hasLatest&&this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},r.prototype.onNext=function(t){this.isStopped||this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&this.parent.o.onError(t))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.isStopped&&this.parent.o.onCompleted()))},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(t),!0)},e}(_n);yn["switch"]=yn.switchLatest=function(){return new ar(this)};var cr=function(t){function e(e,n){this.source=e,this.other=Lt(n)?Pn(n):n,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return qe(e,t),e.prototype.subscribeCore=function(t){return new $e(this.source.subscribe(t),this.other.subscribe(new n(t)))},n.prototype.onNext=function(t){this.isStopped||this.o.onCompleted()},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){!this.isStopped&&(this.isStopped=!0)},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e}(_n);yn.takeUntil=function(t){return new cr(this,t)},yn.withLatestFrom=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=e.pop(),o=this;return Array.isArray(e[0])&&(e=e[0]),new $r(function(t){for(var n=e.length,i=g(n,$),s=!1,u=new Array(n),a=new Array(n+1),c=0;n>c;c++)!function(n){var r=e[n],o=new Fe;Lt(r)&&(r=Pn(r)),o.setDisposable(r.subscribe(function(t){u[n]=t,i[n]=!0,s=i.every(Tt)},function(e){t.onError(e)},Rt)),a[n]=o}(c);var h=new Fe;return h.setDisposable(o.subscribe(function(e){var n=[e].concat(u);if(s){var o=x(r).apply(null,n);return o===We?t.onError(o.e):void t.onNext(o)}},function(e){t.onError(e)},function(){t.onCompleted()})),a[n]=h,new $e(a)},this)},yn.zip=function(){if(Array.isArray(arguments[0]))return L.apply(this,arguments);for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=this,o=e.pop();return e.unshift(r),new $r(function(t){for(var n=e.length,i=g(n,z),s=g(n,$),u=new Array(n),a=0;n>a;a++)!function(n){var a=e[n],c=new Fe;Lt(a)&&(a=Pn(a)),c.setDisposable(a.subscribe(function(e){if(i[n].push(e),i.every(function(t){return t.length>0})){var u=i.map(function(t){return t.shift()}),a=x(o).apply(r,u);if(a===We)return t.onError(a.e);t.onNext(a)}else s.filter(function(t,e){return e!==n}).every(Tt)&&t.onCompleted()},function(e){t.onError(e)},function(){s[n]=!0,s.every(Tt)&&t.onCompleted()})),u[n]=c}(a);return new $e(u)},r)},En.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=e.shift();return r.zip.apply(r,e)},En.zipArray=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new $r(function(e){for(var n=t.length,r=g(n,I),o=g(n,$),i=new Array(n),s=0;n>s;s++)!function(n){i[n]=new Fe,i[n].setDisposable(t[n].subscribe(function(t){if(r[n].push(t),r.every(function(t){return t.length>0})){var i=r.map(function(t){return t.shift()});e.onNext(i)}else if(o.filter(function(t,e){return e!==n}).every(Tt))return e.onCompleted()},function(t){e.onError(t)},function(){o[n]=!0,o.every(Tt)&&e.onCompleted()}))}(s);return new $e(i)})},yn.asObservable=function(){var t=this;return new $r(function(e){return t.subscribe(e)},t)},yn.bufferWithCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).selectMany(function(t){return t.toArray()}).where(function(t){return t.length>0})},yn.dematerialize=function(){var t=this;return new $r(function(e){return t.subscribe(function(t){return t.accept(e)},function(t){e.onError(t)},function(){e.onCompleted()})},this)},yn.distinctUntilChanged=function(t,e){var n=this;return e||(e=Vt),new $r(function(r){var o,i=!1;return n.subscribe(function(n){var s=n;if(t&&(s=x(t)(n),s===We))return r.onError(s.e);if(i){var u=x(e)(o,s);if(u===We)return r.onError(u.e)}i&&u||(i=!0,o=s,r.onNext(n))},function(t){r.onError(t)},function(){r.onCompleted()})},this)};var hr=function(t){function e(e,n,r,o){this.source=e,this.t=!n||It(n)?vn(n||Rt,r||Rt,o||Rt):n,t.call(this)}function n(t,e){this.o=t,this.t=e,this.isStopped=!1}return qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.t))},n.prototype.onNext=function(t){if(!this.isStopped){var e=x(this.t.onNext).call(this.t,t);e===We&&this.o.onError(e.e),this.o.onNext(t)}},n.prototype.onError=function(t){if(!this.isStopped){this.isStopped=!0;var e=x(this.t.onError).call(this.t,t);if(e===We)return this.o.onError(e.e);this.o.onError(t)}},n.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var t=x(this.t.onCompleted).call(this.t);if(t===We)return this.o.onError(t.e);this.o.onCompleted()}},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e}(_n);yn["do"]=yn.tap=yn.doAction=function(t,e,n){return new hr(this,t,e,n)},yn.doOnNext=yn.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},yn.doOnError=yn.tapOnError=function(t,e){return this.tap(Rt,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},yn.doOnCompleted=yn.tapOnCompleted=function(t,e){return this.tap(Rt,null,"undefined"!=typeof e?function(){t.call(e)}:t)},yn["finally"]=yn.ensure=function(t){var e=this;return new $r(function(n){var r;try{r=e.subscribe(n)}catch(o){throw t(),o}return Ie(function(){try{r.dispose()}catch(e){throw e}finally{t()}})},this)},yn.finallyAction=function(t){return this.ensure(t)};var fr=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=Rt,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(t),!0)},e}(_n);yn.ignoreElements=function(){return new fr(this)},yn.materialize=function(){var t=this;return new $r(function(e){return t.subscribe(function(t){e.onNext(fn(t))},function(t){e.onNext(ln(t)),e.onCompleted()},function(){e.onNext(pn()),e.onCompleted()})},t)},yn.repeat=function(t){return An(this,t).concat()},yn.retry=function(t){return An(this,t).catchError()},yn.retryWhen=function(t){return An(this).catchErrorWhen(t)};var lr=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new G(t,this))},e}(_n);G.prototype.onNext=function(t){if(!this.isStopped){!this.hasValue&&(this.hasValue=!0);try{this.hasAccumulation?this.accumulation=this.accumulator(this.accumulation,t):(this.accumulation=this.hasSeed?this.accumulator(this.seed,t):t,this.hasAccumulation=!0)}catch(e){return this.observer.onError(e)}this.observer.onNext(this.accumulation)}},G.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.observer.onError(t))},G.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,!this.hasValue&&this.hasSeed&&this.observer.onNext(this.seed),this.observer.onCompleted())},G.prototype.dispose=function(){this.isStopped=!0},G.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(t),!0)},yn.scan=function(){var t,e,n=!1;return 2===arguments.length?(n=!0,t=arguments[0],e=arguments[1]):e=arguments[0],new lr(this,e,n,t)},yn.skipLast=function(t){if(0>t)throw new Xt;var e=this;return new $r(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&n.onNext(r.shift())},function(t){n.onError(t)},function(){n.onCompleted()})},e)},yn.startWith=function(){var t,e=0;arguments.length&&Ye(arguments[0])?(t=arguments[0],e=1):t=nn;for(var n=[],r=e,o=arguments.length;o>r;r++)n.push(arguments[r]);return Dn([In(n,t),this]).concat()},yn.takeLast=function(t){if(0>t)throw new Xt;var e=this;return new $r(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&r.shift()},function(t){n.onError(t)},function(){for(;r.length>0;)n.onNext(r.shift());n.onCompleted()})},e)},yn.takeLastBuffer=function(t){var e=this;return new $r(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&r.shift()},function(t){n.onError(t)},function(){n.onNext(r),n.onCompleted()})},e)},yn.windowWithCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),0>=t)throw new Xt;
if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),0>=e)throw new Xt;return new $r(function(r){function o(){var t=new Ir;a.push(t),r.onNext(Te(t,s))}var i=new Fe,s=new Qe(i),u=0,a=[];return o(),i.setDisposable(n.subscribe(function(n){for(var r=0,i=a.length;i>r;r++)a[r].onNext(n);var s=u-t+1;s>=0&&s%e===0&&a.shift().onCompleted(),++u%e===0&&o()},function(t){for(;a.length>0;)a.shift().onError(t);r.onError(t)},function(){for(;a.length>0;)a.shift().onCompleted();r.onCompleted()})),s},n)},yn.selectConcat=yn.concatMap=function(t,e,n){return It(t)&&It(e)?this.concatMap(function(n,r){var o=t(n,r);return Lt(o)&&(o=Pn(o)),(oe(o)||re(o))&&(o=Ln(o)),o.map(function(t,o){return e(n,t,r,o)})}):It(t)?B(this,t,n):B(this,function(){return t})},yn.concatMapObserver=yn.selectConcatObserver=function(t,e,n,r){var o=this,i=se(t,r,2),s=se(e,r,1),u=se(n,r,0);return new $r(function(t){var e=0;return o.subscribe(function(n){var r;try{r=i(n,e++)}catch(o){return void t.onError(o)}Lt(r)&&(r=Pn(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(r){return void t.onError(r)}Lt(n)&&(n=Pn(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(n){return void t.onError(n)}Lt(e)&&(e=Pn(e)),t.onNext(e),t.onCompleted()})},this).concatAll()},yn.defaultIfEmpty=function(t){var e=this;return t===i&&(t=null),new $r(function(n){var r=!1;return e.subscribe(function(t){r=!0,n.onNext(t)},function(t){n.onError(t)},function(){!r&&n.onNext(t),n.onCompleted()})},e)},F.prototype.push=function(t){var e=-1===J(this.set,t,this.comparer);return e&&this.set.push(t),e},yn.distinct=function(t,e){var n=this;return e||(e=Vt),new $r(function(r){var o=new F(e);return n.subscribe(function(e){var n=e;if(t)try{n=t(e)}catch(i){return void r.onError(i)}o.push(n)&&r.onNext(e)},function(t){r.onError(t)},function(){r.onCompleted()})},this)},yn.groupBy=function(t,e,n){return this.groupByUntil(t,e,Bn,n)},yn.groupByUntil=function(t,e,n,r){var o=this;return e||(e=Tt),r||(r=Vt),new $r(function(i){function s(t){return function(e){e.onError(t)}}var u=new Pr(0,r),a=new $e,c=new Qe(a);return a.add(o.subscribe(function(r){var o;try{o=t(r)}catch(h){return u.getValues().forEach(s(h)),void i.onError(h)}var f=!1,l=u.tryGetValue(o);if(l||(l=new Ir,u.set(o,l),f=!0),f){var p=new zr(o,l,c),d=new zr(o,l);try{duration=n(d)}catch(h){return u.getValues().forEach(s(h)),void i.onError(h)}i.onNext(p);var v=new Fe;a.add(v);var y=function(){u.remove(o)&&l.onCompleted(),a.remove(v)};v.setDisposable(duration.take(1).subscribe(Rt,function(t){u.getValues().forEach(s(t)),i.onError(t)},y))}var b;try{b=e(r)}catch(h){return u.getValues().forEach(s(h)),void i.onError(h)}l.onNext(b)},function(t){u.getValues().forEach(s(t)),i.onError(t)},function(){u.getValues().forEach(function(t){t.onCompleted()}),i.onCompleted()})),c},o)};var pr=function(t){function e(e,n,r){this.source=e,this.selector=se(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return t.call(this,e.selector(n,r,o),r,o)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,this.isStopped=!1}return qe(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},r.prototype.onNext=function(t){if(!this.isStopped){var e=x(this.selector)(t,this.i++,this.source);return e===We?this.o.onError(e.e):void this.o.onNext(e)}},r.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e}(_n);yn.map=yn.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof pr?this.internalMap(n,e):new pr(this,n,e)},yn.pluck=function(){var t=arguments,e=arguments.length;if(0===e)throw new Error("List of properties cannot be empty.");return this.map(function(n){for(var r=n,o=0;e>o;o++){var s=r[t[o]];if("undefined"==typeof s)return i;r=s}return r})},yn.selectMany=yn.flatMap=function(t,e,n){return It(t)&&It(e)?this.flatMap(function(n,r){var o=t(n,r);return Lt(o)&&(o=Pn(o)),(oe(o)||re(o))&&(o=Ln(o)),o.map(function(t,o){return e(n,t,r,o)})},n):It(t)?U(this,t,n):U(this,function(){return t})},yn.flatMapObserver=yn.selectManyObserver=function(t,e,n,r){var o=this;return new $r(function(i){var s=0;return o.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(o){return void i.onError(o)}Lt(n)&&(n=Pn(n)),i.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(o){return void i.onError(o)}Lt(n)&&(n=Pn(n)),i.onNext(n),i.onCompleted()},function(){var t;try{t=n.call(r)}catch(e){return void i.onError(e)}Lt(t)&&(t=Pn(t)),i.onNext(t),i.onCompleted()})},o).mergeAll()},yn.selectSwitch=yn.flatMapLatest=yn.switchMap=function(t,e){return this.select(t,e).switchLatest()};var dr=function(t){function e(e,n){this.source=e,this.skipCount=n,t.call(this)}function n(t,e){this.c=e,this.r=e,this.o=t,this.isStopped=!1}return qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.skipCount))},n.prototype.onNext=function(t){this.isStopped||(this.r<=0?this.o.onNext(t):this.r--)},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e}(_n);yn.skip=function(t){if(0>t)throw new Xt;return new dr(this,t)},yn.skipWhile=function(t,e){var n=this,r=se(t,e,3);return new $r(function(t){var e=0,o=!1;return n.subscribe(function(i){if(!o)try{o=!r(i,e++,n)}catch(s){return void t.onError(s)}o&&t.onNext(i)},function(e){t.onError(e)},function(){t.onCompleted()})},n)},yn.take=function(t,e){if(0>t)throw new Xt;if(0===t)return Wn(e);var n=this;return new $r(function(e){var r=t;return n.subscribe(function(t){r-->0&&(e.onNext(t),0>=r&&e.onCompleted())},function(t){e.onError(t)},function(){e.onCompleted()})},n)},yn.takeWhile=function(t,e){var n=this,r=se(t,e,3);return new $r(function(t){var e=0,o=!0;return n.subscribe(function(i){if(o){try{o=r(i,e++,n)}catch(s){return void t.onError(s)}o?t.onNext(i):t.onCompleted()}},function(e){t.onError(e)},function(){t.onCompleted()})},n)};var vr=function(t){function e(e,n,r){this.source=e,this.predicate=se(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return e.predicate(n,r,o)&&t.call(this,n,r,o)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,this.isStopped=!1}return qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},r.prototype.onNext=function(t){if(!this.isStopped){var e=x(this.predicate)(t,this.i++,this.source);return e===We?this.o.onError(e.e):void(e&&this.o.onNext(t))}},r.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},r.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},r.prototype.dispose=function(){this.isStopped=!0},r.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e}(_n);yn.filter=yn.where=function(t,e){return this instanceof vr?this.internalFilter(t,e):new vr(this,t,e)},yn.aggregate=function(){var t,e,n=!1,r=this;return 2===arguments.length?(n=!0,e=arguments[0],t=arguments[1]):t=arguments[0],new $r(function(o){var i,s,u;return r.subscribe(function(r){!u&&(u=!0);try{i?s=t(s,r):(s=n?t(e,r):r,i=!0)}catch(a){return o.onError(a)}},function(t){o.onError(t)},function(){u&&o.onNext(s),!u&&n&&o.onNext(e),!u&&!n&&o.onError(new Qt),o.onCompleted()})},r)};var yr=function(t){function e(e,n,r,o){this.source=e,this.acc=n,this.hasSeed=r,this.seed=o,t.call(this)}function n(t,e){this.o=t,this.acc=e.acc,this.hasSeed=e.hasSeed,this.seed=e.seed,this.hasAccumulation=!1,this.result=null,this.hasValue=!1,this.isStopped=!1}return qe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},n.prototype.onNext=function(t){this.isStopped||(!this.hasValue&&(this.hasValue=!0),this.hasAccumulation?this.result=x(this.acc)(this.result,t):(this.result=this.hasSeed?x(this.acc)(this.seed,t):t,this.hasAccumulation=!0),this.result===We&&this.o.onError(this.result.e))},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.hasValue&&this.o.onNext(this.result),!this.hasValue&&this.hasSeed&&this.o.onNext(this.seed),!this.hasValue&&!this.hasSeed&&this.o.onError(new Qt),this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e}(_n);yn.reduce=function(t){var e=!1;if(2===arguments.length){e=!0;var n=arguments[1]}return new yr(this,t,e,n)},yn.some=function(t,e){var n=this;return t?n.filter(t,e).some():new $r(function(t){return n.subscribe(function(){t.onNext(!0),t.onCompleted()},function(e){t.onError(e)},function(){t.onNext(!1),t.onCompleted()})},n)},yn.any=function(){return this.some.apply(this,arguments)},yn.isEmpty=function(){return this.any().map(zt)},yn.every=function(t,e){return this.filter(function(e){return!t(e)},e).some().map(zt)},yn.all=function(){return this.every.apply(this,arguments)},yn.includes=function(t,e){function n(t,e){return 0===t&&0===e||t===e||isNaN(t)&&isNaN(e)}var r=this;return new $r(function(o){var i=0,s=+e||0;return Math.abs(s)===1/0&&(s=0),0>s?(o.onNext(!1),o.onCompleted(),Ge):r.subscribe(function(e){i++>=s&&n(e,t)&&(o.onNext(!0),o.onCompleted())},function(t){o.onError(t)},function(){o.onNext(!1),o.onCompleted()})},this)},yn.contains=function(t,e){yn.includes(t,e)},yn.count=function(t,e){return t?this.filter(t,e).count():this.reduce(function(t){return t+1},0)},yn.indexOf=function(t,e){var n=this;return new $r(function(r){var o=0,i=+e||0;return Math.abs(i)===1/0&&(i=0),0>i?(r.onNext(-1),r.onCompleted(),Ge):n.subscribe(function(e){o>=i&&e===t&&(r.onNext(o),r.onCompleted()),o++},function(t){r.onError(t)},function(){r.onNext(-1),r.onCompleted()})},n)},yn.sum=function(t,e){return t&&It(t)?this.map(t,e).sum():this.reduce(function(t,e){return t+e},0)},yn.minBy=function(t,e){return e||(e=Mt),Q(this,t,function(t,n){return-1*e(t,n)})},yn.min=function(t){return this.minBy(Tt,t).map(function(t){return H(t)})},yn.maxBy=function(t,e){return e||(e=Mt),Q(this,t,e)},yn.max=function(t){return this.maxBy(Tt,t).map(function(t){return H(t)})},yn.average=function(t,e){return t&&It(t)?this.map(t,e).average():this.reduce(function(t,e){return{sum:t.sum+e,count:t.count+1}},{sum:0,count:0}).map(function(t){if(0===t.count)throw new Qt;return t.sum/t.count})},yn.sequenceEqual=function(t,e){var n=this;return e||(e=Vt),new $r(function(r){var o=!1,i=!1,s=[],u=[],a=n.subscribe(function(t){var n,o;if(u.length>0){o=u.shift();try{n=e(o,t)}catch(a){return void r.onError(a)}n||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){o=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});(oe(t)||re(t))&&(t=Ln(t)),Lt(t)&&(t=Pn(t));var c=t.subscribe(function(t){var n;if(s.length>0){var i=s.shift();try{n=e(i,t)}catch(a){return void r.onError(a)}n||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){i=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});return new $e(a,c)},n)},yn.elementAt=function(t){return X(this,t,!1)},yn.elementAtOrDefault=function(t,e){return X(this,t,!0,e)},yn.single=function(t,e){return t&&It(t)?this.where(t,e).single():K(this,!1)},yn.singleOrDefault=function(t,e,n){return t&&It(t)?this.filter(t,n).singleOrDefault(null,e):K(this,!0,e)},yn.first=function(t,e){return t?this.where(t,e).first():Y(this,!1)},yn.firstOrDefault=function(t,e,n){return t?this.where(t).firstOrDefault(null,e):Y(this,!0,e)},yn.last=function(t,e){return t?this.where(t,e).last():Z(this,!1)},yn.lastOrDefault=function(t,e,n){return t?this.where(t,n).lastOrDefault(null,e):Z(this,!0,e)},yn.find=function(t,e){return tt(this,t,e,!1)},yn.findIndex=function(t,e){return tt(this,t,e,!0)},yn.toSet=function(){if("undefined"==typeof At.Set)throw new TypeError;var t=this;return new $r(function(e){var n=new At.Set;return t.subscribe(function(t){n.add(t)},function(t){e.onError(t)},function(){e.onNext(n),e.onCompleted()})},t)},yn.toMap=function(t,e){if("undefined"==typeof At.Map)throw new TypeError;var n=this;return new $r(function(r){var o=new At.Map;return n.subscribe(function(n){var i;try{i=t(n)}catch(s){return void r.onError(s)}var u=n;if(e)try{u=e(n)}catch(s){return void r.onError(s)}o.set(i,u)},function(t){r.onError(t)},function(){r.onNext(o),r.onCompleted()})},n)};var br="function",mr="throw",Ae=qt.internals.isObject,gr=qt.spawn=function(t){var e=st(t);return function(n){function r(t,e){an.schedule(n.bind(i,t,e))}function o(t,e){var n;if(arguments.length>2)for(var e=[],u=1,a=arguments.length;a>u;u++)e.push(arguments[u]);if(t)try{n=s[mr](t)}catch(c){return r(c)}if(!t)try{n=s.next(e)}catch(c){return r(c)}if(n.done)return r(null,n.value);if(n.value=et(n.value,i),typeof n.value!==br)o(new TypeError("Rx.spawn only supports a function, Promise, Observable, Object or Array."));else{var h=!1;try{n.value.call(i,function(){h||(h=!0,o.apply(i,arguments))})}catch(c){an.schedule(function(){h||(h=!0,o.call(i,c))})}}}var i=this,s=t;if(e){for(var u=[],a=0,c=arguments.length;c>a;a++)u.push(arguments[a]);var c=u.length,h=c&&typeof u[c-1]===br;n=h?u.pop():at,s=t.apply(this,u)}else n=n||at;o()}};En.start=function(t,e,n){return wr(t,e,n)()};var wr=En.toAsync=function(t,e,n){return Ye(n)||(n=an),function(){var r=arguments,o=new Gr;return n.schedule(function(){var n;try{n=t.apply(e,r)}catch(i){return void o.onError(i)}o.onNext(n),o.onCompleted()}),o.asObservable()}};En.fromCallback=function(t,e,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return new $r(function(r){function i(){for(var t=arguments.length,o=new Array(t),i=0;t>i;i++)o[i]=arguments[i];if(n){try{o=n.apply(e,o)}catch(s){return r.onError(s)}r.onNext(o)}else o.length<=1?r.onNext.apply(r,o):r.onNext(o);r.onCompleted()}o.push(i),t.apply(e,o)}).publishLast().refCount()}},En.fromNodeCallback=function(t,e,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return new $r(function(r){function i(t){if(t)return void r.onError(t);for(var o=arguments.length,i=[],s=1;o>s;s++)i[s-1]=arguments[s];if(n){try{i=n.apply(e,i)}catch(u){return r.onError(u)}r.onNext(i)}else i.length<=1?r.onNext.apply(r,i):r.onNext(i);r.onCompleted()}o.push(i),t.apply(e,o)}).publishLast().refCount()}},qt.config.useNativeEvents=!1,En.fromEvent=function(t,e,n){return t.addListener?xr(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):qt.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new $r(function(r){return ht(t,e,function(t){var e=t;if(n)try{e=n(arguments)}catch(o){return r.onError(o)}r.onNext(e)})}).publish().refCount():xr(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var xr=En.fromEventPattern=function(t,e,n){return new $r(function(r){function o(t){var e=t;if(n)try{e=n(arguments)}catch(o){return r.onError(o)}r.onNext(e)}var i=t(o);return Ie(function(){e&&e(o,i)})}).publish().refCount()};En.startAsync=function(t){var e;try{e=t()}catch(n){return Kn(n)}return Pn(e)};var Er=function(t){function e(t){var e=this.source.publish(),n=e.subscribe(t),r=Ge,o=this.pauser.distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=Ge)});return new $e(n,r,o)}function n(n,r){this.source=n,this.controller=new Ir,r&&r.subscribe?this.pauser=this.controller.merge(r):this.pauser=this.controller,t.call(this,e,n)}return qe(n,t),n.prototype.pause=function(){this.controller.onNext(!1)},n.prototype.resume=function(){this.controller.onNext(!0)},n}(En);yn.pausable=function(t){return new Er(this,t)};var _r=function(t){function e(t){function e(){for(;r.length>0;)t.onNext(r.shift())}var n,r=[],o=ft(this.source,this.pauser.distinctUntilChanged().startWith(!1),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){n!==i&&o.shouldFire!=n?(n=o.shouldFire,o.shouldFire&&e()):(n=o.shouldFire,o.shouldFire?t.onNext(o.data):r.push(o.data))},function(n){e(),t.onError(n)},function(){e(),t.onCompleted()});return o}function n(n,r){this.source=n,this.controller=new Ir,r&&r.subscribe?this.pauser=this.controller.merge(r):this.pauser=this.controller,t.call(this,e,n)}return qe(n,t),n.prototype.pause=function(){this.controller.onNext(!1)},n.prototype.resume=function(){this.controller.onNext(!0)},n}(En);yn.pausableBuffered=function(t){return new _r(this,t)};var Sr=function(t){function e(t){return this.source.subscribe(t)}function n(n,r,o){t.call(this,e,n),this.subject=new Cr(r,o),this.source=n.multicast(this.subject).refCount()}return qe(n,t),n.prototype.request=function(t){return this.subject.request(null==t?-1:t)},n}(En),Cr=function(t){function e(t){return this.subject.subscribe(t)}function n(n,r){null==n&&(n=!0),t.call(this,e),this.subject=new Ir,this.enableQueue=n,this.queue=n?[]:null,this.requestedCount=0,this.requestedDisposable=Ge,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=r||rn}return qe(n,t),Re(n.prototype,dn,{onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(hn.createOnCompleted()):this.subject.onCompleted()},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(hn.createOnError(t)):this.subject.onError(t)},onNext:function(t){var e=!1;0===this.requestedCount?this.enableQueue&&this.queue.push(hn.createOnNext(t)):(-1!==this.requestedCount&&0===this.requestedCount--&&this.disposeCurrentRequest(),e=!0),e&&this.subject.onNext(t)},_processRequest:function(t){if(this.enableQueue){for(;this.queue.length>=t&&t>0||this.queue.length>0&&"N"!==this.queue[0].kind;){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return{numberOfItems:t,returnValue:0!==this.queue.length}}return{numberOfItems:t,returnValue:!1}},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.scheduleWithState(t,function(t,n){var r=e._processRequest(n),o=r.numberOfItems;r.returnValue||(e.requestedCount=o,e.requestedDisposable=Ie(function(){e.requestedCount=0}))}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable.dispose(),this.requestedDisposable=Ge}}),n}(En);yn.controlled=function(t,e){return t&&Ye(t)&&(e=t,t=!0),null==t&&(t=!0),new Sr(this,t,e)};var kr=function(t){function e(t){this.subscription=this.source.subscribe(new r(t,this,this.subscription));var e=this;return an.schedule(function(){e.source.request(1)}),this.subscription}function n(n){t.call(this,e,n),this.source=n}qe(n,t);var r=function(t){function e(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r}qe(e,t);var n=e.prototype;return n.completed=function(){this.observer.onCompleted(),this.dispose()},n.error=function(t){this.observer.onError(t),this.dispose()},n.next=function(t){this.observer.onNext(t);var e=this;an.schedule(function(){e.observable.source.request(1)})},n.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),t.prototype.dispose.call(this)},e}(bn);return n}(En);Sr.prototype.stopAndWait=function(){return new kr(this)};var Nr=function(t){function e(t){this.subscription=this.source.subscribe(new r(t,this,this.subscription));var e=this;return an.schedule(function(){e.source.request(e.windowSize)}),this.subscription}function n(n,r){t.call(this,e,n),this.source=n,this.windowSize=r}qe(n,t);var r=function(t){function e(t,e,n){this.observer=t,this.observable=e,this.cancel=n,this.received=0}qe(e,t);var n=e.prototype;return n.completed=function(){this.observer.onCompleted(),this.dispose()},n.error=function(t){this.observer.onError(t),this.dispose()},n.next=function(t){if(this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received){var e=this;an.schedule(function(){e.observable.source.request(e.observable.windowSize)})}},n.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),t.prototype.dispose.call(this)},e}(bn);return n}(En);Sr.prototype.windowed=function(t){return new Nr(this,t)},yn.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(String(e))&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t},yn.multicast=function(t,e){var n=this;return"function"==typeof t?new $r(function(r){var o=n.multicast(t());return new $e(e(o).subscribe(r),o.connect())},n):new jr(n,t)},yn.publish=function(t){return t&&It(t)?this.multicast(function(){return new Ir},t):this.multicast(new Ir)},yn.share=function(){return this.publish().refCount()},yn.publishLast=function(t){return t&&It(t)?this.multicast(function(){return new Gr},t):this.multicast(new Gr)},yn.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new Or(e)},t):this.multicast(new Or(t))},yn.shareValue=function(t){return this.publishValue(t).refCount()},yn.replay=function(t,e,n,r){return t&&It(t)?this.multicast(function(){return new Dr(e,n,r)},t):this.multicast(new Dr(e,n,r))},yn.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var Ar=function(t,e){this.subject=t,this.observer=e};Ar.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var t=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(t,1),this.observer=null}};var Or=qt.BehaviorSubject=function(t){function e(t){return Je(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),Ge):(this.observers.push(t),t.onNext(this.value),new Ar(this,t))}function n(n){t.call(this,e),this.value=n,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return qe(n,t),Re(n.prototype,dn,{getValue:function(){if(Je(this),this.hasError)throw this.error;return this.value},hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(Je(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=u(this.observers),n=e.length;n>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Je(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=u(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Je(this),!this.isStopped){this.value=t;for(var e=0,n=u(this.observers),r=n.length;r>e;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.exception=null}}),n}(En),Dr=qt.ReplaySubject=function(t){function e(t,e){return Ie(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function n(t){var n=new wn(this.scheduler,t),r=e(this,n);Je(this),this._trim(this.scheduler.now()),this.observers.push(n);for(var o=0,i=this.q.length;i>o;o++)n.onNext(this.q[o].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r}function r(e,r,i){this.bufferSize=null==e?o:e,this.windowSize=null==r?o:r,this.scheduler=i||rn,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this,n)}var o=Math.pow(2,53)-1;return qe(r,t),Re(r.prototype,dn.prototype,{hasObservers:function(){return this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(Je(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=u(this.observers),o=r.length;o>n;n++){var i=r[n];i.onNext(t),i.ensureActive()}}},onError:function(t){if(Je(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=u(this.observers),o=r.length;o>n;n++){var i=r[n];i.onError(t),i.ensureActive()}this.observers.length=0}},onCompleted:function(){if(Je(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=u(this.observers),r=n.length;r>e;e++){var o=n[e];o.onCompleted(),o.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),r}(En),jr=qt.ConnectableObservable=function(t){function e(e,n){var r,o=!1,i=e.asObservable();this.connect=function(){return o||(o=!0,r=new $e(i.subscribe(n),Ie(function(){o=!1}))),r},t.call(this,function(t){return n.subscribe(t)})}return qe(e,t),e.prototype.refCount=function(){var t,e=0,n=this;return new $r(function(r){var o=1===++e,i=n.subscribe(r);return o&&(t=n.connect()),function(){i.dispose(),0===--e&&t.dispose()}})},e}(En);yn.singleInstance=function(){function t(){return r||(r=!0,e=n["finally"](function(){r=!1}).publish().refCount()),e}var e,n=this,r=!1;return new $r(function(e){return t().subscribe(e)})};var Pr=function(){function t(t){if(0===(1&t))return 2===t;for(var e=Math.sqrt(t),n=3;e>=n;){if(t%n===0)return!1;n+=2}return!0}function e(e){var n,r,o;for(n=0;n<u.length;++n)if(r=u[n],r>=e)return r;for(o=1|e;o<u[u.length-1];){if(t(o))return o;o+=2}return e}function n(t){var e=757602046;if(!t.length)return e;for(var n=0,r=t.length;r>n;n++){var o=t.charCodeAt(n);e=(e<<5)-e+o,e&=e}return e}function r(t){var e=668265261;return t=61^t^t>>>16,t+=t<<3,t^=t>>>4,t*=e,t^=t>>>15}function o(){return{key:null,value:null,next:0,hashCode:0}}function s(t,e){if(0>t)throw new Xt;t>0&&this._initialize(t),this.comparer=e||Vt,this.freeCount=0,this.size=0,this.freeList=-1}var u=[1,3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143,4194301,8388593,16777213,33554393,67108859,134217689,268435399,536870909,1073741789,2147483647],a="no such key",c="duplicate key",h=function(){var t=0;return function(e){if(null==e)throw new Error(a);if("string"==typeof e)return n(e);if("number"==typeof e)return r(e);if("boolean"==typeof e)return e===!0?1:0;if(e instanceof Date)return r(e.valueOf());if(e instanceof RegExp)return n(e.toString());if("function"==typeof e.valueOf){var o=e.valueOf();if("number"==typeof o)return r(o);if("string"==typeof o)return n(o)}if(e.hashCode)return e.hashCode();var i=17*t++;return e.hashCode=function(){return i},i}}(),f=s.prototype;return f._initialize=function(t){var n,r=e(t);for(this.buckets=new Array(r),this.entries=new Array(r),n=0;r>n;n++)this.buckets[n]=-1,this.entries[n]=o();this.freeList=-1},f.add=function(t,e){this._insert(t,e,!0)},f._insert=function(t,e,n){this.buckets||this._initialize(0);for(var r,o=2147483647&h(t),i=o%this.buckets.length,s=this.buckets[i];s>=0;s=this.entries[s].next)if(this.entries[s].hashCode===o&&this.comparer(this.entries[s].key,t)){if(n)throw new Error(c);return void(this.entries[s].value=e)}this.freeCount>0?(r=this.freeList,this.freeList=this.entries[r].next,--this.freeCount):(this.size===this.entries.length&&(this._resize(),i=o%this.buckets.length),r=this.size,++this.size),this.entries[r].hashCode=o,this.entries[r].next=this.buckets[i],this.entries[r].key=t,this.entries[r].value=e,this.buckets[i]=r},f._resize=function(){var t=e(2*this.size),n=new Array(t);for(i=0;i<n.length;++i)n[i]=-1;var r=new Array(t);for(i=0;i<this.size;++i)r[i]=this.entries[i];for(var i=this.size;t>i;++i)r[i]=o();for(var s=0;s<this.size;++s){var u=r[s].hashCode%t;r[s].next=n[u],n[u]=s}this.buckets=n,this.entries=r},f.remove=function(t){if(this.buckets)for(var e=2147483647&h(t),n=e%this.buckets.length,r=-1,o=this.buckets[n];o>=0;o=this.entries[o].next){if(this.entries[o].hashCode===e&&this.comparer(this.entries[o].key,t))return 0>r?this.buckets[n]=this.entries[o].next:this.entries[r].next=this.entries[o].next,this.entries[o].hashCode=-1,this.entries[o].next=this.freeList,this.entries[o].key=null,this.entries[o].value=null,this.freeList=o,++this.freeCount,!0;r=o}return!1},f.clear=function(){var t,e;if(!(this.size<=0)){for(t=0,e=this.buckets.length;e>t;++t)this.buckets[t]=-1;for(t=0;t<this.size;++t)this.entries[t]=o();this.freeList=-1,this.size=0}},f._findEntry=function(t){if(this.buckets)for(var e=2147483647&h(t),n=this.buckets[e%this.buckets.length];n>=0;n=this.entries[n].next)if(this.entries[n].hashCode===e&&this.comparer(this.entries[n].key,t))return n;return-1},f.count=function(){return this.size-this.freeCount},f.tryGetValue=function(t){var e=this._findEntry(t);return e>=0?this.entries[e].value:i},f.getValues=function(){var t=0,e=[];if(this.entries)for(var n=0;n<this.size;n++)this.entries[n].hashCode>=0&&(e[t++]=this.entries[n].value);return e},f.get=function(t){var e=this._findEntry(t);if(e>=0)return this.entries[e].value;throw new Error(a)},f.set=function(t,e){this._insert(t,e,!1)},f.containskey=function(t){return this._findEntry(t)>=0},s}();yn.join=function(t,e,n,r){var o=this;return new $r(function(i){var s=new $e,u=!1,a=!1,c=0,h=0,f=new Pr,l=new Pr;return s.add(o.subscribe(function(t){var n=c++,o=new Fe;f.add(n,t),s.add(o);var a,h=function(){f.remove(n)&&0===f.count()&&u&&i.onCompleted(),s.remove(o)};try{a=e(t)}catch(p){return void i.onError(p)}o.setDisposable(a.take(1).subscribe(Rt,i.onError.bind(i),h)),l.getValues().forEach(function(e){var n;try{n=r(t,e)}catch(o){return void i.onError(o)}i.onNext(n)})},i.onError.bind(i),function(){u=!0,(a||0===f.count())&&i.onCompleted()})),s.add(t.subscribe(function(t){var e=h++,o=new Fe;l.add(e,t),s.add(o);var u,c=function(){l.remove(e)&&0===l.count()&&a&&i.onCompleted(),s.remove(o)};try{u=n(t)}catch(p){return void i.onError(p)}o.setDisposable(u.take(1).subscribe(Rt,i.onError.bind(i),c)),f.getValues().forEach(function(e){var n;try{n=r(e,t)}catch(o){return void i.onError(o)}i.onNext(n)})},i.onError.bind(i),function(){a=!0,(u||0===l.count())&&i.onCompleted()})),s},o)},yn.groupJoin=function(t,e,n,r){var o=this;return new $r(function(i){function s(t){return function(e){e.onError(t)}}var u=new $e,a=new Qe(u),c=new Pr,h=new Pr,f=0,l=0;return u.add(o.subscribe(function(t){var n=new Ir,o=f++;c.add(o,n);var l;try{l=r(t,Te(n,a))}catch(p){return c.getValues().forEach(s(p)),void i.onError(p)}i.onNext(l),h.getValues().forEach(function(t){n.onNext(t)});var d=new Fe;u.add(d);var v,y=function(){c.remove(o)&&n.onCompleted(),u.remove(d)};try{v=e(t)}catch(p){return c.getValues().forEach(s(p)),void i.onError(p)}d.setDisposable(v.take(1).subscribe(Rt,function(t){c.getValues().forEach(s(t)),i.onError(t)},y))},function(t){c.getValues().forEach(s(t)),i.onError(t)},i.onCompleted.bind(i))),u.add(t.subscribe(function(t){var e=l++;h.add(e,t);var r=new Fe;u.add(r);var o,a=function(){h.remove(e),u.remove(r)};try{o=n(t)}catch(f){return c.getValues().forEach(s(f)),void i.onError(f)}r.setDisposable(o.take(1).subscribe(Rt,function(t){c.getValues().forEach(s(t)),i.onError(t)},a)),c.getValues().forEach(function(e){e.onNext(t)})},function(t){c.getValues().forEach(s(t)),i.onError(t)})),a},o)},yn.buffer=function(t,e){return this.window.apply(this,arguments).selectMany(function(t){return t.toArray()})},yn.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?pt.call(this,t):"function"==typeof t?dt.call(this,t):lt.call(this,t,e)},yn.pairwise=function(){var t=this;return new $r(function(e){var n,r=!1;return t.subscribe(function(t){r?e.onNext([n,t]):r=!0,n=t},e.onError.bind(e),e.onCompleted.bind(e))},t)},yn.partition=function(t,e){return[this.filter(t,e),this.filter(function(n,r,o){return!t.call(e,n,r,o)})]};var qr=function(t){function e(t,e){
this.c=t,this.s=e}return qe(e,t),e.prototype[ee]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},e}(Sn);yn.letBind=yn.let=function(t){return t(this)},En["if"]=En.ifThen=function(t,e,n){return Rn(function(){return n||(n=Wn()),Lt(e)&&(e=Pn(e)),Lt(n)&&(n=Pn(n)),"function"==typeof n.now&&(n=Wn(n)),t()?e:n})},En["for"]=En.forIn=function(t,e,n){return Dn(t,e,n).concat()};var Rr=En["while"]=En.whileDo=function(t,e){return Lt(e)&&(e=Pn(e)),vt(t,e).concat()};yn.doWhile=function(t){return er([this,Rr(t,this)])},En["case"]=En.switchCase=function(t,e,n){return Rn(function(){Lt(n)&&(n=Pn(n)),n||(n=Wn()),"function"==typeof n.now&&(n=Wn(n));var r=e[t()];return Lt(r)&&(r=Pn(r)),r||n})},yn.expand=function(t,e){Ye(e)||(e=nn);var n=this;return new $r(function(r){var o=[],i=new Ue,s=new $e(i),u=0,a=!1,c=function(){var n=!1;o.length>0&&(n=!a,a=!0),n&&i.setDisposable(e.scheduleRecursive(function(e){var n;if(!(o.length>0))return void(a=!1);n=o.shift();var i=new Fe;s.add(i),i.setDisposable(n.subscribe(function(e){r.onNext(e);var n=null;try{n=t(e)}catch(i){r.onError(i)}o.push(n),u++,c()},r.onError.bind(r),function(){s.remove(i),u--,0===u&&r.onCompleted()})),e()}))};return o.push(n),u++,c(),s},this)},En.forkJoin=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else for(var e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return new $r(function(e){var n=t.length;if(0===n)return e.onCompleted(),Ge;for(var r=new $e,o=!1,i=new Array(n),s=new Array(n),u=new Array(n),a=0;n>a;a++)!function(a){var c=t[a];Lt(c)&&(c=Pn(c)),r.add(c.subscribe(function(t){o||(i[a]=!0,u[a]=t)},function(t){o=!0,e.onError(t),r.dispose()},function(){if(!o){if(!i[a])return void e.onCompleted();s[a]=!0;for(var t=0;n>t;t++)if(!s[t])return;o=!0,e.onNext(u),e.onCompleted()}}))}(a);return r})},yn.forkJoin=function(t,e){var n=this;return new $r(function(r){var o,i,s=!1,u=!1,a=!1,c=!1,h=new Fe,f=new Fe;return Lt(t)&&(t=Pn(t)),h.setDisposable(n.subscribe(function(t){a=!0,o=t},function(t){f.dispose(),r.onError(t)},function(){if(s=!0,u)if(a)if(c){var t;try{t=e(o,i)}catch(n){return void r.onError(n)}r.onNext(t),r.onCompleted()}else r.onCompleted();else r.onCompleted()})),f.setDisposable(t.subscribe(function(t){c=!0,i=t},function(t){h.dispose(),r.onError(t)},function(){if(u=!0,s)if(a)if(c){var t;try{t=e(o,i)}catch(n){return void r.onError(n)}r.onNext(t),r.onCompleted()}else r.onCompleted();else r.onCompleted()})),new $e(h,f)},n)},yn.manySelect=yn.extend=function(t,e){Ye(e)||(e=nn);var n=this;return Rn(function(){var r;return n.map(function(t){var e=new Tr(t);return r&&r.onNext(t),r=e,e}).tap(Rt,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var Tr=function(t){function e(t){var e=this,n=new $e;return n.add(rn.schedule(function(){t.onNext(e.head),n.add(e.tail.mergeAll().subscribe(t))})),n}function n(n){t.call(this,e),this.head=n,this.tail=new Gr}return qe(n,t),Re(n.prototype,dn,{onCompleted:function(){this.onNext(En.empty())},onError:function(t){this.onNext(En.throwError(t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),n}(En),Wr=At.Map||function(){function t(){this._keys=[],this._values=[]}return t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1!==e?this._values[e]:i},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);-1!==n&&(this._values[n]=e),this._values[this._keys.push(t)-1]=e},t.prototype.forEach=function(t,e){for(var n=0,r=this._keys.length;r>n;n++)t.call(e,this._values[n],this._keys[n])},t}();yt.prototype.and=function(t){return new yt(this.patterns.concat(t))},yt.prototype.thenDo=function(t){return new bt(this,t)},bt.prototype.activate=function(t,e,n){for(var r=this,o=[],i=0,s=this.expression.patterns.length;s>i;i++)o.push(mt(t,this.expression.patterns[i],e.onError.bind(e)));var u=new gt(o,function(){var t;try{t=r.selector.apply(r,arguments)}catch(n){return void e.onError(n)}e.onNext(t)},function(){for(var t=0,e=o.length;e>t;t++)o[t].removeActivePlan(u);n(u)});for(i=0,s=o.length;s>i;i++)o[i].addActivePlan(u);return u},gt.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},gt.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;e>t;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],o=!1;for(t=0,e=this.joinObserverArray.length;e>t;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(o=!0);if(o)this.onCompleted();else{this.dequeue();var i=[];for(t=0,e=r.length;t<r.length;t++)i.push(r[t].value);this.onNext.apply(this,i)}}};var Vr=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new Fe,this.isDisposed=!1}qe(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.exception);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;r>n;n++)e[n].match()}},n.error=Rt,n.completed=Rt,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(bn);yn.and=function(t){return new yt([this,t])},yn.thenDo=function(t){return new yt([this]).thenDo(t)},En.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new $r(function(e){var n=[],r=new Wr,o=vn(function(t){e.onNext(t)},function(t){r.forEach(function(e){e.onError(t)}),e.onError(t)},function(t){e.onCompleted()});try{for(var i=0,s=t.length;s>i;i++)n.push(t[i].activate(r,o,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(u){Kn(u).subscribe(e)}var a=new $e;return r.forEach(function(t){t.subscribe(),a.add(t)}),a})};var Mr=En.interval=function(t,e){return _t(t,t,Ye(e)?e:an)};En.timer=function(t,e,n){var r;return Ye(n)||(n=an),e!==i&&"number"==typeof e?r=e:Ye(e)&&(n=e),t instanceof Date&&r===i?wt(t.getTime(),n):t instanceof Date&&r!==i?(r=e,xt(t.getTime(),r,n)):r===i?Et(t,n):_t(t,r,n)};yn.delay=function(t,e){return Ye(e)||(e=an),t instanceof Date?Ct(this,t.getTime(),e):St(this,t,e)},yn.debounce=yn.throttleWithTimeout=function(t,e){Ye(e)||(e=an);var n=this;return new $r(function(r){var o,i=new Ue,s=!1,u=0,a=n.subscribe(function(n){s=!0,o=n,u++;var a=u,c=new Fe;i.setDisposable(c),c.setDisposable(e.scheduleWithRelative(t,function(){s&&u===a&&r.onNext(o),s=!1}))},function(t){i.dispose(),r.onError(t),s=!1,u++},function(){i.dispose(),s&&r.onNext(o),r.onCompleted(),s=!1,u++});return new $e(a,i)},this)},yn.throttle=function(t,e){return this.debounce(t,e)},yn.windowWithTime=function(t,e,n){var r,o=this;return null==e&&(r=t),Ye(n)||(n=an),"number"==typeof e?r=e:Ye(e)&&(r=t,n=e),new $r(function(e){function i(){var t=new Fe,o=!1,s=!1;f.setDisposable(t),c===a?(o=!0,s=!0):a>c?o=!0:s=!0;var p=o?c:a,d=p-l;l=p,o&&(c+=r),s&&(a+=r),t.setDisposable(n.scheduleWithRelative(d,function(){if(s){var t=new Ir;h.push(t),e.onNext(Te(t,u))}o&&h.shift().onCompleted(),i()}))}var s,u,a=r,c=t,h=[],f=new Ue,l=0;return s=new $e(f),u=new Qe(s),h.push(new Ir),e.onNext(Te(h[0],u)),i(),s.add(o.subscribe(function(t){for(var e=0,n=h.length;n>e;e++)h[e].onNext(t)},function(t){for(var n=0,r=h.length;r>n;n++)h[n].onError(t);e.onError(t)},function(){for(var t=0,n=h.length;n>t;t++)h[t].onCompleted();e.onCompleted()})),u},o)},yn.windowWithTimeOrCount=function(t,e,n){var r=this;return Ye(n)||(n=an),new $r(function(o){function i(e){var r=new Fe;s.setDisposable(r),r.setDisposable(n.scheduleWithRelative(t,function(){if(e===h){c=0;var t=++h;f.onCompleted(),f=new Ir,o.onNext(Te(f,a)),i(t)}}))}var s=new Ue,u=new $e(s),a=new Qe(u),c=0,h=0,f=new Ir;return o.onNext(Te(f,a)),i(0),u.add(r.subscribe(function(t){var n=0,r=!1;f.onNext(t),++c===e&&(r=!0,c=0,n=++h,f.onCompleted(),f=new Ir,o.onNext(Te(f,a))),r&&i(n)},function(t){f.onError(t),o.onError(t)},function(){f.onCompleted(),o.onCompleted()})),a},r)},yn.bufferWithTime=function(t,e,n){return this.windowWithTime.apply(this,arguments).selectMany(function(t){return t.toArray()})},yn.bufferWithTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).selectMany(function(t){return t.toArray()})},yn.timeInterval=function(t){var e=this;return Ye(t)||(t=an),Rn(function(){var n=t.now();return e.map(function(e){var r=t.now(),o=r-n;return n=r,{value:e,interval:o}})})},yn.timestamp=function(t){return Ye(t)||(t=an),this.map(function(e){return{value:e,timestamp:t.now()}})},yn.sample=yn.throttleLatest=function(t,e){return Ye(e)||(e=an),"number"==typeof t?kt(this,Mr(t,e)):kt(this,t)},yn.timeout=function(t,e,n){(null==e||"string"==typeof e)&&(e=Kn(new Error(e||"Timeout"))),Ye(n)||(n=an);var r=this,o=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new $r(function(i){function s(){var r=u;f.setDisposable(n[o](t,function(){u===r&&(Lt(e)&&(e=Pn(e)),c.setDisposable(e.subscribe(i)))}))}var u=0,a=new Fe,c=new Ue,h=!1,f=new Ue;return c.setDisposable(a),s(),a.setDisposable(r.subscribe(function(t){h||(u++,i.onNext(t),s())},function(t){h||(u++,i.onError(t))},function(){h||(u++,i.onCompleted())})),new $e(c,f)},r)},En.generateWithAbsoluteTime=function(t,e,n,r,o,i){return Ye(i)||(i=an),new $r(function(s){var u=!0,a=!1;return i.scheduleRecursiveWithAbsoluteAndState(t,i.now(),function(t,i){a&&s.onNext(t);try{if(u?u=!1:t=n(t),a=e(t))var c=r(t),h=o(t)}catch(f){return void s.onError(f)}a?i(c,h):s.onCompleted()})})},En.generateWithRelativeTime=function(t,e,n,r,o,i){return Ye(i)||(i=an),new $r(function(s){var u=!0,a=!1;return i.scheduleRecursiveWithRelativeAndState(t,0,function(t,i){a&&s.onNext(t);try{if(u?u=!1:t=n(t),a=e(t))var c=r(t),h=o(t)}catch(f){return void s.onError(f)}a?i(c,h):s.onCompleted()})})},yn.delaySubscription=function(t,e){var n=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative",r=this;return Ye(e)||(e=an),new $r(function(o){var i=new Ue;return i.setDisposable(e[n](t,function(){i.setDisposable(r.subscribe(o))})),i},this)},yn.delayWithSelector=function(t,e){var n,r,o=this;return It(t)?r=t:(n=t,r=e),new $r(function(t){function e(){a.setDisposable(o.subscribe(function(e){var n=x(r)(e);if(n===We)return t.onError(n.e);var o=new Fe;s.add(o),o.setDisposable(n.subscribe(function(){t.onNext(e),s.remove(o),i()},function(e){t.onError(e)},function(){t.onNext(e),s.remove(o),i()}))},function(e){t.onError(e)},function(){u=!0,a.dispose(),i()}))}function i(){u&&0===s.length&&t.onCompleted()}var s=new $e,u=!1,a=new Ue;return n?a.setDisposable(n.subscribe(e,function(e){t.onError(e)},e)):e(),new $e(a,s)},this)},yn.timeoutWithSelector=function(t,e,n){1===arguments.length&&(e=t,t=Bn()),n||(n=Kn(new Error("Timeout")));var r=this;return new $r(function(o){function i(t){function e(){return h===r}var r=h,i=new Fe;a.setDisposable(i),i.setDisposable(t.subscribe(function(){e()&&u.setDisposable(n.subscribe(o)),i.dispose()},function(t){e()&&o.onError(t)},function(){e()&&u.setDisposable(n.subscribe(o))}))}function s(){var t=!f;return t&&h++,t}var u=new Ue,a=new Ue,c=new Fe;u.setDisposable(c);var h=0,f=!1;return i(t),c.setDisposable(r.subscribe(function(t){if(s()){o.onNext(t);var n;try{n=e(t)}catch(r){return void o.onError(r)}i(Lt(n)?Pn(n):n)}},function(t){s()&&o.onError(t)},function(){s()&&o.onCompleted()})),new $e(u,a)},r)},yn.debounceWithSelector=function(t){var e=this;return new $r(function(n){var r,o=!1,i=new Ue,s=0,u=e.subscribe(function(e){var u;try{u=t(e)}catch(a){return void n.onError(a)}Lt(u)&&(u=Pn(u)),o=!0,r=e,s++;var c=s,h=new Fe;i.setDisposable(h),h.setDisposable(u.subscribe(function(){o&&s===c&&n.onNext(r),o=!1,h.dispose()},n.onError.bind(n),function(){o&&s===c&&n.onNext(r),o=!1,h.dispose()}))},function(t){i.dispose(),n.onError(t),o=!1,s++},function(){i.dispose(),o&&n.onNext(r),n.onCompleted(),o=!1,s++});return new $e(u,i)},e)},yn.throttleWithSelector=function(t){return this.debounceWithSelector(t)},yn.skipLastWithTime=function(t,e){Ye(e)||(e=an);var n=this;return new $r(function(r){var o=[];return n.subscribe(function(n){var i=e.now();for(o.push({interval:i,value:n});o.length>0&&i-o[0].interval>=t;)r.onNext(o.shift().value)},function(t){r.onError(t)},function(){for(var n=e.now();o.length>0&&n-o[0].interval>=t;)r.onNext(o.shift().value);r.onCompleted()})},n)},yn.takeLastWithTime=function(t,e){var n=this;return Ye(e)||(e=an),new $r(function(r){var o=[];return n.subscribe(function(n){var r=e.now();for(o.push({interval:r,value:n});o.length>0&&r-o[0].interval>=t;)o.shift()},function(t){r.onError(t)},function(){for(var n=e.now();o.length>0;){var i=o.shift();n-i.interval<=t&&r.onNext(i.value)}r.onCompleted()})},n)},yn.takeLastBufferWithTime=function(t,e){var n=this;return Ye(e)||(e=an),new $r(function(r){var o=[];return n.subscribe(function(n){var r=e.now();for(o.push({interval:r,value:n});o.length>0&&r-o[0].interval>=t;)o.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),i=[];o.length>0;){var s=o.shift();n-s.interval<=t&&i.push(s.value)}r.onNext(i),r.onCompleted()})},n)},yn.takeWithTime=function(t,e){var n=this;return Ye(e)||(e=an),new $r(function(r){return new $e(e.scheduleWithRelative(t,function(){r.onCompleted()}),n.subscribe(r))},n)},yn.skipWithTime=function(t,e){var n=this;return Ye(e)||(e=an),new $r(function(r){var o=!1;return new $e(e.scheduleWithRelative(t,function(){o=!0}),n.subscribe(function(t){o&&r.onNext(t)},r.onError.bind(r),r.onCompleted.bind(r)))},n)},yn.skipUntilWithTime=function(t,e){Ye(e)||(e=an);var n=this,r=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new $r(function(o){var i=!1;return new $e(e[r](t,function(){i=!0}),n.subscribe(function(t){i&&o.onNext(t)},function(t){o.onError(t)},function(){o.onCompleted()}))},n)},yn.takeUntilWithTime=function(t,e){Ye(e)||(e=an);var n=this,r=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new $r(function(o){return new $e(e[r](t,function(){o.onCompleted()}),n.subscribe(o))},n)},yn.throttleFirst=function(t,e){Ye(e)||(e=an);var n=+t||0;if(0>=n)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new $r(function(t){var o=0;return r.subscribe(function(r){var i=e.now();(0===o||i-o>=n)&&(o=i,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)},yn.transduce=function(t){function e(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}var n=this;return new $r(function(r){var o=t(e(r));return n.subscribe(function(t){try{o["@@transducer/step"](r,t)}catch(e){r.onError(e)}},function(t){r.onError(t)},function(){o["@@transducer/result"](r)})},n)},yn.exclusive=function(){var t=this;return new $r(function(e){var n=!1,r=!1,o=new Fe,i=new $e;return i.add(o),o.setDisposable(t.subscribe(function(t){if(!n){n=!0,Lt(t)&&(t=Pn(t));var o=new Fe;i.add(o),o.setDisposable(t.subscribe(e.onNext.bind(e),e.onError.bind(e),function(){i.remove(o),n=!1,r&&1===i.length&&e.onCompleted()}))}},e.onError.bind(e),function(){r=!0,n||1!==i.length||e.onCompleted()})),i},this)},yn.exclusiveMap=function(t,e){var n=this,r=se(t,e,3);return new $r(function(t){var e=0,o=!1,i=!0,s=new Fe,u=new $e;return u.add(s),s.setDisposable(n.subscribe(function(n){o||(o=!0,innerSubscription=new Fe,u.add(innerSubscription),Lt(n)&&(n=Pn(n)),innerSubscription.setDisposable(n.subscribe(function(o){var i;try{i=r(o,e++,n)}catch(s){return void t.onError(s)}t.onNext(i)},function(e){t.onError(e)},function(){u.remove(innerSubscription),o=!1,i&&1===u.length&&t.onCompleted()})))},function(e){t.onError(e)},function(){i=!0,1!==u.length||o||t.onCompleted()})),u},this)},qt.VirtualTimeScheduler=function(t){function e(){return this.toDateTimeOffset(this.clock)}function n(t,e){return this.scheduleAbsoluteWithState(t,this.clock,e)}function r(t,e,n){return this.scheduleRelativeWithState(t,this.toRelative(e),n)}function o(t,e,n){return this.scheduleRelativeWithState(t,this.toRelative(e-this.now()),n)}function i(t,e){return e(),Ge}function s(i,s){this.clock=i,this.comparer=s,this.isEnabled=!1,this.queue=new Ve(1024),t.call(this,e,n,r,o)}qe(s,t);var u=s.prototype;return u.add=Zt,u.toDateTimeOffset=Zt,u.toRelative=Zt,u.schedulePeriodicWithState=function(t,e,n){var r=new en(this,t,e,n);return r.start()},u.scheduleRelativeWithState=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsoluteWithState(t,r,n)},u.scheduleRelative=function(t,e){return this.scheduleRelativeWithState(e,t,i)},u.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},u.stop=function(){this.isEnabled=!1},u.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new Xt;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},u.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new Xt;0!==n&&this.advanceTo(e)},u.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new Xt;this.clock=e},u.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},u.scheduleAbsolute=function(t,e){return this.scheduleAbsoluteWithState(e,t,i)},u.scheduleAbsoluteWithState=function(t,e,n){function r(t,e){return o.queue.remove(i),n(t,e)}var o=this,i=new He(this,t,r,e,this.comparer);return this.queue.enqueue(i),i.disposable},s}(Xe),qt.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,o=n||Mt;t.call(this,r,o)}qe(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toDateTimeOffset=function(t){return new Date(t).getTime()},n.toRelative=function(t){return t},e}(qt.VirtualTimeScheduler);var $r=qt.AnonymousObservable=function(t){function e(t){return t&&It(t.dispose)?t:It(t)?Ie(t):Ge}function n(t,n){var r=n[0],o=n[1],i=x(o)(r);return i!==We||r.fail(We.e)?void r.setDisposable(e(i)):E(We.e)}function r(e,r){function o(t){var r=new Lr(t),o=[r,e];return rn.scheduleRequired()?rn.scheduleWithState(o,n):n(null,o),r}this.source=r,t.call(this,o)}return qe(r,t),r}(En),Lr=function(t){function e(e){t.call(this),this.observer=e,this.m=new Fe}qe(e,t);var n=e.prototype;return n.next=function(t){var e=x(this.observer.onNext).call(this.observer,t);e===We&&(this.dispose(),E(e.e))},n.error=function(t){var e=x(this.observer.onError).call(this.observer,t);this.dispose(),e===We&&E(e.e)},n.completed=function(){var t=x(this.observer.onCompleted).call(this.observer);this.dispose(),t===We&&E(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(bn),zr=function(t){function e(t){return this.underlyingObservable.subscribe(t)}function n(n,r,o){t.call(this,e),this.key=n,this.underlyingObservable=o?new $r(function(t){return new $e(o.getDisposable(),r.subscribe(t))}):r}return qe(n,t),n}(En),Ir=qt.Subject=function(t){function e(t){return Je(this),this.isStopped?this.hasError?(t.onError(this.error),Ge):(t.onCompleted(),Ge):(this.observers.push(t),new Ar(this,t))}function n(){t.call(this,e),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return qe(n,t),Re(n.prototype,dn.prototype,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(Je(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=u(this.observers),n=e.length;n>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Je(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=u(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Je(this),!this.isStopped)for(var e=0,n=u(this.observers),r=n.length;r>e;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),n.create=function(t,e){return new Br(t,e)},n}(En),Gr=qt.AsyncSubject=function(t){function e(t){return Je(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),Ge):(this.observers.push(t),new Ar(this,t))}function n(){t.call(this,e),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return qe(n,t),Re(n.prototype,dn,{hasObservers:function(){return Je(this),this.observers.length>0},onCompleted:function(){var t,e;if(Je(this),!this.isStopped){this.isStopped=!0;var n=u(this.observers),e=n.length;if(this.hasValue)for(t=0;e>t;t++){var r=n[t];r.onNext(this.value),r.onCompleted()}else for(t=0;e>t;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(Je(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=u(this.observers),r=n.length;r>e;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){Je(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.exception=null,this.value=null}}),n}(En),Br=qt.AnonymousSubject=function(t){function e(t){return this.observable.subscribe(t)}function n(n,r){this.observer=n,this.observable=r,t.call(this,e)}return qe(n,t),Re(n.prototype,dn.prototype,{onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),n}(En);qt.Pauser=function(t){function e(){t.call(this)}return qe(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Ir),"function"==typeof t&&"object"==typeof t.amd&&t.amd?(At.Rx=qt,t(function(){return qt})):Ot&&Dt?jt?(Dt.exports=qt).Rx=qt:Ot.Rx=qt:At.Rx=qt;var Jr=l()}).call(this)}).call(this,e(131),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{131:131}]},{},[1])(1)});